define(["jquery"],function(){function n(){$("#mainContent").height($(document).height()-$("#navbar").height()-$("#breadcrumbs").height()-40)}window.location!=window.parent.location&&(window.parent.location=window.location);$(window).on("resize.window",function(){n()});require(["knockoutJs"],function(t){var i=function(){var i=this;this.loading=t.observable(!1);this.api="/api/SiteAdminNavigation";this.menus=t.observableArray([]);this.nav=t.observable({Href:t.observable("")});this.breadcrumbs=t.observableArray([]);this.activeNavs=t.observableArray([]);i.loading.subscribe(function(n){n?magicodes.loader.show():magicodes.loader.close()});i.nav.subscribe(function(t){$("#mainContent").attr("src",t.Href);n()});this.load=function(){i.loading(!0);magicodes.api.request("GET",{url:i.api,func:function(n){i.loading(!1);var r=$.grep(n,function(n){return n.ParentId==null});$.each(r,function(r,u){u._active=t.observable(!1);u._open=t.observable(!1);i._appendChildrenMenus(n,u)});i.menus(r);$("#sidebar").ace_sidebar();r.length>0&&$(".nav-list a:eq(0)").trigger("click")}})};this._appendChildrenMenus=function(n,r){var u=$.grep(n,function(n){return n.ParentId==r.Id});u.length>0&&(r.children=u,$.each(u,function(r,u){u._active=t.observable(!1);u._open=t.observable(!1);i._appendChildrenMenus(n,u)}))};this.open=function(n,r){var u,f,e;if(typeof n.children=="undefined")for(i.breadcrumbs([]),i.nav(n),$.each(i.activeNavs(),function(n,t){t._active(!1);t._open(!1)}),u=[$(r.target).closest("li")],u[0].parents("li").length>0&&u.push(u[0].parents("li")),u.length>1&&u[1].parents("li").length>0&&u.push(u[1].parents("li")),f=u.length-1;f>=0;f--)e=t.dataFor(u[f].get(0)),e._active(!0),f==u.length-1&&u.length>1&&e._open(!0),i.breadcrumbs.push(e),i.activeNavs.push(e)};i.load()};$(function(){t.applyBindings(new i);n()})})});
//# sourceMappingURL=navs.min.js.map
