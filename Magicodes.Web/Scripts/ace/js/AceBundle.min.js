/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
function tableToGrid(n,t){jQuery(n).each(function(){var n,i;if(!this.grid){jQuery(this).width("99%");var c=jQuery(this).width(),l=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),a=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),f=l.length>0,v=!f&&a.length>0,h=f||v,r=[],e=[];jQuery("th",jQuery(this)).each(function(){r.length===0&&h?(r.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),e.push("__selection__")):(r.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),e.push(jQuery(this).html()))});var u=[],o=[],s=[];for(jQuery("tbody > tr",jQuery(this)).each(function(){var t={},n=0;jQuery("td",jQuery(this)).each(function(){if(n===0&&h){var i=jQuery("input",jQuery(this)),f=i.attr("value");o.push(f||u.length);i.is(":checked")&&s.push(f);t[r[n].name]=i.attr("value")}else t[r[n].name]=jQuery(this).html();n++});n>0&&u.push(t)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:c,colNames:e,colModel:r,multiselect:f},t||{})),n=0;n<u.length;n++)i=null,o.length>0&&(i=o[n],i&&i.replace&&(i=encodeURIComponent(i).replace(/[.\-%]/g,"_"))),i===null&&(i=n+1),jQuery(this).jqGrid("addRowData",i,u[n]);for(n=0;n<s.length;n++)jQuery(this).jqGrid("setSelection",s[n])}})}if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;(u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),r=n(u),i&&i.preventDefault(),r.length||(r=f.closest(".alert")),r.trigger(i=n.Event("close.bs.alert")),i.isDefaultPrevented())||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.1";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t=t+"Text";u.resetText==null&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:i.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")):this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));this.options.pause!="hover"||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.1";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=n=="prev"?-1:1,r=this.getItemIndex(t),u=(r+i)%this.$items.length;return this.$items.eq(u)};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(n<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f=i=="next"?"left":"right",v=i=="next"?"first":"last",a=this,o,s,h,c;if(!u.length){if(!this.options.wrap)return;u=this.$element.find(".item")[v]()}return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),this.$element.trigger(s),s.isDefaultPrevented())?void 0:(this.sliding=!0,l&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&i=="show"&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n(this.options.trigger).filter('[href="#'+i.id+'"], [data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.1";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":n.extend({},u.data(),{trigger:this});i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var r=n(this),i=u(r),f={relatedTarget:this};i.hasClass("open")&&((i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.1";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.divider):visible a",f=o.find('[role="menu"]'+h+', [role="listbox"]'+h),f.length)&&(r=f.index(t.target),t.which==38&&r>0&&r--,t.which==40&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.options.backdrop&&r.adjustBackdrop();r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in").attr("aria-hidden",!1);r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){if(r=n.support.transition&&f,this.$backdrop=n('<div class="modal-backdrop '+f+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",n.proxy(function(n){n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop();this.adjustDialog()};t.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.tooltip"),u=typeof i=="object"&&i,e=u&&u.selector;(r||i!="destroy")&&(e?(r||f.data("bs.tooltip",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.tooltip",r=new t(this,u)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i&&i.$tip&&i.$tip.is(":visible")){i.hoverState="in";return}if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;if(y){var w=i,b=this.options.container?n(this.options.container):this.$element.parent(),e=this.getPosition(b);i=i=="bottom"&&f.bottom+s>e.bottom?"top":i=="top"&&f.top-s<e.top?"bottom":i=="right"&&f.right+o>e.width?"left":i=="left"&&f.left-o<e.left?"right":i;r.removeClass(w).addClass(i)}p=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(p,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function e(){r.hoverState!="in"&&u.detach();r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type);i&&i()}var r=this,u=this.tip(),f=n.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return u.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?u.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type)})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.popover"),u=typeof i=="object"&&i,e=u&&u.selector;(r||i!="destroy")&&(e?(r||f.data("bs.popover",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.popover",r=new t(this,u)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.1";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){var u=n.proxy(this.process,this);this.$body=n("body");this.$scrollElement=n(i).is("body")?n(window):n(i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",u);this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f=typeof i=="object"&&i;r||u.data("bs.scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})}t.VERSION="3.3.1";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var i="offset",r=0,t;n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();t=this;this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function o(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);e?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu")&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),e=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&e?f.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f=typeof i=="object"&&i;r||u.data("bs.affix",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.1";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(i!=null&&this.affixed=="top")return u<i?"top":!1;if(this.affixed=="bottom")return i!=null?u+this.unpin<=f.top?!1:"bottom":u+e<=n-r?!1:"bottom";var o=this.affixed==null,s=o?u:f.top,h=o?e:t;return i!=null&&s<=i?"top":r!=null&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=n("body").height();if(typeof r!="object"&&(u=f=r),typeof f=="function"&&(f=r.top(this.$element)),typeof u=="function"&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(this.unpin!=null&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin=i=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}i=="bottom"&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom!=null&&(t.offset.bottom=t.offsetBottom);t.offsetTop!=null&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery),function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function c(n){return function(){return this[n].apply(this,arguments)}}function y(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function p(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var s=n(window),l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this.dates=new l;this.viewDate=e();this.focusDate=null;this._process_options(r);this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},h,a,o,v,r,i;f.prototype={constructor:f,_process_options:function(t){var u,e,h,f,s;this._o=n.extend({},this._o,t);u=this.o=n.extend({},this._o);e=u.language;r[e]||(e=e.split("-")[0],r[e]||(e=o.language));u.language=e;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate=u.multidate!==!1?Math.max(0,u.multidate):1),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=i.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),f=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),f=n.grep(f,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(f.length===1)switch(f[0]){case"top":case"bottom":u.orientation.y=f[0];break;case"left":case"right":u.orientation.x=f[0]}else s=n.grep(f,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(f,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return n&&new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,n.map(t,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,o;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=s.width(),y=s.height(),l=s.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!=="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,e=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,o=l+y-(t.top+a+f),i=Math.max(v,o)===o?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?e+=a:e-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:e,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=this.dates.copy(),t=[],u=!1;arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date);t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this));t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0);this.dates.replace(t);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate));u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&r.length&&this._trigger("clearDate");this.fill()}},fillDow:function(){var i=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));i<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[i++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var d=new Date(this.viewDate),f=d.getUTCFullYear(),g=d.getUTCMonth(),y=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ut=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,p=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ft=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",w,e,b,c,s,h,o,a,it,rt,l,v;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(et).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(ot).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),e=u(f,g-1,28),b=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(b),e.setUTCDate(b-(e.getUTCDay()-this.o.weekStart+7)%7),c=new Date(e),c.setUTCDate(c.getUTCDate()+42),c=c.valueOf(),s=[];e.valueOf()<c;){if(e.getUTCDay()===this.o.weekStart&&(s.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),k=new Date(Number(k=u(tt.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),st=(tt-k)/6048e5+1;s.push('<td class="cw">'+st+"<\/td>")}h=this.getClassNames(e);h.push("day");this.o.beforeShowDay!==n.noop&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:typeof o=="boolean"?o={enabled:o}:typeof o=="string"&&(o={classes:o}),o.enabled===!1&&h.push("disabled"),o.classes&&(h=h.concat(o.classes.split(/\s+/))),o.tooltip&&(w=o.tooltip));h=n.unique(h);s.push('<td class="'+h.join(" ")+'"'+(w?' title="'+w+'"':"")+">"+e.getUTCDate()+"<\/td>");e.getUTCDay()===this.o.weekEnd&&s.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(s.join("")),a=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&a.eq(t.getUTCMonth()).addClass("active")}),(f<y||f>p)&&a.addClass("disabled"),f===y&&a.slice(0,ut).addClass("disabled"),f===p&&a.slice(ft+1).addClass("disabled"),s="",f=parseInt(f/10,10)*10,it=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td"),f-=1,rt=n.map(this.dates,function(n){return n.getUTCFullYear()}),v=-1;v<11;v++)l=["year"],v===-1?l.push("old"):v===10&&l.push("new"),n.inArray(f,rt)!==-1&&l.push("active"),(f<y||f>p)&&l.push("disabled"),s+='<span class="'+l.join(" ")+'">'+f+"<\/span>",f+=1;it.html(s)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var r,e,f,o,c,s,l,h;if(t.preventDefault(),r=n(t.target).closest("span, td, th"),r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn==="linked"?null:"view";this._setDate(s,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(u(e,f,o))):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(u(e,f,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.is(".old")?f===0?(f=11,e-=1):f-=1:r.is(".new")&&(f===11?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n?t!==-1?this.dates.remove(t):this.dates.push(n):this.dates.clear(),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));t&&t!=="view"||(this.viewDate=n&&new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(n,i){var e;if(!n)return t;if(!i)return n;var r=new Date(n.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),h=Math.abs(i),u,f;if(i=i>0?1:-1,h===1)f=i===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+i,r.setUTCMonth(u),(u<0||u>11)&&(u=(u+12)%12);else{for(e=0;e<h;e++)r=this.moveMonth(r,i);u=r.getUTCMonth();r.setUTCDate(o);f=function(){return u!==r.getUTCMonth()}}while(f())r.setUTCDate(--o),r.setUTCMonth(u);return r},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var o,t,i,u,r,f;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode===37?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t),u=new Date(r),u.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode===38?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t*7),u=new Date(r),u.setUTCDate(r.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(r);o=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};h=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;n.fn.datepicker=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),l=typeof i=="object"&&i,v;if(!e){var a=y(this,"date"),w=n.extend({},o,a,l),b=p(w.language),c=n.extend({},o,b,a,l);s.is(".input-daterange")||c.inputs?(v={inputs:c.inputs||s.find("input").toArray()},s.data("datepicker",e=new h(this,n.extend(c,v)))):s.data("datepicker",e=new f(this,c))}if(typeof i=="string"&&typeof e[i]=="function"&&(r=e[i].apply(e,u),r!==t))return!1}),r!==t?r:this};o=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function tt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n===t}var nt,c,v,y,h,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if(typeof o=="string"&&(o=i.parseFormat(o)),nt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++){v=nt.exec(c[h]);y=parseInt(v[1]);switch(v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+y*7);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var b={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return n.inArray(i,g)!==-1}).toArray()),c.length===a.length){for(h=0,it=a.length;h<it;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":k=n(r[s].months).filter(tt);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(tt);p=n.inArray(k[0],r[s].monthsShort)+1}b[v]=p}for(h=0;h<g.length;h++)w=g[h],w in b&&!isNaN(b[w])&&(d=new Date(e),l[w](d,b[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";for(typeof u=="string"&&(u=i.parseFormat(u)),e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);
/**
 * @license jqGrid  4.6.0 - jQuery Grid
 * Copyright (c) 2008, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2014-02-20
 */
(function($){"use strict";$.jgrid=$.jgrid||{};$.extend($.jgrid,{version:"4.6.0",htmlDecode:function(n){return n&&(n==="&nbsp;"||n==="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},format:function(n){var t=$.makeArray(arguments).slice(1);return n==null&&(n=""),n.replace(/\{(\d+)\}/g,function(n,i){return t[i]})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var n=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return i.exec(t)!=null&&(n=parseFloat(RegExp.$1)),n},getCellIndex:function(n){var t=$(n);return t.is("tr")?-1:(t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0],$.jgrid.msie)?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(n,t){var i=$.type(n);return(i==="string"||i==="number")&&(n=String(n),t=n!==""?String(t).replace(String(n),""):t),t},parse:function(jsonString){var js=jsonString;return js.substr(0,9)==="while(1);"&&(js=js.substr(9)),js.substr(0,2)==="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(n,t,i,r){var it=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),c=typeof t=="string"?t.match(it):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,o,f,g,nt=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t},s,a;if(r===undefined&&(r=$.jgrid.formatter.date),r.parseRe===undefined&&(r.parseRe=/[#%\\\/:_;.,\t\s-]/),r.masks.hasOwnProperty(n)&&(n=r.masks[n]),t&&t!=null)if(isNaN(+t)||String(n).toLowerCase()!=="u")if(t.constructor===Date)e=t;else if(c!==null)e=new Date(parseInt(c[1],10)),c[3]&&(s=Number(c[5])*60+Number(c[6]),s*=c[4]==="-"?1:-1,s-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+s*6e4)));else{for(s=0,r.srcformat==="ISO8601Long"&&t.charAt(t.length-1)==="Z"&&(s-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),n=n.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),f=0,g=n.length;f<g;f++)n[f]==="M"&&(o=$.inArray(t[f],r.monthNames),o!==-1&&o<12&&(t[f]=o+1,u.m=t[f])),n[f]==="F"&&(o=$.inArray(t[f],r.monthNames,12),o!==-1&&o>11&&(t[f]=o+1-12,u.m=t[f])),n[f]==="a"&&(o=$.inArray(t[f],r.AmPm),o!==-1&&o<2&&t[f]===r.AmPm[o]&&(t[f]=o,u.h=nt(t[f],u.h))),n[f]==="A"&&(o=$.inArray(t[f],r.AmPm),o!==-1&&o>1&&t[f]===r.AmPm[o]&&(t[f]=o-2,u.h=nt(t[f],u.h))),n[f]==="g"&&(u.h=parseInt(t[f],10)),t[f]!==undefined&&(u[n[f].toLowerCase()]=parseInt(t[f],10));if(u.f&&(u.m=u.f),u.m===0&&u.y===0&&u.d===0)return"&#160;";u.m=parseInt(u.m,10)-1;a=u.y;a>=70&&a<=99?u.y=1900+u.y:a>=0&&a<=69&&(u.y=2e3+u.y);e=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);s>0&&e.setTime(Number(Number(e)+s*6e4))}else e=new Date(parseFloat(t)*1e3);else e=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);if(i===undefined)return e;r.masks.hasOwnProperty(i)?i=r.masks[i]:i||(i="Y-m-d");var l=e.getHours(),rt=e.getMinutes(),p=e.getDate(),v=e.getMonth()+1,k=e.getTimezoneOffset(),ut=e.getSeconds(),ft=e.getMilliseconds(),w=e.getDay(),y=e.getFullYear(),b=(w+6)%7+1,d=(new Date(y,v-1,p)-new Date(y,0,1))/864e5,tt={d:h(p),D:r.dayNames[w],j:p,l:r.dayNames[w+7],N:b,S:r.S(p),w:w,z:d,W:b<5?Math.floor((d+b-1)/7)+1:Math.floor((d+b-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:r.monthNames[v- -11],m:h(v),M:r.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?r.AmPm[0]:r.AmPm[1],A:l<12?r.AmPm[2]:r.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(rt),s:h(ut),u:ft,e:"?",I:"?",O:(k>0?"-":"+")+h(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1e3)};return i.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return tt.hasOwnProperty(n)?tt[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(n){return(n||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(n,t,i){var u,r=typeof t=="string"?t.match(/^(.*)\[(\w+)\]$/):null;return typeof t=="function"?t(n):r&&r[2]?r[1]?$(r[1],n).attr(r[2]):$(n).attr(r[2]):(u=$(t,n),i)?u:u.length>0?$(u).text():undefined},cellWidth:function(){var n=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),t=n.appendTo("body").find("td").width();return n.remove(),Math.abs(t-5)>.1},cell_width:!0,ajaxOptions:{},from:function(n){var t=function(n,t){typeof n=="string"&&(n=$.data(n));var i=this,r=n,s=!0,e=!1,u=t,a=/[\$,%]/g,h=null,v=null,y=0,f=!1,l="",o=[],c=!0;if(typeof n=="object"&&n.push)n.length>0&&(c=typeof n[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return r===null?!1:r.length===0?!1:!0},this._getStr=function(n){var t=[];return e&&t.push("jQuery.trim("),t.push("String("+n+")"),e&&t.push(")"),s||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(n){return e&&(n=$.trim(n)),n=n.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),s?n:n.toLowerCase()},this._funcLoop=function(n){var t=[];return $.each(r,function(i,r){t.push(n(r))}),t},this._append=function(n){var t;for(u===null?u="":u+=l===""?" && ":l,t=0;t<y;t++)u+="(";f&&(u+="!");u+="("+n+")";f=!1;l="";y=0},this._setCommand=function(n,t){h=n;v=t},this._resetNegate=function(){f=!1},this._repeatCommand=function(n,t){return h===null?i:n!==null&&t!==null?h(n,t):v===null?h(n):c?h(v,n):h(n)},this._equals=function(n,t){return i._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(s||typeof n=="number"||typeof t=="number"||(n=String(n),t=String(t)),n<t)?-i:n>t?i:0},this._performSort=function(){o.length!==0&&(r=i._doSort(r,0))},this._doSort=function(n,t){var h=o[t].by,c=o[t].dir,l=o[t].type,a=o[t].datefmt,v=o[t].sfunc,f,e,r,u,s;if(t===o.length-1)return i._getOrder(n,h,c,l,a,v);for(t++,f=i._getGroup(n,h,c,l,a),e=[],r=0;r<f.length;r++)for(s=i._doSort(f[r].items,t),u=0;u<s.length;u++)e.push(s[u]);return e},this._getOrder=function(n,t,r,u,f,e){var l=[],h=[],v=r==="a"?1:-1,y,o,c,p,w;for(u===undefined&&(u="text"),p=u==="float"||u==="number"||u==="currency"||u==="numeric"?function(n){var t=parseFloat(String(n).replace(a,""));return isNaN(t)?0:t}:u==="int"||u==="integer"?function(n){return n?parseFloat(String(n).replace(a,"")):0}:u==="date"||u==="datetime"?function(n){return $.jgrid.parseDate(f,n).getTime()}:$.isFunction(u)?u:function(n){return n=n?$.trim(String(n)):"",s?n:n.toLowerCase()},$.each(n,function(n,i){o=t!==""?$.jgrid.getAccessor(i,t):i;o===undefined&&(o="");o=p(o,i);h.push({vSort:o,index:n})}),$.isFunction(e)?h.sort(function(n,t){return n=n.vSort,t=t.vSort,e.call(this,n,t,v)}):h.sort(function(n,t){return n=n.vSort,t=t.vSort,i._compare(n,t,v)}),c=0,w=n.length;c<w;)y=h[c].index,l.push(n[y]),c++;return l},this._getGroup=function(n,t,r,u,f){var s=[],e=null,h=null,o;return $.each(i._getOrder(n,t,r,u,f),function(n,r){o=$.jgrid.getAccessor(r,t);o==null&&(o="");i._equals(h,o)||(h=o,e!==null&&s.push(e),e=i._group(t,o));e.items.push(r)}),e!==null&&s.push(e),s},this.ignoreCase=function(){return s=!1,i},this.useCase=function(){return s=!0,i},this.trim=function(){return e=!0,i},this.noTrim=function(){return e=!1,i},this.execute=function(){var match=u,results=[];return match===null?i:($.each(r,function(){eval(match)&&results.push(this)}),r=results,i)},this.data=function(){return r},this.select=function(n){if(i._performSort(),!i._hasData())return[];if(i.execute(),$.isFunction(n)){var t=[];return $.each(r,function(i,r){t.push(n(r))}),t}return r},this.hasMatch=function(){return i._hasData()?(i.execute(),r.length>0):!1},this.andNot=function(n,t,r){return f=!f,i.and(n,t,r)},this.orNot=function(n,t,r){return f=!f,i.or(n,t,r)},this.not=function(n,t,r){return i.andNot(n,t,r)},this.and=function(n,t,r){return(l=" && ",n===undefined)?i:i._repeatCommand(n,t,r)},this.or=function(n,t,r){return(l=" || ",n===undefined)?i:i._repeatCommand(n,t,r)},this.orBegin=function(){return y++,i},this.orEnd=function(){return u!==null&&(u+=")"),i},this.isNot=function(n){return f=!f,i.is(n)},this.is=function(n){return i._append("this."+n),i._resetNegate(),i},this._compareValues=function(n,t,r,u,f){var o,e,s;if(o=c?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",r===undefined&&(r=null),e=r,s=f.stype===undefined?"text":f.stype,r!==null)switch(s){case"int":case"integer":e=isNaN(Number(e))||e===""?"0":e;o="parseInt("+o+",10)";e="parseInt("+e+",10)";break;case"float":case"number":case"numeric":e=String(e).replace(a,"");e=isNaN(Number(e))||e===""?"0":e;o="parseFloat("+o+")";e="parseFloat("+e+")";break;case"date":case"datetime":e=String($.jgrid.parseDate(f.newfmt||"Y-m-d",e).getTime());o='jQuery.jgrid.parseDate("'+f.srcfmt+'",'+o+").getTime()";break;default:o=i._getStr(o);e=i._getStr('"'+i._toStr(e)+'"')}return i._append(o+" "+u+" "+e),i._setCommand(n,t),i._resetNegate(),i},this.equals=function(n,t,r){return i._compareValues(i.equals,n,t,"==",r)},this.notEquals=function(n,t,r){return i._compareValues(i.equals,n,t,"!==",r)},this.isNull=function(n,t,r){return i._compareValues(i.equals,n,null,"===",r)},this.greater=function(n,t,r){return i._compareValues(i.greater,n,t,">",r)},this.less=function(n,t,r){return i._compareValues(i.less,n,t,"<",r)},this.greaterOrEquals=function(n,t,r){return i._compareValues(i.greaterOrEquals,n,t,">=",r)},this.lessOrEquals=function(n,t,r){return i._compareValues(i.lessOrEquals,n,t,"<=",r)},this.startsWith=function(n,t){var u=t==null?n:t,r=e?$.trim(u.toString()).length:u.toString().length;return c?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr(0,"+r+") == "+i._getStr('"'+i._toStr(t)+'"')):(t!=null&&(r=e?$.trim(t.toString()).length:t.toString().length),i._append(i._getStr("this")+".substr(0,"+r+") == "+i._getStr('"'+i._toStr(n)+'"'))),i._setCommand(i.startsWith,n),i._resetNegate(),i},this.endsWith=function(n,t){var r=t==null?n:t,u=e?$.trim(r.toString()).length:r.toString().length;return c?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr("+i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".length-"+u+","+u+') == "'+i._toStr(t)+'"'):i._append(i._getStr("this")+".substr("+i._getStr("this")+'.length-"'+i._toStr(n)+'".length,"'+i._toStr(n)+'".length) == "'+i._toStr(n)+'"'),i._setCommand(i.endsWith,n),i._resetNegate(),i},this.contains=function(n,t){return c?i._append(i._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+i._toStr(t)+'",0) > -1'):i._append(i._getStr("this")+'.indexOf("'+i._toStr(n)+'",0) > -1'),i._setCommand(i.contains,n),i._resetNegate(),i},this.groupBy=function(n,t,u,f){return i._hasData()?i._getGroup(r,n,t,u,f):null},this.orderBy=function(n,t,r,u,f){return t=t==null?"a":$.trim(t.toString().toLowerCase()),r==null&&(r="text"),u==null&&(u="Y-m-d"),f==null&&(f=!1),(t==="desc"||t==="descending")&&(t="d"),(t==="asc"||t==="ascending")&&(t="a"),o.push({by:n,dir:t,type:r,datefmt:u,sfunc:f}),i},i};return new t(n,null)},getMethod:function(n){return this.getAccessor($.fn.jqGrid,n)},extend:function(n){$.extend($.fn.jqGrid,n);this.no_legacy_api||$.fn.extend(n)}});$.fn.jqGrid=function(n){var t,i;if(typeof n=="string"){if(t=$.jgrid.getMethod(n),!t)throw"jqGrid - No such method: "+n;return i=$.makeArray(arguments).slice(1),t.apply(this,i)}return this.each(function(){var u,o,v,ot,b,pi,ut,k,gt,ft,ni,et,e,l,ti,vt,bi;if(!this.grid){var r=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},$.jgrid.defaults,n||{}),t=this,i={headers:[],cols:[],footers:[],dragStart:function(n,i,u){var f=$(this.bDiv).offset().left;this.resizing={idx:n,startX:i.clientX,sOL:i.clientX-f};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(r.id),"#gbox_"+$.jgrid.jqID(r.id));this.curGbox.css({display:"block",left:i.clientX-f,top:u[1],height:u[2]});$(t).triggerHandler("jqGridResizeStart",[i,n]);$.isFunction(r.resizeStart)&&r.resizeStart.call(t,i,n);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.clientX-this.resizing.startX,i=this.headers[this.resizing.idx],f=r.direction==="ltr"?i.width+t:i.width-t,u,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),r.forceFit===!0?(u=this.headers[this.resizing.idx+r.nv],e=r.direction==="ltr"?u.width-t:u.width+t,e>33&&(i.newWidth=f,u.newWidth=e)):(this.newWidth=r.direction==="ltr"?r.tblwidth+t:r.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var n=this.resizing.idx,i=this.headers[n].newWidth||this.headers[n].width;i=parseInt(i,10);this.resizing=!1;$("#rs_m"+$.jgrid.jqID(r.id)).css("display","none");r.colModel[n].width=i;this.headers[n].width=i;this.headers[n].el.style.width=i+"px";this.cols[n].style.width=i+"px";this.footers.length>0&&(this.footers[n].style.width=i+"px");r.forceFit===!0?(i=this.headers[n+r.nv].newWidth||this.headers[n+r.nv].width,this.headers[n+r.nv].width=i,this.headers[n+r.nv].el.style.width=i+"px",this.cols[n+r.nv].style.width=i+"px",this.footers.length>0&&(this.footers[n+r.nv].style.width=i+"px"),r.colModel[n+r.nv].width=i):(r.tblwidth=this.newWidth||r.tblwidth,$("table:first",this.bDiv).css("width",r.tblwidth+"px"),$("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&($("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));$(t).triggerHandler("jqGridResizeStop",[i,n]);$.isFunction(r.resizeStop)&&r.resizeStop.call(t,i,n)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var f,n,l,e;if(i.timer&&clearTimeout(i.timer),i.timer=null,f=$(i.bDiv).height(),f){if(n=$("table:first",i.bDiv),n[0].rows.length)try{l=n[0].rows[1];e=l?$(l).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(y){e=i.prevRowHeight}if(e){i.prevRowHeight=e;var v=r.rowNum,o=i.scrollTop=i.bDiv.scrollTop,s=Math.round(n.position().top)-o,h=s+n.height(),t=e*v,u,c,a;if(h<f&&s<=0&&(r.lastpage===undefined||parseInt((h+o+t-1)/t,10)<=r.lastpage)&&(c=parseInt((f-h+t-1)/t,10),h>=0||c<2||r.scroll===!0?(u=Math.round((h+o)/t)+1,s=-1):s=1),s>0&&(u=parseInt(o/t,10)+1,c=parseInt((o+f)/t,10)+2-u,a=!0),c){if(r.lastpage&&(u>r.lastpage||r.lastpage===1||u===r.page&&u===r.lastpage))return;i.hDiv.loading?i.timer=setTimeout(i.populateVisible,r.scrollTimeout):(r.page=u,a&&(i.selectionPreserver(n[0]),i.emptyRows.call(n[0],!1,!1)),i.populate(c))}}}},scrollGrid:function(n){if(r.scroll){var t=i.bDiv.scrollTop;i.scrollTop===undefined&&(i.scrollTop=0);t!==i.scrollTop&&(i.scrollTop=t,i.timer&&clearTimeout(i.timer),i.timer=setTimeout(i.populateVisible,r.scrollTimeout))}i.hDiv.scrollLeft=i.bDiv.scrollLeft;r.footerrow&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft);n&&n.stopPropagation()},selectionPreserver:function(n){var t=n.p,r=t.selrow,i=t.selarrrow?$.makeArray(t.selarrrow):null,f=n.grid.bDiv.scrollLeft,u=function(){var e;if(t.selrow=null,t.selarrrow=[],t.multiselect&&i&&i.length>0)for(e=0;e<i.length;e++)i[e]!==r&&$(n).jqGrid("setSelection",i[e],!1,null);r&&$(n).jqGrid("setSelection",r,!1,null);n.grid.bDiv.scrollLeft=f;$(n).unbind(".selectionPreserver",u)};$(n).bind("jqGridGridComplete.selectionPreserver",u)}};if(this.tagName.toUpperCase()!=="TABLE"){alert("Element is not a table");return}if(document.documentMode!==undefined&&document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}if($(this).empty().attr("tabindex","0"),this.p=r,this.p.useProp=!!$.fn.prop,this.p.colNames.length===0)for(u=0;u<this.p.colModel.length;u++)this.p.colNames[u]=this.p.colModel[u].label||this.p.colModel[u].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.errors.model);return}v=$("<div class='ui-jqgrid-view'><\/div>");ot=$.jgrid.msie;t.p.direction=$.trim(t.p.direction.toLowerCase());$.inArray(t.p.direction,["ltr","rtl"])===-1&&(t.p.direction="ltr");o=t.p.direction;$(v).insertBefore(this);$(this).removeClass("scroll").appendTo(v);b=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");$(b).attr({id:"gbox_"+this.id,dir:o}).insertBefore(v);$(v).attr("id","gview_"+this.id).appendTo(b);$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").insertBefore(v);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"<\/div>").insertBefore(v);$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var h=function(n,t){return(n=parseInt(n,10),isNaN(n))?t||0:n},g=function(n,r,u,f,e,o){var h=t.p.colModel[n],v=h.align,c='style="',a=h.classes,y=h.name,l,s=[];return v&&(c+="text-align:"+v+";"),h.hidden===!0&&(c+="display:none;"),r===0?c+="width: "+i.headers[n].width+"px;":h.cellattr&&$.isFunction(h.cellattr)&&(l=h.cellattr.call(t,e,u,f,h,o),l&&typeof l=="string"&&(l=l.replace(/style/i,"style").replace(/title/i,"title"),l.indexOf("title")>-1&&(h.title=!1),l.indexOf("class")>-1&&(a=undefined),s=l.replace("-style","-sti").split(/style/),s.length===2?(s[1]=$.trim(s[1].replace("-sti","-style").replace("=","")),(s[1].indexOf("'")===0||s[1].indexOf('"')===0)&&(s[1]=s[1].substring(1)),c+=s[1].replace(/'/gi,'"')):c+='"')),s.length||(s[0]="",c+='"'),c+=(a!==undefined?' class="'+a+'"':"")+(h.title&&u?' title="'+$.jgrid.stripHtml(u)+'"':""),c+=' aria-describedby="'+t.p.id+"_"+y+'"',c+s[0]},ii=function(n){return n==null||n===""?"&#160;":t.p.autoencode?$.jgrid.htmlEncode(n):String(n)},ri=function(n,i,r,u,f){var e=t.p.colModel[r],o,s;return e.formatter!==undefined?(n=String(t.p.idPrefix)!==""?$.jgrid.stripPref(t.p.idPrefix,n):n,s={rowId:n,colModel:e,gid:t.p.id,pos:r},o=$.isFunction(e.formatter)?e.formatter.call(t,i,s,u,f):$.fmatter?$.fn.fmatter.call(t,e.formatter,i,s,u,f):ii(i)):o=ii(i),o},yt=function(n,t,i,r,u,f){var e,o;return e=ri(n,t,i,u,"add"),o=g(i,r,e,u,n,f),'<td role="gridcell" '+o+">"+e+"<\/td>"},ui=function(n,i,r,u){var f='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+n+'" class="cbox" name="jqg_'+t.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>",e=g(i,r,"",null,n,!0);return'<td role="gridcell" '+e+">"+f+"<\/td>"},fi=function(n,t,i,r){var u=(parseInt(i,10)-1)*parseInt(r,10)+1+t,f=g(n,t,u,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+u+"<\/td>"},ei=function(n){for(var i,u=[],f=0,r=0;r<t.p.colModel.length;r++)i=t.p.colModel[r],i.name!=="cb"&&i.name!=="subgrid"&&i.name!=="rn"&&(u[f]=n==="local"?i.name:n==="xml"||n==="xmlstring"?i.xmlmap||i.name:i.jsonmap||i.name,t.p.keyIndex!==!1&&i.key===!0&&(t.p.keyName=u[f]),f++);return u},pt=function(n){var i=t.p.remapColumns;return i&&i.length||(i=$.map(t.p.colModel,function(n,t){return t})),n&&(i=$.map(i,function(t){return t<n?null:t-n})),i},nt=function(n,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i));n&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0));t===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},wt=function(){for(var u=t.p.data.length,i,f=t.p.rownumbers===!0?1:0,e=t.p.multiselect===!0?1:0,o=t.p.subGrid===!0?1:0,r=t.p.keyIndex===!1||t.p.loadonce===!0?t.p.localReader.id:t.p.colModel[t.p.keyIndex+e+o+f].name,n=0;n<u;n++)i=$.jgrid.getAccessor(t.p.data[n],r),i===undefined&&(i=String(n+1)),t.p._index[i]=n},bt=function(n,i,r,u,f,e){var c="-1",l="",s,h=i?"display:none;":"",a="ui-widget-content jqgrow ui-row-"+t.p.direction+(r?" "+r:"")+(e?" ui-state-highlight":""),o=$(t).triggerHandler("jqGridRowAttr",[u,f,n]);if(typeof o!="object"&&(o=$.isFunction(t.p.rowattr)?t.p.rowattr.call(t,u,f,n):{}),!$.isEmptyObject(o)){o.hasOwnProperty("id")&&(n=o.id,delete o.id);o.hasOwnProperty("tabindex")&&(c=o.tabindex,delete o.tabindex);o.hasOwnProperty("style")&&(h+=o.style,delete o.style);o.hasOwnProperty("class")&&(a+=" "+o["class"],delete o["class"]);try{delete o.role}catch(v){}for(s in o)o.hasOwnProperty(s)&&(l+=" "+s+"="+o[s])}return'<tr role="row" id="'+n+'" tabindex="'+c+'" class="'+a+'"'+(h===""?"":' style="'+h+'"')+l+">"},kt=function(n,i,r,u,f){var ri=new Date,ft=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="xmlstring",et="_id_",o=t.p.xmlReader,oi=t.p.datatype==="local"?"local":"xml",g,gt,lt,at,ni,ti,ii;if(ft&&(t.p.data=[],t.p._index={},t.p.localReader.id=et),t.p.reccount=0,$.isXMLDoc(n))t.p.treeANode!==-1||t.p.scroll?r=r>1?r:1:(nt.call(t,!1,!0),r=1);else return;var d=$(t),v,ot,w=0,b,y=t.p.multiselect===!0?1:0,k=0,vt,a=t.p.rownumbers===!0?1:0,tt,ct,it=[],ut,e={},l,c,s=[],si=t.p.altRows===!0?t.p.altclass:"",wt;t.p.subGrid===!0&&(k=1,vt=$.jgrid.getMethod("addSubGridCell"));o.repeatitems||(it=ei(oi));tt=t.p.keyIndex===!1?$.isFunction(o.id)?o.id.call(t,n):o.id:t.p.keyIndex;it.length>0&&!isNaN(tt)&&(tt=t.p.keyName);ct=String(tt).indexOf("[")===-1?it.length?function(n,t){return $(tt,n).text()||t}:function(n,t){return $(o.cell,n).eq(tt).text()||t}:function(n,t){return n.getAttribute(tt.replace(/[\[\]]/g,""))||t};t.p.userData={};t.p.page=h($.jgrid.getXmlData(n,o.page),t.p.page);t.p.lastpage=h($.jgrid.getXmlData(n,o.total),1);t.p.records=h($.jgrid.getXmlData(n,o.records));$.isFunction(o.userdata)?t.p.userData=o.userdata.call(t,n)||{}:$.jgrid.getXmlData(n,o.userdata,!0).each(function(){t.p.userData[this.getAttribute("name")]=$(this).text()});g=$.jgrid.getXmlData(n,o.root,!0);g=$.jgrid.getXmlData(g,o.row,!0);g||(g=[]);var rt=g.length,p=0,st=[],ht=parseInt(t.p.rowNum,10),kt=t.p.scroll?$.jgrid.randId():1,dt;if(rt>0&&t.p.page<=0&&(t.p.page=1),g&&rt)for(f&&(ht*=f+1),gt=$.isFunction(t.p.afterInsertRow),lt=!1,t.p.grouping&&(lt=t.p.groupingView.groupCollapse===!0,at=$.jgrid.getMethod("groupingPrepare"));p<rt;){if(l=g[p],c=ct(l,kt+p),c=t.p.idPrefix+c,dt=r===0?0:r+1,wt=(dt+p)%2==1?si:"",ni=s.length,s.push(""),a&&s.push(fi(0,p,t.p.page,t.p.rowNum)),y&&s.push(ui(c,a,p,!1)),k&&s.push(vt.call(d,y+a,p+r)),o.repeatitems)ut||(ut=pt(y+k+a)),ti=$.jgrid.getXmlData(l,o.cell,!0),$.each(ut,function(n){var i=ti[this];if(!i)return!1;b=i.textContent||i.text;e[t.p.colModel[n+y+k+a].name]=b;s.push(yt(c,b,n+y+k+a,p+r,l,e))});else for(v=0;v<it.length;v++)b=$.jgrid.getXmlData(l,it[v]),e[t.p.colModel[v+y+k+a].name]=b,s.push(yt(c,b,v+y+k+a,p+r,l,e));if(s[ni]=bt(c,lt,wt,e,l,!1),s.push("<\/tr>"),t.p.grouping&&(st.push(s),t.p.groupingView._locgr||at.call(d,e,p),s=[]),(ft||t.p.treeGrid===!0)&&(e[et]=$.jgrid.stripPref(t.p.idPrefix,c),t.p.data.push(e),t.p._index[e[et]]=t.p.data.length-1),t.p.gridview===!1&&($("tbody:first",i).append(s.join("")),d.triggerHandler("jqGridAfterInsertRow",[c,e,l]),gt&&t.p.afterInsertRow.call(t,c,e,l),s=[]),e={},w++,p++,w===ht)break}if(t.p.gridview===!0&&(ot=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?(ft||d.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ht),st=null):t.p.treeGrid===!0&&ot>0?$(t.rows[ot]).after(s.join("")):$("tbody:first",i).append(s.join(""))),t.p.subGrid===!0)try{d.jqGrid("addSubGrid",y+a)}catch(hi){}if(t.p.totaltime=new Date-ri,w>0&&t.p.records===0&&(t.p.records=rt),s=null,t.p.treeGrid===!0)try{d.jqGrid("setTreeNode",ot+1,w+ot+1)}catch(ci){}if(t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0),t.p.reccount=w,t.p.treeANode=-1,t.p.userDataOnFooter&&d.jqGrid("footerData","set",t.p.userData,!0),ft&&(t.p.records=rt,t.p.lastpage=Math.ceil(rt/ht)),u||t.updatepager(!1,!0),ft){while(w<rt){if(l=g[w],c=ct(l,w+kt),c=t.p.idPrefix+c,o.repeatitems)ut||(ut=pt(y+k+a)),ii=$.jgrid.getXmlData(l,o.cell,!0),$.each(ut,function(n){var i=ii[this];if(!i)return!1;b=i.textContent||i.text;e[t.p.colModel[n+y+k+a].name]=b});else for(v=0;v<it.length;v++)b=$.jgrid.getXmlData(l,it[v]),e[t.p.colModel[v+y+k+a].name]=b;e[et]=$.jgrid.stripPref(t.p.idPrefix,c);t.p.grouping&&at.call(d,e,w);t.p.data.push(e);t.p._index[e[et]]=t.p.data.length-1;e={};w++}t.p.grouping&&(t.p.groupingView._locgr=!0,d.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ht),st=null)}},st=function(n,i,r,u,f){var hi=new Date,s,rt,lt,ut,st,si,ht;if(n)t.p.treeANode!==-1||t.p.scroll?r=r>1?r:1:(nt.call(t,!1,!0),r=1);else return;rt="_id_";ut=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="jsonstring";ut&&(t.p.data=[],t.p._index={},t.p.localReader.id=rt);t.p.reccount=0;t.p.datatype==="local"?(s=t.p.localReader,lt="local"):(s=t.p.jsonReader,lt="json");var d=$(t),y=0,at,p,w,ct=[],o,b=t.p.multiselect?1:0,k=t.p.subGrid===!0?1:0,dt,v=t.p.rownumbers===!0?1:0,gt=pt(b+k+v),vt=ei(lt),tt,it,g,l,c={},ft,e,a=[],ci=t.p.altRows===!0?t.p.altclass:"",ni;t.p.page=h($.jgrid.getAccessor(n,s.page),t.p.page);t.p.lastpage=h($.jgrid.getAccessor(n,s.total),1);t.p.records=h($.jgrid.getAccessor(n,s.records));t.p.userData=$.jgrid.getAccessor(n,s.userdata)||{};k&&(dt=$.jgrid.getMethod("addSubGridCell"));l=t.p.keyIndex===!1?$.isFunction(s.id)?s.id.call(t,n):s.id:t.p.keyIndex;s.repeatitems||(ct=vt,ct.length>0&&!isNaN(l)&&(l=t.p.keyName));g=$.jgrid.getAccessor(n,s.root);g==null&&$.isArray(n)&&(g=n);g||(g=[]);it=g.length;p=0;it>0&&t.p.page<=0&&(t.p.page=1);var et=parseInt(t.p.rowNum,10),ti=t.p.scroll?$.jgrid.randId():1,ii,ri=!1,wt;f&&(et*=f+1);t.p.datatype!=="local"||t.p.deselectAfterSort||(ri=!0);var li=$.isFunction(t.p.afterInsertRow),ot=[],oi=!1,kt;for(t.p.grouping&&(oi=t.p.groupingView.groupCollapse===!0,kt=$.jgrid.getMethod("groupingPrepare"));p<it;){for(o=g[p],e=$.jgrid.getAccessor(o,l),e===undefined&&(typeof l=="number"&&t.p.colModel[l+b+k+v]!=null&&(e=$.jgrid.getAccessor(o,t.p.colModel[l+b+k+v].name)),e===undefined&&(e=ti+p,ct.length===0&&s.cell&&(st=$.jgrid.getAccessor(o,s.cell)||o,e=st!=null&&st[l]!==undefined?st[l]:e,st=null))),e=t.p.idPrefix+e,ii=r===1?0:r,ni=(ii+p)%2==1?ci:"",ri&&(wt=t.p.multiselect?$.inArray(e,t.p.selarrrow)!==-1:e===t.p.selrow),si=a.length,a.push(""),v&&a.push(fi(0,p,t.p.page,t.p.rowNum)),b&&a.push(ui(e,v,p,wt)),k&&a.push(dt.call(d,b+v,p+r)),tt=vt,s.repeatitems&&(s.cell&&(o=$.jgrid.getAccessor(o,s.cell)||o),$.isArray(o)&&(tt=gt)),w=0;w<tt.length;w++)at=$.jgrid.getAccessor(o,tt[w]),c[t.p.colModel[w+b+k+v].name]=at,a.push(yt(e,at,w+b+k+v,p+r,o,c));if(a[si]=bt(e,oi,ni,c,o,wt),a.push("<\/tr>"),t.p.grouping&&(ot.push(a),t.p.groupingView._locgr||kt.call(d,c,p),a=[]),(ut||t.p.treeGrid===!0)&&(c[rt]=$.jgrid.stripPref(t.p.idPrefix,e),t.p.data.push(c),t.p._index[c[rt]]=t.p.data.length-1),t.p.gridview===!1&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(a.join("")),d.triggerHandler("jqGridAfterInsertRow",[e,c,o]),li&&t.p.afterInsertRow.call(t,e,c,o),a=[]),c={},y++,p++,y===et)break}if(t.p.gridview===!0&&(ft=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?ut||(d.jqGrid("groupingRender",ot,t.p.colModel.length,t.p.page,et),ot=null):t.p.treeGrid===!0&&ft>0?$(t.rows[ft]).after(a.join("")):$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(a.join(""))),t.p.subGrid===!0)try{d.jqGrid("addSubGrid",b+v)}catch(ai){}if(t.p.totaltime=new Date-hi,y>0&&t.p.records===0&&(t.p.records=it),a=null,t.p.treeGrid===!0)try{d.jqGrid("setTreeNode",ft+1,y+ft+1)}catch(vi){}if(t.p.treeGrid||t.p.scroll||(t.grid.bDiv.scrollTop=0),t.p.reccount=y,t.p.treeANode=-1,t.p.userDataOnFooter&&d.jqGrid("footerData","set",t.p.userData,!0),ut&&(t.p.records=it,t.p.lastpage=Math.ceil(it/et)),u||t.updatepager(!1,!0),ut){while(y<it&&g[y]){if(o=g[y],e=$.jgrid.getAccessor(o,l),e===undefined&&(typeof l=="number"&&t.p.colModel[l+b+k+v]!=null&&(e=$.jgrid.getAccessor(o,t.p.colModel[l+b+k+v].name)),e===undefined&&(e=ti+y,ct.length===0&&s.cell&&(ht=$.jgrid.getAccessor(o,s.cell)||o,e=ht!=null&&ht[l]!==undefined?ht[l]:e,ht=null))),o){for(e=t.p.idPrefix+e,tt=vt,s.repeatitems&&(s.cell&&(o=$.jgrid.getAccessor(o,s.cell)||o),$.isArray(o)&&(tt=gt)),w=0;w<tt.length;w++)c[t.p.colModel[w+b+k+v].name]=$.jgrid.getAccessor(o,tt[w]);c[rt]=$.jgrid.stripPref(t.p.idPrefix,e);t.p.grouping&&kt.call(d,c,y);t.p.data.push(c);t.p._index[c[rt]]=t.p.data.length-1;c={}}y++}t.p.grouping&&(t.p.groupingView._locgr=!0,d.jqGrid("groupingRender",ot,t.p.colModel.length,t.p.page,et),ot=null)}},ki=function(){function it(t){var f=0,r,e,s,o,u;if(t.groups!=null){for(e=t.groups.length&&t.groupOp.toString().toUpperCase()==="OR",e&&n.orBegin(),r=0;r<t.groups.length;r++){f>0&&e&&n.or();try{it(t.groups[r])}catch(h){alert(h)}f++}e&&n.orEnd()}if(t.rules!=null)try{for(s=t.rules.length&&t.groupOp.toString().toUpperCase()==="OR",s&&n.orBegin(),r=0;r<t.rules.length;r++)u=t.rules[r],o=t.groupOp.toString().toUpperCase(),y[u.op]&&u.field&&(f>0&&o&&o==="OR"&&(n=n.or()),n=y[u.op](n,o)(u.field,u.data,i[u.field])),f++;s&&n.orEnd()}catch(c){alert(c)}}var r=t.p.multiSort?[]:"",nt=[],w=!1,i={},b=[],tt=[],l,c,a,v,k,u,y,n,e,s,rt,h,ut;if($.isArray(t.p.data)){if(v=t.p.grouping?t.p.groupingView:!1,$.each(t.p.colModel,function(){var n,f;if(c=this.sorttype||"text",c==="date"||c==="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,a=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):l=a=this.datefmt||"Y-m-d",i[this.name]={stype:c,srcfmt:l,newfmt:a,sfunc:this.sortfunc||null}):i[this.name]={stype:c,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},t.p.grouping)for(u=0,k=v.groupField.length;u<k;u++)this.name===v.groupField[u]&&(n=this.name,this.index&&(n=this.index),b[u]=i[n],tt[u]=n);t.p.multiSort?this.lso&&(r.push(this.name),f=this.lso.split("-"),nt.push(f[f.length-1])):w||this.index!==t.p.sortname&&this.name!==t.p.sortname||(r=this.name,w=!0)}),t.p.treeGrid){$(t).jqGrid("SortTree",r,t.p.sortorder,i[r].stype||"text",i[r].srcfmt||"");return}if(y={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},n=$.jgrid.from(t.p.data),t.p.ignoreCase&&(n=n.ignoreCase()),t.p.search===!0)if(e=t.p.postData.filters,e)typeof e=="string"&&(e=$.jgrid.parse(e)),it(e);else try{n=y[t.p.postData.searchOper](n)(t.p.postData.searchField,t.p.postData.searchString,i[t.p.postData.searchField])}catch(et){}if(t.p.grouping)for(u=0;u<k;u++)n.orderBy(tt[u],v.groupOrder[u],b[u].stype,b[u].srcfmt);t.p.multiSort?$.each(r,function(t){n.orderBy(this,nt[t],i[this].stype,i[this].srcfmt,i[this].sfunc)}):r&&t.p.sortorder&&w&&(t.p.sortorder.toUpperCase()==="DESC"?n.orderBy(t.p.sortname,"d",i[r].stype,i[r].srcfmt,i[r].sfunc):n.orderBy(t.p.sortname,"a",i[r].stype,i[r].srcfmt,i[r].sfunc));var f=n.select(),p=parseInt(t.p.rowNum,10),d=f.length,g=parseInt(t.p.page,10),ft=Math.ceil(d/p),o={};if((t.p.search||t.p.resetsearch)&&t.p.grouping&&t.p.groupingView._locgr){if(t.p.groupingView.groups=[],rt=$.jgrid.getMethod("groupingPrepare"),t.p.footerrow&&t.p.userDataOnFooter){for(h in t.p.userData)t.p.userData.hasOwnProperty(h)&&(t.p.userData[h]=0);ut=!0}for(s=0;s<d;s++){if(ut)for(h in t.p.userData)t.p.userData[h]+=parseFloat(f[s][h]||0);rt.call($(t),f[s],s,p)}}return f=f.slice((g-1)*p,g*p),n=null,i=null,o[t.p.localReader.total]=ft,o[t.p.localReader.page]=g,o[t.p.localReader.records]=d,o[t.p.localReader.root]=f,o[t.p.localReader.userdata]=t.p.userData,f=null,o}},di=function(n,i){var o,p,r,a,s,v,c,e="",b,u=t.p.pager?"_"+$.jgrid.jqID(t.p.pager.substr(1)):"",f=t.p.toppager?"_"+t.p.toppager.substr(1):"",y,l,w,k;r=parseInt(t.p.page,10)-1;r<0&&(r=0);r=r*parseInt(t.p.rowNum,10);s=r+t.p.reccount;t.p.scroll&&(y=$("tbody:first > tr:gt(0)",t.grid.bDiv),r=s-y.length,t.p.reccount=y.length,l=y.outerHeight()||t.grid.prevRowHeight,l&&(w=r*l,k=parseInt(t.p.records,10)*l,$(">div:first",t.grid.bDiv).css({height:k}).children("div:first").css({height:w,display:w?"":"none"}),t.grid.bDiv.scrollTop==0&&t.p.page>1&&(t.grid.bDiv.scrollTop=t.p.rowNum*(t.p.page-1)*l)),t.grid.bDiv.scrollLeft=t.grid.hDiv.scrollLeft);e=t.p.pager||"";e+=t.p.toppager?e?","+t.p.toppager:t.p.toppager:"";e&&(c=$.jgrid.formatter.integer||{},o=h(t.p.page),p=h(t.p.lastpage),$(".selbox",e)[this.p.useProp?"prop":"attr"]("disabled",!1),t.p.pginput===!0&&($(".ui-pg-input",e).val(t.p.page),b=t.p.toppager?"#sp_1"+u+",#sp_1"+f:"#sp_1"+u,$(b).html($.fmatter?$.fmatter.util.NumberFormat(t.p.lastpage,c):t.p.lastpage)),t.p.viewrecords&&(t.p.reccount===0?$(".ui-paging-info",e).html(t.p.emptyrecords):(a=r+1,v=t.p.records,$.fmatter&&(a=$.fmatter.util.NumberFormat(a,c),s=$.fmatter.util.NumberFormat(s,c),v=$.fmatter.util.NumberFormat(v,c)),$(".ui-paging-info",e).html($.jgrid.format(t.p.recordtext,a,s,v)))),t.p.pgbuttons===!0&&(o<=0&&(o=p=0),o===1||o===0?($("#first"+u+", #prev"+u).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+u+", #prev"+u).removeClass("ui-state-disabled"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).removeClass("ui-state-disabled")),o===p||o===0?($("#next"+u+", #last"+u).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+u+", #last"+u).removeClass("ui-state-disabled"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).removeClass("ui-state-disabled"))));n===!0&&t.p.rownumbers===!0&&$(">td.jqgrid-rownum",t.rows).each(function(n){$(this).html(r+1+n)});i&&t.p.jqgdnd&&$(t).jqGrid("gridDnD","updateDnD");$(t).triggerHandler("jqGridGridComplete");$.isFunction(t.p.gridComplete)&&t.p.gridComplete.call(t);$(t).triggerHandler("jqGridAfterGridComplete")},tt=function(){if(t.grid.hDiv.loading=!0,!t.p.hiddengrid)switch(t.p.loadui){case"enable":$("#load_"+$.jgrid.jqID(t.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(t.p.id)).show();$("#load_"+$.jgrid.jqID(t.p.id)).show()}},p=function(){t.grid.hDiv.loading=!1;switch(t.p.loadui){case"enable":$("#load_"+$.jgrid.jqID(t.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(t.p.id)).hide();$("#load_"+$.jgrid.jqID(t.p.id)).hide()}},y=function(n){var v,s,b,w,h,f,c;if(!t.grid.hDiv.loading){var k=t.p.scroll&&n===!1,r={},l,u,i=t.p.prmNames;t.p.page<=0&&(t.p.page=Math.min(1,t.p.lastpage));i.search!==null&&(r[i.search]=t.p.search);i.nd!==null&&(r[i.nd]=(new Date).getTime());i.rows!==null&&(r[i.rows]=t.p.rowNum);i.page!==null&&(r[i.page]=t.p.page);i.sort!==null&&(r[i.sort]=t.p.sortname);i.order!==null&&(r[i.order]=t.p.sortorder);t.p.rowTotal!==null&&i.totalrows!==null&&(r[i.totalrows]=t.p.rowTotal);var a=$.isFunction(t.p.loadComplete),e=a?t.p.loadComplete:null,o=0;if(n=n||1,n>1?i.npage!==null?(r[i.npage]=n,o=n-1,n=1):e=function(i){t.p.page++;t.grid.hDiv.loading=!1;a&&t.p.loadComplete.call(t,i);y(n-1)}:i.npage!==null&&delete t.p.postData[i.npage],t.p.grouping){for($(t).jqGrid("groupingSetup"),v=t.p.groupingView,b="",s=0;s<v.groupField.length;s++)w=v.groupField[s],$.each(t.p.colModel,function(n,t){t.name===w&&t.index&&(w=t.index)}),b+=w+" "+v.groupOrder[s]+", ";r[i.sort]=b+r[i.sort]}if($.extend(t.p.postData,r),h=t.p.scroll?t.rows.length-1:1,f=$(t).triggerHandler("jqGridBeforeRequest"),f===!1||f==="stop")return;if($.isFunction(t.p.datatype)){t.p.datatype.call(t,t.p.postData,"load_"+t.p.id,h,n,o);return}if($.isFunction(t.p.beforeRequest)&&(f=t.p.beforeRequest.call(t),f===undefined&&(f=!0),f===!1))return;l=t.p.datatype.toLowerCase();switch(l){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:t.p.url,type:t.p.mtype,dataType:l,data:$.isFunction(t.p.serializeGridData)?t.p.serializeGridData.call(t,t.p.postData):t.p.postData,success:function(i,r,u){if($.isFunction(t.p.beforeProcessing)&&t.p.beforeProcessing.call(t,i,r,u)===!1){p();return}l==="xml"?kt(i,t.grid.bDiv,h,n>1,o):st(i,t.grid.bDiv,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[i]);e&&e.call(t,i);$(t).triggerHandler("jqGridAfterLoadComplete",[i]);k&&t.grid.populateVisible();(t.p.loadonce||t.p.treeGrid)&&(t.p.datatype="local");i=null;n===1&&p()},error:function(i,r,u){$.isFunction(t.p.loadError)&&t.p.loadError.call(t,i,r,u);n===1&&p();i=null},beforeSend:function(n,i){var r=!0;if($.isFunction(t.p.loadBeforeSend)&&(r=t.p.loadBeforeSend.call(t,n,i)),r===undefined&&(r=!0),r===!1)return!1;tt()}},$.jgrid.ajaxOptions,t.p.ajaxGridOptions));break;case"xmlstring":tt();u=typeof t.p.datastr!="string"?t.p.datastr:$.parseXML(t.p.datastr);kt(u,t.grid.bDiv);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;p();break;case"jsonstring":tt();u=typeof t.p.datastr=="string"?$.jgrid.parse(t.p.datastr):t.p.datastr;st(u,t.grid.bDiv);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;p();break;case"local":case"clientside":tt();t.p.datatype="local";c=ki();st(c,t.grid.bDiv,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[c]);e&&e.call(t,c);$(t).triggerHandler("jqGridAfterLoadComplete",[c]);k&&t.grid.populateVisible();p()}}},ht=function(n){$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv)[t.p.useProp?"prop":"attr"]("checked",n);var i=t.p.frozenColumns?t.p.id+"_frozen":"";i&&$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.fhDiv)[t.p.useProp?"prop":"attr"]("checked",n)},oi=function(n,i){var v="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",f="",r="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",e="",u,p,w,b,s,k,c,a=function(n){var i;return($.isFunction(t.p.onPaging)&&(i=t.p.onPaging.call(t,n)),i==="stop")?!1:(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],ht(!1)),t.p.savedRow=[],!0)},l;if(n=n.substr(1),i+="_"+n,u="pg_"+n,p=n+"_left",w=n+"_center",b=n+"_right",$("#"+$.jgrid.jqID(n)).append("<div id='"+u+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+p+"' align='left'><\/td><td id='"+w+"' align='center' style='white-space:pre;'><\/td><td id='"+b+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),t.p.rowList.length>0){for(e="<td dir='"+o+"'>",e+="<select class='ui-pg-selbox' role='listbox'>",c=0;c<t.p.rowList.length;c++)e+='<option role="option" value="'+t.p.rowList[c]+'"'+(t.p.rowNum===t.p.rowList[c]?' selected="selected"':"")+">"+t.p.rowList[c]+"<\/option>";e+="<\/select><\/td>"}o==="rtl"&&(r+=e);t.p.pginput===!0&&(f="<td dir='"+o+"'>"+$.jgrid.format(t.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(n)+"'><\/span>")+"<\/td>");t.p.pgbuttons===!0?(l=["first"+i,"prev"+i,"next"+i,"last"+i],o==="rtl"&&l.reverse(),r+="<td id='"+l[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'><\/span><\/td>",r+="<td id='"+l[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'><\/span><\/td>",r+=f!==""?v+f+v:"",r+="<td id='"+l[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'><\/span><\/td>",r+="<td id='"+l[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'><\/span><\/td>"):f!==""&&(r+=f);o==="ltr"&&(r+=e);r+="<\/tr><\/tbody><\/table>";t.p.viewrecords===!0&&$("td#"+n+"_"+t.p.recordpos,"#"+u).append("<div dir='"+o+"' style='text-align:"+t.p.recordpos+"' class='ui-paging-info'><\/div>");$("td#"+n+"_"+t.p.pagerpos,"#"+u).append(r);k=$(".ui-jqgrid").css("font-size")||"11px";$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ><\/div>");s=$(r).clone().appendTo("#testpg").width();$("#testpg").remove();s>0&&(f!==""&&(s+=50),$("td#"+n+"_"+t.p.pagerpos,"#"+u).width(s));t.p._nvtd=[];t.p._nvtd[0]=s?Math.floor((t.p.width-s)/2):Math.floor(t.p.width/3);t.p._nvtd[1]=0;r=null;$(".ui-pg-selbox","#"+u).bind("change",function(){return a("records")?(t.p.page=Math.round(t.p.rowNum*(t.p.page-1)/this.value-.5)+1,t.p.rowNum=this.value,t.p.pager&&$(".ui-pg-selbox",t.p.pager).val(this.value),t.p.toppager&&$(".ui-pg-selbox",t.p.toppager).val(this.value),y(),!1):!1});t.p.pgbuttons===!0&&($(".ui-pg-button","#"+u).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(i)+", #prev"+$.jgrid.jqID(i)+", #next"+$.jgrid.jqID(i)+", #last"+$.jgrid.jqID(i)).click(function(){if($(this).hasClass("ui-state-disabled"))return!1;var n=h(t.p.page,1),r=h(t.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;return(r===0||r===1?(o=!1,s=!1,f=!1,e=!1):r>1&&n>=1?n===1?(o=!1,s=!1):n===r&&(f=!1,e=!1):r>1&&n===0&&(f=!1,e=!1,n=r-1),!a(this.id))?!1:(this.id==="first"+i&&o&&(t.p.page=1,u=!0),this.id==="prev"+i&&s&&(t.p.page=n-1,u=!0),this.id==="next"+i&&f&&(t.p.page=n+1,u=!0),this.id==="last"+i&&e&&(t.p.page=r,u=!0),u&&y(),!1)}));t.p.pginput===!0&&$("input.ui-pg-input","#"+u).keypress(function(n){var i=n.charCode||n.keyCode||0;return i===13?a("user")?($(this).val(h($(this).val(),1)),t.p.page=$(this).val()>0?$(this).val():t.p.page,y(),!1):!1:this})},gi=function(n,i){var e,u="",r=t.p.colModel,s=!1,h,f=t.p.frozenColumns?i:t.grid.headers[n].el,o="";$("span.ui-grid-ico-sort",f).addClass("ui-state-disabled");$(f).attr("aria-selected","false");r[n].lso?r[n].lso==="asc"?(r[n].lso+="-desc",o="desc"):r[n].lso==="desc"?(r[n].lso+="-asc",o="asc"):(r[n].lso==="asc-desc"||r[n].lso==="desc-asc")&&(r[n].lso=""):r[n].lso=o=r[n].firstsortorder||"asc";o?($("span.s-ico",f).show(),$("span.ui-icon-"+o,f).removeClass("ui-state-disabled"),$(f).attr("aria-selected","true")):t.p.viewsortcols[0]||$("span.s-ico",f).hide();t.p.sortorder="";$.each(r,function(n){this.lso&&(n>0&&s&&(u+=", "),e=this.lso.split("-"),u+=r[n].index||r[n].name,u+=" "+e[e.length-1],s=!0,t.p.sortorder=e[e.length-1])});h=u.lastIndexOf(t.p.sortorder);u=u.substring(0,h);t.p.sortname=u},si=function(n,i,r,u,f){var e,o,s;if(t.p.colModel[i].sortable&&!(t.p.savedRow.length>0)){if(r||(t.p.lastsort===i?t.p.sortorder==="asc"?t.p.sortorder="desc":t.p.sortorder==="desc"&&(t.p.sortorder="asc"):t.p.sortorder=t.p.colModel[i].firstsortorder||"asc",t.p.page=1),t.p.multiSort)gi(i,f);else{if(u){if(t.p.lastsort===i&&t.p.sortorder===u&&!r)return;t.p.sortorder=u}e=t.grid.headers[t.p.lastsort].el;o=t.p.frozenColumns?f:t.grid.headers[i].el;$("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");$(e).attr("aria-selected","false");t.p.frozenColumns&&(t.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),t.grid.fhDiv.find("th").attr("aria-selected","false"));$("span.ui-icon-"+t.p.sortorder,o).removeClass("ui-state-disabled");$(o).attr("aria-selected","true");t.p.viewsortcols[0]||t.p.lastsort!==i&&(t.p.frozenColumns&&t.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",e).hide(),$("span.s-ico",o).show());n=n.substring(5+t.p.id.length+1);t.p.sortname=t.p.colModel[i].index||n}if($(t).triggerHandler("jqGridSortCol",[t.p.sortname,i,t.p.sortorder])==="stop"){t.p.lastsort=i;return}if($.isFunction(t.p.onSortCol)&&t.p.onSortCol.call(t,t.p.sortname,i,t.p.sortorder)==="stop"){t.p.lastsort=i;return}t.p.datatype==="local"?t.p.deselectAfterSort&&$(t).jqGrid("resetSelection"):(t.p.selrow=null,t.p.multiselect&&ht(!1),t.p.selarrrow=[],t.p.savedRow=[]);t.p.scroll&&(s=t.grid.bDiv.scrollLeft,nt.call(t,!0,!1),t.grid.hDiv.scrollLeft=s);t.p.subGrid&&t.p.datatype==="local"&&$("td.sgexpanded","#"+$.jgrid.jqID(t.p.id)).each(function(){$(this).trigger("click")});y();t.p.lastsort=i;t.p.sortname!==n&&i&&(t.p.lastsort=i)}},nr=function(){var n=0,r=$.jgrid.cell_width?0:h(t.p.cellLayout,0),u=0,c,s=h(t.p.scrollOffset,0),e,l=!1,a,f=0,o;$.each(t.p.colModel,function(){if(this.hidden===undefined&&(this.hidden=!1),t.p.grouping&&t.p.autowidth){var i=$.inArray(this.name,t.p.groupingView.groupField);i>=0&&t.p.groupingView.groupColumnShow.length>i&&(this.hidden=!t.p.groupingView.groupColumnShow[i])}this.widthOrg=e=h(this.width,0);this.hidden===!1&&(n+=e+r,this.fixed?f+=e+r:u++)});isNaN(t.p.width)&&(t.p.width=n+(t.p.shrinkToFit===!1&&!isNaN(t.p.height)?s:0));i.width=t.p.width;t.p.tblwidth=n;t.p.shrinkToFit===!1&&t.p.forceFit===!0&&(t.p.forceFit=!1);t.p.shrinkToFit===!0&&u>0&&(a=i.width-r*u-f,isNaN(t.p.height)||(a-=s,l=!0),n=0,$.each(t.p.colModel,function(i){this.hidden!==!1||this.fixed||(e=Math.round(a*this.width/(t.p.tblwidth-r*u-f)),this.width=e,n+=e,c=i)}),o=0,l?i.width-f-(n+r*u)!==s&&(o=i.width-f-(n+r*u)-s):l||Math.abs(i.width-f-(n+r*u))===1||(o=i.width-f-(n+r*u)),t.p.colModel[c].width+=o,t.p.tblwidth=n+o+r*u+f,t.p.tblwidth>t.p.width&&(t.p.colModel[c].width-=t.p.tblwidth-parseInt(t.p.width,10),t.p.tblwidth=t.p.width))},tr=function(n){for(var u=n,r=n,i=n+1;i<t.p.colModel.length;i++)if(t.p.colModel[i].hidden!==!0){r=i;break}return r-u},ir=function(n){var r=$(t.grid.headers[n].el),i=[r.position().left+r.outerWidth()];return t.p.direction==="rtl"&&(i[0]=t.p.width-i[0]),i[0]-=t.grid.bDiv.scrollLeft,i.push($(t.grid.hDiv).position().top),i.push($(t.grid.bDiv).offset().top-$(t.grid.hDiv).offset().top+$(t.grid.bDiv).height()),i},hi=function(n){for(var r=t.grid.headers,u=$.jgrid.getCellIndex(n),i=0;i<r.length;i++)if(n===r[i].el){u=i;break}return u};for(this.p.id=this.id,$.inArray(t.p.multikey,["shiftKey","altKey","ctrlKey"])===-1&&(t.p.multikey=!1),t.p.keyIndex=!1,t.p.keyName=!1,u=0;u<t.p.colModel.length;u++)t.p.colModel[u]=$.extend(!0,{},t.p.cmTemplate,t.p.colModel[u].template||{},t.p.colModel[u]),t.p.keyIndex===!1&&t.p.colModel[u].key===!0&&(t.p.keyIndex=u);if(t.p.sortorder=t.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),t.p.grouping===!0&&(t.p.scroll=!1,t.p.rownumbers=!1,t.p.treeGrid=!1,t.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(rr){}t.p.datatype!=="local"&&(t.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(t).jqGrid("setSubGrid")}catch(ur){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?t.p.multiselectWidth+t.p.cellLayout:t.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:t.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));t.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},t.p.xmlReader);t.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.jsonReader);t.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.localReader);t.p.scroll&&(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);t.p.data.length&&wt();var a="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",ci,dt,ct,it,lt,s,f,li,at,ai="",vi="",rt=[],yi=[],w=[];if(t.p.shrinkToFit===!0&&t.p.forceFit===!0)for(u=t.p.colModel.length-1;u>=0;u--)if(!t.p.colModel[u].hidden){t.p.colModel[u].resizable=!1;break}if(t.p.viewsortcols[1]==="horizontal"&&(ai=" ui-i-asc",vi=" ui-i-desc"),ci=ot?"class='ui-th-div-ie'":"",at="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+ai+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+o+"'><\/span>",at+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+vi+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+o+"'><\/span><\/span>",t.p.multiSort)for(rt=t.p.sortname.split(","),u=0;u<rt.length;u++)w=$.trim(rt[u]).split(" "),rt[u]=$.trim(w[0]),yi[u]=w[1]?$.trim(w[1]):t.p.sortorder||"asc";for(u=0;u<this.p.colNames.length;u++)pi=t.p.headertitles?' title="'+$.jgrid.stripHtml(t.p.colNames[u])+'"':"",a+="<th id='"+t.p.id+"_"+t.p.colModel[u].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+o+"'"+pi+">",dt=t.p.colModel[u].index||t.p.colModel[u].name,a+="<div id='jqgh_"+t.p.id+"_"+t.p.colModel[u].name+"' "+ci+">"+t.p.colNames[u],t.p.colModel[u].width=t.p.colModel[u].width?parseInt(t.p.colModel[u].width,10):150,typeof t.p.colModel[u].title!="boolean"&&(t.p.colModel[u].title=!0),t.p.colModel[u].lso="",dt===t.p.sortname&&(t.p.lastsort=u),t.p.multiSort&&(w=$.inArray(dt,rt),w!==-1&&(t.p.colModel[u].lso=yi[w])),a+=at+"<\/div><\/th>";if(a+="<\/tr><\/thead>",at=null,$(this).append(a),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect&&(ut=[],$("#cb_"+$.jgrid.jqID(t.p.id),this).bind("click",function(){t.p.selarrrow=[];var n=t.p.frozenColumns===!0?t.p.id+"_frozen":"";this.checked?($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),t.p.selarrrow.push(this.id),t.p.selrow=this.id,n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).addClass("ui-state-highlight"))))}),k=!0,ut=[]):($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),ut.push(this.id),n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).removeClass("ui-state-highlight"))))}),t.p.selrow=null,k=!1);$(t).triggerHandler("jqGridSelectAll",[k?t.p.selarrrow:ut,k]);$.isFunction(t.p.onSelectAll)&&t.p.onSelectAll.call(t,k?t.p.selarrrow:ut,k)})),t.p.autowidth===!0&&(gt=$(b).innerWidth(),t.p.width=gt>0?gt:"nw"),nr(),$(b).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+t.p.id+"'>&#160;<\/div>"),$(v).css("width",i.width+"px"),a=$("thead:first",t).get(0),ft="",t.p.footerrow&&(ft+="<table role='grid' style='width:"+t.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+o+"'>"),ni=$("tr:first",a),et="<tr class='jqgfirstrow' role='row' style='height:auto'>",t.p.disableClick=!1,$("th",ni).each(function(n){var u,r;ct=t.p.colModel[n].width;t.p.colModel[n].resizable===undefined&&(t.p.colModel[n].resizable=!0);t.p.colModel[n].resizable?(it=document.createElement("span"),$(it).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+o).css("cursor","col-resize"),$(this).addClass(t.p.resizeclass)):it="";$(this).css("width",ct+"px").prepend(it);it=null;u="";t.p.colModel[n].hidden&&($(this).css("display","none"),u="display:none;");et+="<td role='gridcell' style='height:0px;width:"+ct+"px;"+u+"'><\/td>";i.headers[n]={width:ct,el:this};lt=t.p.colModel[n].sortable;typeof lt!="boolean"&&(t.p.colModel[n].sortable=!0,lt=!0);r=t.p.colModel[n].name;r==="cb"||r==="subgrid"||r==="rn"||t.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable");lt&&(t.p.multiSort?t.p.viewsortcols[0]?($("div span.s-ico",this).show(),t.p.colModel[n].lso&&$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass("ui-state-disabled")):t.p.colModel[n].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass("ui-state-disabled")):t.p.viewsortcols[0]?($("div span.s-ico",this).show(),n===t.p.lastsort&&$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")):n===t.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")));t.p.footerrow&&(ft+="<td role='gridcell' "+g(n,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(n){if($(n.target).closest("th>span.ui-jqgrid-resize").length===1){var r=hi(this);return t.p.forceFit===!0&&(t.p.nv=tr(r)),i.dragStart(r,n,ir(r)),!1}}).click(function(n){var r,f,e,u,i,o;return t.p.disableClick?(t.p.disableClick=!1,!1):(r="th>div.ui-jqgrid-sortable",t.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort"),u=$(n.target).closest(r),u.length!==1)?void 0:(t.p.frozenColumns?(o=$(this)[0].id.substring(t.p.id.length+1),$(t.p.colModel).each(function(n){if(this.name===o)return i=n,!1})):i=hi(this),t.p.viewsortcols[2]||(f=!0,e=u.attr("sort")),i!=null&&si($("div",this)[0].id,i,f,e,this),!1)}),t.p.sortable&&$.fn.sortable)try{$(t).jqGrid("sortableColumns",ni)}catch(fr){}t.p.footerrow&&(ft+="<\/tr><\/tbody><\/table>");et+="<\/tr>";li=document.createElement("tbody");this.appendChild(li);$(this).addClass("ui-jqgrid-btable").append(et);et=null;var wi=$("<table class='ui-jqgrid-htable' style='width:"+t.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(a),c=t.p.caption&&t.p.hiddengrid===!0?!0:!1,d=$("<div class='ui-jqgrid-hbox"+(o==="rtl"?"-rtl":"")+"'><\/div>");a=null;i.hDiv=document.createElement("div");$(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(d);$(d).append(wi);wi=null;c&&$(i.hDiv).hide();t.p.pager&&(typeof t.p.pager=="string"?t.p.pager.substr(0,1)!=="#"&&(t.p.pager="#"+t.p.pager):t.p.pager="#"+$(t.p.pager).attr("id"),$(t.p.pager).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(b),c&&$(t.p.pager).hide(),oi(t.p.pager,""));t.p.cellEdit===!1&&t.p.hoverrows===!0&&$(t).bind("mouseover",function(n){f=$(n.target).closest("tr.jqgrow");$(f).attr("class")!=="ui-subgrid"&&$(f).addClass("ui-state-hover")}).bind("mouseout",function(n){f=$(n.target).closest("tr.jqgrow");$(f).removeClass("ui-state-hover")});$(t).before(i.hDiv).click(function(n){var i,r,u;if(s=n.target,f=$(s,t.rows).closest("tr.jqgrow"),$(f).length===0||f[0].className.indexOf("ui-state-disabled")>-1||($(s,t).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==t.id)return this;if((i=$(s).hasClass("cbox"),r=$(t).triggerHandler("jqGridBeforeSelectRow",[f[0].id,n]),r=r===!1||r==="stop"?!1:!0,r&&$.isFunction(t.p.beforeSelectRow)&&(r=t.p.beforeSelectRow.call(t,f[0].id,n)),s.tagName!=="A"&&(s.tagName!=="INPUT"&&s.tagName!=="TEXTAREA"&&s.tagName!=="OPTION"&&s.tagName!=="SELECT"||i))&&r===!0)if(e=f[0].id,l=$.jgrid.getCellIndex(s),ti=$(s).closest("td,th").html(),$(t).triggerHandler("jqGridCellSelect",[e,l,ti,n]),$.isFunction(t.p.onCellSelect)&&t.p.onCellSelect.call(t,e,l,ti,n),t.p.cellEdit===!0)if(t.p.multiselect&&i)$(t).jqGrid("setSelection",e,!0,n);else{e=f[0].rowIndex;try{$(t).jqGrid("editCell",e,l,!0)}catch(o){}}else t.p.multikey?n[t.p.multikey]?$(t).jqGrid("setSelection",e,!0,n):t.p.multiselect&&i&&(i=$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+e).is(":checked"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+e)[t.p.useProp?"prop":"attr"]("checked",i)):t.p.multiselect&&t.p.multiboxonly?i?$(t).jqGrid("setSelection",e,!0,n):(u=t.p.frozenColumns?t.p.id+"_frozen":"",$(t.p.selarrrow).each(function(n,i){var r=$(t).jqGrid("getGridRowById",i);$(r).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1);u&&($("#"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.p.selarrrow=[],$(t).jqGrid("setSelection",e,!0,n)):$(t).jqGrid("setSelection",e,!0,n)}).bind("reloadGrid",function(n,i){if(t.p.treeGrid===!0&&(t.p.datatype=t.p.treedatatype),i&&i.current&&t.grid.selectionPreserver(t),t.p.datatype==="local"?($(t).jqGrid("resetSelection"),t.p.data.length&&wt()):t.p.treeGrid||(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],ht(!1)),t.p.savedRow=[]),t.p.scroll&&nt.call(t,!0,!1),i&&i.page){var r=i.page;r>t.p.lastpage&&(r=t.p.lastpage);r<1&&(r=1);t.p.page=r;t.grid.bDiv.scrollTop=t.grid.prevRowHeight?(r-1)*t.grid.prevRowHeight*t.p.rowNum:0}return t.grid.prevRowHeight&&t.p.scroll?(delete t.p.lastpage,t.grid.populateVisible()):t.grid.populate(),t.p._inlinenav===!0&&$(t).jqGrid("showAddEditButtons"),!1}).dblclick(function(n){(s=n.target,f=$(s,t.rows).closest("tr.jqgrow"),$(f).length!==0)&&(e=f[0].rowIndex,l=$.jgrid.getCellIndex(s),$(t).triggerHandler("jqGridDblClickRow",[$(f).attr("id"),e,l,n]),$.isFunction(t.p.ondblClickRow)&&t.p.ondblClickRow.call(t,$(f).attr("id"),e,l,n))}).bind("contextmenu",function(n){(s=n.target,f=$(s,t.rows).closest("tr.jqgrow"),$(f).length!==0)&&(t.p.multiselect||$(t).jqGrid("setSelection",f[0].id,!0,n),e=f[0].rowIndex,l=$.jgrid.getCellIndex(s),$(t).triggerHandler("jqGridRightClickRow",[$(f).attr("id"),e,l,n]),$.isFunction(t.p.onRightClickRow)&&t.p.onRightClickRow.call(t,$(f).attr("id"),e,l,n))});i.bDiv=document.createElement("div");ot&&String(t.p.height).toLowerCase()==="auto"&&(t.p.height="100%");$(i.bDiv).append($('<div style="position:relative;'+(ot&&$.jgrid.msiever()<8?"height:0.01%;":"")+'"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:t.p.height+(isNaN(t.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);$("table:first",i.bDiv).css({width:t.p.tblwidth+"px"});$.support.tbody||$("tbody",this).length===2&&$("tbody:gt(0)",this).remove();t.p.multikey&&($.jgrid.msie?$(i.bDiv).bind("selectstart",function(){return!1}):$(i.bDiv).bind("mousedown",function(){return!1}));c&&$(i.bDiv).hide();i.cDiv=document.createElement("div");vt=t.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' />").hover(function(){vt.addClass("ui-state-hover")},function(){vt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(o==="rtl"?"left":"right","0px"):"";$(i.cDiv).append(vt).append("<span class='ui-jqgrid-title'>"+t.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(o==="rtl"?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");$(i.cDiv).insertBefore(i.hDiv);t.p.toolbar[0]&&(i.uDiv=document.createElement("div"),t.p.toolbar[1]==="top"?$(i.uDiv).insertBefore(i.hDiv):t.p.toolbar[1]==="bottom"&&$(i.uDiv).insertAfter(i.hDiv),t.p.toolbar[1]==="both"?(i.ubDiv=document.createElement("div"),$(i.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(i.hDiv),$(i.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(i.hDiv),c&&$(i.ubDiv).hide()):$(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),c&&$(i.uDiv).hide());t.p.toppager&&(t.p.toppager=$.jgrid.jqID(t.p.id)+"_toppager",i.topDiv=$("<div id='"+t.p.toppager+"'><\/div>")[0],t.p.toppager="#"+t.p.toppager,$(i.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width).insertBefore(i.hDiv),oi(t.p.toppager,"_t"));t.p.footerrow&&(i.sDiv=$("<div class='ui-jqgrid-sdiv'><\/div>")[0],d=$("<div class='ui-jqgrid-hbox"+(o==="rtl"?"-rtl":"")+"'><\/div>"),$(i.sDiv).append(d).width(i.width).insertAfter(i.hDiv),$(d).append(ft),i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,t.p.rownumbers&&(i.footers[0].className="ui-state-default jqgrid-rownum"),c&&$(i.sDiv).hide());d=null;t.p.caption?(bi=t.p.datatype,t.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",i.cDiv).click(function(n){var f=$.isFunction(t.p.onHeaderClick),r=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",u,e=this;return t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&(r+=", #"+$(i.ubDiv).attr("id")),r+=", #"+$(i.uDiv).attr("id")),u=$(r,"#gview_"+$.jgrid.jqID(t.p.id)).length,t.p.gridstate==="visible"?$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),t.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).hide(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(c||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}):t.p.gridstate==="hidden"&&$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),c&&(t.p.datatype=bi,y(),c=!1),t.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).show(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(c||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}),!1}),c&&(t.p.datatype="local",$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")))):$(i.cDiv).hide();$(i.hDiv).after(i.bDiv).mousemove(function(n){if(i.resizing)return i.dragMove(n),!1});$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return!1});$(document).bind("mouseup.jqGrid"+t.p.id,function(){return i.resizing?(i.dragEnd(),!1):!0});t.formatCol=g;t.sortData=si;t.updatepager=di;t.refreshIndex=wt;t.setHeadCheckBox=ht;t.constructTr=bt;t.formatter=function(n,t,i,r,u){return ri(n,t,i,r,u)};$.extend(i,{populate:y,emptyRows:nt,beginReq:tt,endReq:p});this.grid=i;t.addXmlData=function(n){kt(n,t.grid.bDiv)};t.addJSONData=function(n){st(n,t.grid.bDiv)};this.grid.cols=this.rows[0].cells;$(t).triggerHandler("jqGridInitGrid");$.isFunction(t.p.onInitGrid)&&t.p.onInitGrid.call(t);y();t.p.hiddengrid=!1}})};$.jgrid.extend({getGridParam:function(n){var t=this[0];if(t&&t.grid)return n?t.p[n]!==undefined?t.p[n]:null:t.p},setGridParam:function(n){return this.each(function(){this.grid&&typeof n=="object"&&$.extend(!0,this.p,n)})},getGridRowById:function(n){var t;return this.each(function(){try{for(var i=this.rows.length;i--;)if(n.toString()===this.rows[i].id){t=this.rows[i];break}}catch(r){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(n))}}),t},getDataIDs:function(){var i=[],n=0,t,r=0;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)$(this.rows[n]).hasClass("jqgrow")&&(i[r]=this.rows[n].id,r++),n++}),i},setSelection:function(n,t,i){return this.each(function(){function c(n){var u=$(r.grid.bDiv)[0].clientHeight,t=$(r.grid.bDiv)[0].scrollTop,i=$(r.rows[n]).position().top,f=r.rows[n].clientHeight;i+f>=u+t?$(r.grid.bDiv)[0].scrollTop=i-(u+t)+f+t:i<u+t&&i<t&&($(r.grid.bDiv)[0].scrollTop=i)}var r=this,f,u,s,o,h,e;n!==undefined&&((t=t===!1?!1:!0,u=$(r).jqGrid("getGridRowById",n),!u||!u.className||u.className.indexOf("ui-state-disabled")>-1)||(r.p.scrollrows===!0&&(s=$(r).jqGrid("getGridRowById",n).rowIndex,s>=0&&c(s)),r.p.frozenColumns===!0&&(e=r.p.id+"_frozen"),r.p.multiselect?(r.setHeadCheckBox(!1),r.p.selrow=u.id,o=$.inArray(r.p.selrow,r.p.selarrrow),o===-1?(u.className!=="ui-subgrid"&&$(u).addClass("ui-state-highlight").attr("aria-selected","true"),f=!0,r.p.selarrrow.push(r.p.selrow)):(u.className!=="ui-subgrid"&&$(u).removeClass("ui-state-highlight").attr("aria-selected","false"),f=!1,r.p.selarrrow.splice(o,1),h=r.p.selarrrow[0],r.p.selrow=h===undefined?null:h),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(u.id))[r.p.useProp?"prop":"attr"]("checked",f),e&&(o===-1?$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e))[r.p.useProp?"prop":"attr"]("checked",f)),t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i))):u.className!=="ui-subgrid"&&(r.p.selrow!==u.id?($($(r).jqGrid("getGridRowById",r.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(u).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),e&&($("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(e)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass("ui-state-highlight")),f=!0):f=!1,r.p.selrow=u.id,t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i)))))})},resetSelection:function(n){return this.each(function(){var t=this,r,i;t.p.frozenColumns===!0&&(i=t.p.id+"_frozen");n!==undefined?(r=n===t.p.selrow?t.p.selrow:n,$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.multiselect&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1),t.setHeadCheckBox(!1)),r=null):t.p.multiselect?($(t.p.selarrrow).each(function(n,r){$($(t).jqGrid("getGridRowById",r)).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",!1);i&&($("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.setHeadCheckBox(!1),t.p.selarrrow=[],t.p.selrow=null):t.p.selrow&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.selrow=null);t.p.cellEdit===!0&&parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&($("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover"));t.p.savedRow=[]})},getRowData:function(n){var t={},i,r=!1,u,f=0;return this.each(function(){var e=this,o,s;if(n===undefined)r=!0,i=[],u=e.rows.length;else{if(s=$(e).jqGrid("getGridRowById",n),!s)return t;u=2}while(f<u)r&&(s=e.rows[f]),$(s).hasClass("jqgrow")&&($('td[role="gridcell"]',s).each(function(n){if(o=e.p.colModel[n].name,o!=="cb"&&o!=="subgrid"&&o!=="rn")if(e.p.treeGrid===!0&&o===e.p.ExpandColumn)t[o]=$.jgrid.htmlDecode($("span:first",this).html());else try{t[o]=$.unformat.call(e,this,{rowId:s.id,colModel:e.p.colModel[n]},n)}catch(i){t[o]=$.jgrid.htmlDecode($(this).html())}}),r&&(i.push(t),t={})),f++}),i||t},delRowData:function(n){var t=!1,i,r;return this.each(function(){var u=this,o,f,e;if(i=$(u).jqGrid("getGridRowById",n),!i)return!1;$(i).remove();u.p.records--;u.p.reccount--;u.updatepager(!0,!1);t=!0;u.p.multiselect&&(r=$.inArray(n,u.p.selarrrow),r!==-1&&u.p.selarrrow.splice(r,1));u.p.selrow=u.p.multiselect&&u.p.selarrrow.length>0?u.p.selarrrow[u.p.selarrrow.length-1]:null;u.p.datatype==="local"&&(o=$.jgrid.stripPref(u.p.idPrefix,n),f=u.p._index[o],f!==undefined&&(u.p.data.splice(f,1),u.refreshIndex()));u.p.altRows===!0&&t&&(e=u.p.altclass,$(u.rows).each(function(n){n%2==1?$(this).addClass(e):$(this).removeClass(e)}))}),t},setRowData:function(n,t,i){var r,u=!0,f;return this.each(function(){var v,c,l;if(!this.grid)return!1;var e=this,s,o,a=typeof i,h={};if(o=$(this).jqGrid("getGridRowById",n),!o)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name;var u=$.jgrid.getAccessor(t,r);u!==undefined&&(h[r]=this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?$.unformat.date.call(e,u,this):u,s=e.formatter(n,u,i,t,"edit"),f=this.title?{title:$.jgrid.stripHtml(s)}:{},e.p.treeGrid===!0&&r===e.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",o).html(s).attr(f):$("td[role='gridcell']:eq("+i+")",o).html(s).attr(f))}),e.p.datatype==="local"){if(v=$.jgrid.stripPref(e.p.idPrefix,n),c=e.p._index[v],e.p.treeGrid)for(l in e.p.treeReader)e.p.treeReader.hasOwnProperty(l)&&delete h[e.p.treeReader[l]];c!==undefined&&(e.p.data[c]=$.extend(!0,e.p.data[c],h));h=null}}catch(y){u=!1}u&&(a==="string"?$(o).addClass(i):i!==null&&a==="object"&&$(o).css(i),$(e).triggerHandler("jqGridAfterGridComplete"))}),u},addRowData:function(n,t,i,r){i||(i="last");var k=!1,p,u,s,w,o,f,h,l,c="",a,v,y,e,d,b;return t&&($.isArray(t)?(a=!0,i="last",v=n):(t=[t],a=!1),this.each(function(){var g=this,rt=t.length;o=g.p.rownumbers===!0?1:0;s=g.p.multiselect===!0?1:0;w=g.p.subGrid===!0?1:0;a||(n!==undefined?n=String(n):(n=$.jgrid.randId(),g.p.keyIndex!==!1&&(v=g.p.colModel[g.p.keyIndex+s+w+o].name,t[0][v]!==undefined&&(n=t[0][v]))));y=g.p.altclass;for(var tt=0,it="",nt={},ut=$.isFunction(g.p.afterInsertRow)?!0:!1;tt<rt;){if(e=t[tt],u=[],a){try{n=e[v];n===undefined&&(n=$.jgrid.randId())}catch(ft){n=$.jgrid.randId()}it=g.p.altRows===!0?(g.rows.length-1)%2==0?y:"":""}for(b=n,n=g.p.idPrefix+n,o&&(c=g.formatCol(0,1,"",null,n,!0),u[u.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+c+">0<\/td>"),s&&(l='<input role="checkbox" type="checkbox" id="jqg_'+g.p.id+"_"+n+'" class="cbox"/>',c=g.formatCol(o,1,"",null,n,!0),u[u.length]='<td role="gridcell" '+c+">"+l+"<\/td>"),w&&(u[u.length]=$(g).jqGrid("addSubGridCell",s+o,1)),h=s+w+o;h<g.p.colModel.length;h++)d=g.p.colModel[h],p=d.name,nt[p]=e[p],l=g.formatter(n,$.jgrid.getAccessor(e,p),h,e),c=g.formatCol(h,1,l,e,n,nt),u[u.length]='<td role="gridcell" '+c+">"+l+"<\/td>";if(u.unshift(g.constructTr(n,!1,it,nt,e,!1)),u[u.length]="<\/tr>",g.rows.length===0)$("table:first",g.grid.bDiv).append(u.join(""));else switch(i){case"last":$(g.rows[g.rows.length-1]).after(u.join(""));f=g.rows.length-1;break;case"first":$(g.rows[0]).after(u.join(""));f=1;break;case"after":f=$(g).jqGrid("getGridRowById",r);f&&($(g.rows[f.rowIndex+1]).hasClass("ui-subgrid")?$(g.rows[f.rowIndex+1]).after(u):$(f).after(u.join("")),f=f.rowIndex+1);break;case"before":f=$(g).jqGrid("getGridRowById",r);f&&($(f).before(u.join("")),f=f.rowIndex-1)}g.p.subGrid===!0&&$(g).jqGrid("addSubGrid",s+o,f);g.p.records++;g.p.reccount++;$(g).triggerHandler("jqGridAfterInsertRow",[n,e,e]);ut&&g.p.afterInsertRow.call(g,n,e,e);tt++;g.p.datatype==="local"&&(nt[g.p.localReader.id]=b,g.p._index[b]=g.p.data.length,g.p.data.push(nt),nt={})}g.p.altRows!==!0||a||(i==="last"?(g.rows.length-1)%2==1&&$(g.rows[g.rows.length-1]).addClass(y):$(g.rows).each(function(n){n%2==1?$(this).addClass(y):$(this).removeClass(y)}));g.updatepager(!0,!0);k=!0})),k},footerData:function(n,t,i){function o(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var r,u=!1,f={},e;return n==undefined&&(n="get"),typeof i!="boolean"&&(i=!0),n=n.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||n==="set"&&o(t))return!1;u=!0;$(this.p.colModel).each(function(o){r=this.name;n==="set"?t[r]!==undefined&&(h=i?s.formatter("",t[r],o,t,"edit"):t[r],e=this.title?{title:$.jgrid.stripHtml(h)}:{},$("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr(e),u=!0):n==="get"&&(f[r]=$("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),n==="get"?f:u},showHideCol:function(n,t){return this.each(function(){var i=this,e=!1,o=$.jgrid.cell_width?0:i.p.cellLayout,u,r,f;i.grid&&(typeof n=="string"&&(n=[n]),t=t!=="none"?"":"none",r=t===""?!0:!1,f=i.p.groupHeader&&(typeof i.p.groupHeader=="object"||$.isFunction(i.p.groupHeader)),f&&$(i).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(f){if($.inArray(this.name,n)!==-1&&this.hidden===r){if(i.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=rowheader]",i.grid.hDiv).each(function(){$(this.cells[f]).css("display",t)});$(i.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[f]).css("display",t)});i.p.footerrow&&$("tr.footrow td:eq("+f+")",i.grid.sDiv).css("display",t);u=parseInt(this.width,10);t==="none"?i.p.tblwidth-=u+o:i.p.tblwidth+=u+o;this.hidden=!r;e=!0;$(i).triggerHandler("jqGridShowHideCol",[r,this.name,f])}}),e===!0&&(i.p.shrinkToFit!==!0||isNaN(i.p.height)||(i.p.tblwidth+=parseInt(i.p.scrollOffset,10)),$(i).jqGrid("setGridWidth",i.p.shrinkToFit===!0?i.p.tblwidth:i.p.width)),f&&$(i).jqGrid("setGroupHeaders",i.p.groupHeader))})},hideCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"none")})},showCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"")})},remapColumns:function(n,t,i){function u(t){var i;i=t.length?$.makeArray(t):$.extend({},t);$.each(n,function(n){t[n]=i[this]})}function f(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(n,function(){var n=i[this];n&&t.appendChild(n)})})}var r=this.get(0);u(r.p.colModel);u(r.p.colNames);u(r.grid.headers);f($("thead:first",r.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&f($("#"+$.jgrid.jqID(r.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");r.p.footerrow&&f($("tbody:first",r.grid.sDiv));r.p.remapColumns&&(r.p.remapColumns.length?u(r.p.remapColumns):r.p.remapColumns=$.makeArray(n));r.p.lastsort=$.inArray(r.p.lastsort,n);r.p.treeGrid&&(r.p.expColInd=$.inArray(r.p.expColInd,n));$(r).triggerHandler("jqGridRemapColumns",[n,t,i])},setGridWidth:function(n,t){return this.each(function(){var a,y;if(this.grid){var i=this,r,f=0,e=$.jgrid.cell_width?0:i.p.cellLayout,u,o=0,v=!1,c=i.p.scrollOffset,l,s=0,h;if(typeof t!="boolean"&&(t=i.p.shrinkToFit),!isNaN(n)){if(n=parseInt(n,10),i.grid.width=i.p.width=n,$("#gbox_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$("#gview_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$(i.grid.bDiv).css("width",n+"px"),$(i.grid.hDiv).css("width",n+"px"),i.p.pager&&$(i.p.pager).css("width",n+"px"),i.p.toppager&&$(i.p.toppager).css("width",n+"px"),i.p.toolbar[0]===!0&&($(i.grid.uDiv).css("width",n+"px"),i.p.toolbar[1]==="both"&&$(i.grid.ubDiv).css("width",n+"px")),i.p.footerrow&&$(i.grid.sDiv).css("width",n+"px"),t===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),t===!0){if($.each(i.p.colModel,function(){this.hidden===!1&&(r=this.widthOrg,f+=r+e,this.fixed?s+=r+e:o++)}),o===0)return;if(i.p.tblwidth=f,l=n-e*o-s,isNaN(i.p.height)||($(i.grid.bDiv)[0].clientHeight<$(i.grid.bDiv)[0].scrollHeight||i.rows.length===1)&&(v=!0,l-=c),f=0,a=i.grid.cols.length>0,$.each(i.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(r=this.widthOrg,r=Math.round(l*r/(i.p.tblwidth-e*o-s)),r<0)return;this.width=r;f+=r;i.grid.headers[n].width=r;i.grid.headers[n].el.style.width=r+"px";i.p.footerrow&&(i.grid.footers[n].style.width=r+"px");a&&(i.grid.cols[n].style.width=r+"px");u=n}}),!u)return;h=0;v?n-s-(f+e*o)!==c&&(h=n-s-(f+e*o)-c):Math.abs(n-s-(f+e*o))!==1&&(h=n-s-(f+e*o));i.p.colModel[u].width+=h;i.p.tblwidth=f+h+e*o+s;i.p.tblwidth>n?(y=i.p.tblwidth-parseInt(n,10),i.p.tblwidth=n,r=i.p.colModel[u].width=i.p.colModel[u].width-y):r=i.p.colModel[u].width;i.grid.headers[u].width=r;i.grid.headers[u].el.style.width=r+"px";a&&(i.grid.cols[u].style.width=r+"px");i.p.footerrow&&(i.grid.footers[u].style.width=r+"px")}i.p.tblwidth&&($("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px"),$("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px"),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&$("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px"))}}})},setGridHeight:function(n){return this.each(function(){var t=this,i;t.grid&&(i=$(t.grid.bDiv),i.css({height:n+(isNaN(n)?"":"px")}),t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=n,t.p.scroll&&t.grid.populateVisible())})},setCaption:function(n){return this.each(function(){this.p.caption=n;$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(n);$(this.grid.cDiv).show()})},setLabel:function(n,t,i,r){return this.each(function(){var f=this,e=-1,u,o;if(f.grid){if(n!==undefined)$(f.p.colModel).each(function(t){if(this.name===n)return e=t,!1});else return;e>=0&&(u=$("tr.ui-jqgrid-labels th:eq("+e+")",f.grid.hDiv),t&&(o=$(".s-ico",u),$("[id^=jqgh_]",u).empty().html(t).append(o),f.p.colNames[e]=t),i&&(typeof i=="string"?$(u).addClass(i):$(u).css(i)),typeof r=="object"&&$(u).attr(r))}})},setCell:function(n,t,i,r,u,f){return this.each(function(){var e=this,o=-1,c,a,l,s,h,v;e.grid&&(isNaN(t)?$(e.p.colModel).each(function(n){if(this.name===t)return o=n,!1}):o=parseInt(t,10),o>=0&&(l=$(e).jqGrid("getGridRowById",n),l&&(s=$("td:eq("+o+")",l),(i!==""||f===!0)&&(c=e.formatter(n,i,o,l,"edit"),a=e.p.colModel[o].title?{title:$.jgrid.stripHtml(c)}:{},e.p.treeGrid&&$(".tree-wrap",$(s)).length>0?$("span",$(s)).html(c).attr(a):$(s).html(c).attr(a),e.p.datatype==="local"&&(h=e.p.colModel[o],i=h.formatter&&typeof h.formatter=="string"&&h.formatter==="date"?$.unformat.date.call(e,i,h):i,v=e.p._index[$.jgrid.stripPref(e.p.idPrefix,n)],v!==undefined&&(e.p.data[v][h.name]=i))),typeof r=="string"?$(s).addClass(r):r&&$(s).css(r),typeof u=="object"&&$(s).attr(u))))})},getCell:function(n,t){var i=!1;return this.each(function(){var u=this,r=-1,f;if(u.grid&&(isNaN(t)?$(u.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0&&(f=$(u).jqGrid("getGridRowById",n),f)))try{i=$.unformat.call(u,$("td:eq("+r+")",f),{rowId:f.id,colModel:u.p.colModel[r]},r)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+r+")",f).html())}}),i},getCol:function(n,t,i){var r=[],f,s=0,o,e,u;return t=typeof t!="boolean"?!1:t,i===undefined&&(i=!1),this.each(function(){var h=this,c=-1;if(h.grid&&(isNaN(n)?$(h.p.colModel).each(function(t){if(this.name===n)return c=t,!1}):c=parseInt(n,10),c>=0)){var a=h.rows.length,l=0,v=0;if(a&&a>0){while(l<a){if($(h.rows[l]).hasClass("jqgrow")){try{f=$.unformat.call(h,$(h.rows[l].cells[c]),{rowId:h.rows[l].id,colModel:h.p.colModel[c]},c)}catch(y){f=$.jgrid.htmlDecode(h.rows[l].cells[c].innerHTML)}i?(u=parseFloat(f),isNaN(u)||(s+=u,e===undefined&&(e=o=u),o=Math.min(o,u),e=Math.max(e,u),v++)):t?r.push({id:h.rows[l].id,value:f}):r.push(f)}l++}if(i)switch(i.toLowerCase()){case"sum":r=s;break;case"avg":r=s/v;break;case"count":r=a-1;break;case"min":r=o;break;case"max":r=e}}}}),r},clearGridData:function(n){return this.each(function(){var t=this,i;t.grid&&(typeof n!="boolean"&&(n=!1),t.p.deepempty?$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove():(i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0],$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)),t.p.footerrow&&n&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=$(this).jqGrid("getGridRowById",n);i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(n){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},n||{});return this.each(function(){var n=this;$("body").is("[role]")||$("body").attr("role","application");n.p.scrollrows=t.scrollingRows;$(n).keydown(function(i){var f=$(n).find("tr[tabindex=0]")[0],u,r,e,o=n.p.treeReader.expanded_field;if(f)if(e=n.p._index[$.jgrid.stripPref(n.p.idPrefix,f.id)],i.keyCode===37||i.keyCode===38||i.keyCode===39||i.keyCode===40){if(i.keyCode===38){if(r=f.previousSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}if(i.keyCode===40){if(r=f.nextSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}i.keyCode===37&&(n.p.treeGrid&&n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyLeft",[n.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(n,n.p.selrow));i.keyCode===39&&(n.p.treeGrid&&!n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyRight",[n.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(n,n.p.selrow))}else i.keyCode===13?($(n).triggerHandler("jqGridKeyEnter",[n.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(n,n.p.selrow)):i.keyCode===32&&($(n).triggerHandler("jqGridKeySpace",[n.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(n,n.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(n){var i=!1,t;return this.each(function(){n!==undefined&&(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,n)],t>=0&&(i=this.p.data[t]))}),i}})})(jQuery),function(n){"use strict";n.jgrid.extend({getColProp:function(n){var r={},u=this[0],i,t;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name===n){r=i[t];break}return r},setColProp:function(t,i){return this.each(function(){if(this.grid&&i)for(var u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name===t){n.extend(!0,this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e=!1,o;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index===n||r.p.colModel[u].name===n){f=u;r.p.frozenColumns===!0&&r.p.colModel[u].frozen===!0&&(e=r.grid.fhDiv.find("#"+r.p.id+"_"+n));break}f!==-1&&(o=r.p.colModel[f].sortable,e||(e=r.grid.headers[f].el),typeof o!="boolean"&&(o=!0),typeof t!="boolean"&&(t=!1),o&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i,e))}})},clearBeforeUnload:function(){return this.each(function(){var t=this.grid,i,r;for(n.isFunction(t.emptyRows)&&t.emptyRows.call(this,!0,!0),n(document).unbind("mouseup.jqGrid"+this.p.id),n(t.hDiv).unbind("mousemove"),n(this).unbind(),t.dragEnd=null,t.dragMove=null,t.dragStart=null,t.emptyRows=null,t.populate=null,t.populateVisible=null,t.scrollGrid=null,t.selectionPreserver=null,t.bDiv=null,t.cDiv=null,t.hDiv=null,t.cols=null,r=t.headers.length,i=0;i<r;i++)t.headers[i].el=null;this.formatCol=null;this.sortData=null;this.updatepager=null;this.refreshIndex=null;this.setHeadCheckBox=null;this.constructTr=null;this.formatter=null;this.addXmlData=null;this.addJSONData=null;this.grid=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&n(this.p.pager).remove();try{n(this).jqGrid("clearBeforeUnload");n("#gbox_"+n.jgrid.jqID(this.id)).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){var r,t,i;this.grid&&(r={id:n(this).attr("id"),cl:n(this).attr("class")},this.p.pager&&n(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),t=document.createElement("table"),n(t).attr({id:r.id}),t.className=r.cl,i=n.jgrid.jqID(this.id),n(t).removeClass("ui-jqgrid-btable"),n(this.p.pager).parents("#gbox_"+i).length===1?(n(t).insertBefore("#gbox_"+i).show(),n(this.p.pager).insertBefore("#gbox_"+i)):n(t).insertBefore("#gbox_"+i).show(),n(this).jqGrid("clearBeforeUnload"),n("#gbox_"+i).remove())})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;t==="hidden"?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):t==="visible"&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&(i.p.toolbar[1]==="both"&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),n(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},filterToolbar:function(t){return t=n.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},n.jgrid.search,t||{}),this.each(function(){var i=this;if(!this.ftoolbar){var r=function(){var o={},l=0,s,f,a={},u,v,r,h,c,e;n.each(i.p.colModel,function(){var r=n("#gs_"+n.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);if(f=this.index||this.name,u=t.searchOperators?r.parent().prev().children("a").attr("soper")||t.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:this.stype==="select"?"eq":t.defaultSearch,s=this.stype==="custom"&&n.isFunction(this.searchoptions.custom_value)&&r.length>0&&r[0].nodeName.toUpperCase()==="SPAN"?this.searchoptions.custom_value.call(i,r.children(".customelement:first"),"get"):r.val(),s||u==="nu"||u==="nn")o[f]=s,a[f]=u,l++;else try{delete i.p.postData[f]}catch(e){}});v=l>0?!0:!1;t.stringResult===!0||i.p.datatype==="local"?(r='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(o,function(n,t){h>0&&(r+=",");r+='{"field":"'+n+'",';r+='"op":"'+a[n]+'",';t+="";r+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++}),r+="]}",n.extend(i.p.postData,{filters:r}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,o);i.p.searchurl&&(c=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));e=n(i).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?!0:!1;!e&&n.isFunction(t.beforeSearch)&&(e=t.beforeSearch.call(i));e||n(i).jqGrid("setGridParam",{search:v}).trigger("reloadGrid",[{page:1}]);c&&n(i).jqGrid("setGridParam",{url:c});n(i).triggerHandler("jqGridToolbarAfterSearch");n.isFunction(t.afterSearch)&&t.afterSearch.call(i)},e=function(r){var e={},s=0,f,l,u,h,c,o;r=typeof r!="boolean"?!0:r;n.each(i.p.colModel,function(){var t,r=n("#gs_"+n.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);this.searchoptions&&this.searchoptions.defaultValue!==undefined&&(t=this.searchoptions.defaultValue);f=this.index||this.name;switch(this.stype){case"select":if(r.find("option").each(function(i){return i===0&&(this.selected=!0),n(this).val()===t?(this.selected=!0,!1):void 0}),t!==undefined)e[f]=t,s++;else try{delete i.p.postData[f]}catch(u){}break;case"text":if(r.val(t||""),t!==undefined)e[f]=t,s++;else try{delete i.p.postData[f]}catch(o){}break;case"custom":n.isFunction(this.searchoptions.custom_value)&&r.length>0&&r[0].nodeName.toUpperCase()==="SPAN"&&this.searchoptions.custom_value.call(i,r.children(".customelement:first"),"set",t||"")}});l=s>0?!0:!1;i.p.resetsearch=!0;t.stringResult===!0||i.p.datatype==="local"?(u='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(e,function(n,t){h>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"eq",';t+="";u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++}),u+="]}",n.extend(i.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):n.extend(i.p.postData,e);i.p.searchurl&&(c=i.p.url,n(i).jqGrid("setGridParam",{url:i.p.searchurl}));o=n(i).triggerHandler("jqGridToolbarBeforeClear")==="stop"?!0:!1;!o&&n.isFunction(t.beforeClear)&&(o=t.beforeClear.call(i));o||r&&n(i).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]);c&&n(i).jqGrid("setGridParam",{url:c});n(i).triggerHandler("jqGridToolbarAfterClear");n.isFunction(t.afterClear)&&t.afterClear()},o=function(){var r=n("tr.ui-search-toolbar",i.grid.hDiv),t=i.p.frozenColumns===!0?n("tr.ui-search-toolbar",i.grid.fhDiv):!1;r.css("display")==="none"?(r.show(),t&&t.show()):(r.hide(),t&&t.hide())},s=function(u,f,e){var l,h;n("#sopt_menu").remove();f=parseInt(f,10);e=parseInt(e,10)+18;for(var y=n(".ui-jqgrid-view").css("font-size")||"11px",c='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+y+";left:"+f+"px;top:"+e+'px;">',p=n(u).attr("soper"),a,v=[],s,o=0,w=n(u).attr("colname"),b=i.p.colModel.length;o<b;){if(i.p.colModel[o].name===w)break;o++}for(l=i.p.colModel[o],h=n.extend({},l.searchoptions),h.sopt||(h.sopt=[],h.sopt[0]=l.stype==="select"?"eq":t.defaultSearch),n.each(t.odata,function(){v.push(this.oper)}),o=0;o<h.sopt.length;o++)s=n.inArray(h.sopt[o],v),s!==-1&&(a=p===t.odata[s].oper?"ui-state-highlight":"",c+='<li class="ui-menu-item '+a+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+t.odata[s].oper+'" oper="'+t.operands[t.odata[s].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+t.operands[t.odata[s].oper]+"<\/td><td>"+t.odata[s].text+"<\/td><\/tr><\/table><\/a><\/li>");c+="<\/ul>";n("body").append(c);n("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");n("#sopt_menu > li > a").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")}).click(function(){var f=n(this).attr("value"),e=n(this).attr("oper"),o;n(i).triggerHandler("jqGridToolbarSelectOper",[f,e,u]);n("#sopt_menu").hide();n(u).text(e).attr("soper",f);t.autosearch===!0&&(o=n(u).parent().next().children()[0],(n(o).val()||f==="nu"||f==="nn")&&r())})},u=n("<tr class='ui-search-toolbar' role='rowheader'><\/tr>"),f;if(n.each(i.p.colModel,function(e){var s=this,o,nt,v,ft="",et="=",p,k,tt=n("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'><\/th>"),c=n("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'><\/div>"),h=n("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'><\/td><td class='ui-search-input'><\/td><td class='ui-search-clear'><\/td><\/tr><\/table>"),ot,st,a,it,rt,l,ut,y,d,g,ht,w;if(this.hidden===!0&&n(tt).css("display","none"),this.search=this.search===!1?!1:!0,this.stype===undefined&&(this.stype="text"),o=n.extend({},this.searchoptions||{}),this.search){if(t.searchOperators){for(p=o.sopt?o.sopt[0]:s.stype==="select"?"eq":t.defaultSearch,k=0;k<t.odata.length;k++)if(t.odata[k].oper===p){et=t.operands[p]||"";break}ot=o.searchtitle!=null?o.searchtitle:t.operandTitle;ft="<a title='"+ot+"' style='padding-right: 0.5em;' soper='"+p+"' class='soptclass' colname='"+this.name+"'>"+et+"<\/a>"}n("td:eq(0)",h).attr("colindex",e).append(ft);o.clearSearch===undefined&&(o.clearSearch=!0);o.clearSearch?(st=t.resetTitle||"Clear Search Value",n("td:eq(2)",h).append("<a title='"+st+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+t.resetIcon+"<\/a>")):n("td:eq(2)",h).hide();switch(this.stype){case"select":if(nt=this.surl||o.dataUrl,nt)v=c,n(v).append(h),n.ajax(n.extend({url:nt,dataType:"html",success:function(u){if(o.buildSelect!==undefined){var f=o.buildSelect(u);f&&n("td:eq(1)",h).append(f)}else n("td:eq(1)",h).append(u);o.defaultValue!==undefined&&n("select",v).val(o.defaultValue);n("select",v).attr({name:s.index||s.name,id:"gs_"+s.name});o.attr&&n("select",v).attr(o.attr);n("select",v).css({width:"100%"});n.jgrid.bindEv.call(i,n("select",v)[0],o);t.autosearch===!0&&n("select",v).change(function(){return r(),!1});u=null}},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else if(s.searchoptions?(a=s.searchoptions.value===undefined?"":s.searchoptions.value,it=s.searchoptions.separator===undefined?":":s.searchoptions.separator,rt=s.searchoptions.delimiter===undefined?";":s.searchoptions.delimiter):s.editoptions&&(a=s.editoptions.value===undefined?"":s.editoptions.value,it=s.editoptions.separator===undefined?":":s.editoptions.separator,rt=s.editoptions.delimiter===undefined?";":s.editoptions.delimiter),a){if(l=document.createElement("select"),l.style.width="100%",n(l).attr({name:s.index||s.name,id:"gs_"+s.name}),typeof a=="string")for(p=a.split(rt),g=0;g<p.length;g++)ut=p[g].split(it),y=document.createElement("option"),y.value=ut[0],y.innerHTML=ut[1],l.appendChild(y);else if(typeof a=="object")for(d in a)a.hasOwnProperty(d)&&(y=document.createElement("option"),y.value=d,y.innerHTML=a[d],l.appendChild(y));o.defaultValue!==undefined&&n(l).val(o.defaultValue);o.attr&&n(l).attr(o.attr);n(c).append(h);n.jgrid.bindEv.call(i,l,o);n("td:eq(1)",h).append(l);t.autosearch===!0&&n(l).change(function(){return r(),!1})}break;case"text":ht=o.defaultValue!==undefined?o.defaultValue:"";n("td:eq(1)",h).append("<input type='text' style='width:100%;padding:0px;' name='"+(s.index||s.name)+"' id='gs_"+s.name+"' value='"+ht+"'/>");n(c).append(h);o.attr&&n("input",c).attr(o.attr);n.jgrid.bindEv.call(i,n("input",c)[0],o);t.autosearch===!0&&(t.searchOnEnter?n("input",c).keypress(function(n){var t=n.charCode||n.keyCode||0;return t===13?(r(),!1):this}):n("input",c).keydown(function(n){var t=n.which;switch(t){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:f&&clearTimeout(f);f=setTimeout(function(){r()},500)}}));break;case"custom":n("td:eq(1)",h).append("<span style='width:95%;padding:0px;' name='"+(s.index||s.name)+"' id='gs_"+s.name+"'/>");n(c).append(h);try{if(n.isFunction(o.custom_element))if(w=o.custom_element.call(i,o.defaultValue!==undefined?o.defaultValue:"",o),w)w=n(w).addClass("customelement"),n(c).find(">span").append(w);else throw"e2";else throw"e1";}catch(b){b==="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose);b==="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,typeof b=="string"?b:b.message,n.jgrid.edit.bClose)}}}n(tt).append(c);n(u).append(tt);t.searchOperators||n("td:eq(0)",h).hide()}),n("table thead",i.grid.hDiv).append(u),t.searchOperators){n(".soptclass",u).click(function(t){var i=n(this).offset(),r=i.left,u=i.top;s(this,r,u);t.stopPropagation()});n("body").on("click",function(t){t.target.className!=="soptclass"&&n("#sopt_menu").hide()})}n(".clearsearchclass",u).click(function(){var u=n(this).parents("tr:first"),e=parseInt(n("td.ui-search-oper",u).attr("colindex"),10),o=n.extend({},i.p.colModel[e].searchoptions||{}),f=o.defaultValue?o.defaultValue:"";i.p.colModel[e].stype==="select"?f?n("td.ui-search-input select",u).val(f):n("td.ui-search-input select",u)[0].selectedIndex=0:n("td.ui-search-input input",u).val(f);t.autosearch===!0&&r()});this.ftoolbar=!0;this.triggerToolbar=r;this.clearToolbar=e;this.toggleToolbar=o}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.ftoolbar=!1,n(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(t){return t===undefined&&(t=!0),this.each(function(){var f=this,e,i,h,u,r,o,s=f.grid,c=n("table.ui-jqgrid-htable thead",s.hDiv),a=f.p.colModel,l;if(s){for(n(this).unbind(".setGroupHeaders"),e=n("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),u=s.headers,i=0,h=u.length;i<h;i++){l=a[i].hidden?"none":"";r=n(u[i].el).width(u[i].width).css("display",l);try{r.removeAttr("rowSpan")}catch(v){r.attr("rowSpan",1)}e.append(r);o=r.children("span.ui-jqgrid-resize");o.length>0&&(o[0].style.height="");r.children("div")[0].style.top=""}n(c).children("tr.ui-jqgrid-labels").remove();n(c).prepend(e);t===!0&&n(f).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=n.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){var tt,it;this.p.groupHeader=t;var i=this,r,l,y=0,s,f,e,a,k,u,p,w,d,h,b=i.p.colModel,g=b.length,nt=i.grid.headers,o=n("table.ui-jqgrid-htable",i.grid.hDiv),rt=o.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),ut=o.children("thead"),v,c=o.find(".jqg-first-row-header");for(c[0]===undefined?c=n("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):c.empty(),it=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i].startColumnName===n)return i;return-1},n(i).prepend(ut),s=n("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<g;r++)if(e=nt[r].el,a=n(e),l=b[r],k={height:"0px",width:nt[r].width+"px",display:l.hidden?"none":""},n("<th>",{role:"gridcell"}).css(k).addClass("ui-first-th-"+i.p.direction).appendTo(c),e.style.width="",u=it(l.name,t.groupHeaders),u>=0){for(p=t.groupHeaders[u],w=p.numberOfColumns,d=p.titleText,h=0,u=0;u<w&&r+u<g;u++)b[r+u].hidden||h++;f=n("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+i.p.direction).css({height:"22px","border-top":"0 none"}).html(d);h>0&&f.attr("colspan",String(h));i.p.headertitles&&f.attr("title",f.text());h===0&&f.hide();a.before(f);s.append(e);y=w-1}else y===0?t.useColSpanStyle?a.attr("rowspan","2"):(n("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+i.p.direction).css({display:l.hidden?"none":"","border-top":"0 none"}).insertBefore(a),s.append(e)):(s.append(e),y--);v=n(i).children("thead");v.prepend(c);s.insertAfter(rt);o.append(v);t.useColSpanStyle&&(o.find("span.ui-jqgrid-resize").each(function(){var t=n(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),o.find("div.ui-jqgrid-sortable").each(function(){var t=n(this),i=t.parent();i.is(":visible")&&i.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(i.height()-t.outerHeight())/2+"px")}));tt=v.find("tr.jqg-first-row-header");n(i).bind("jqGridResizeStop.setGroupHeaders",function(n,t,i){tt.find("th").eq(i).width(t)})})},setFrozenColumns:function(){return this.each(function(){var r,s,u,e,o,h,a;if(this.grid){var t=this,c=t.p.colModel,f=0,v=c.length,i=-1,l=!1;if(t.p.subGrid!==!0&&t.p.treeGrid!==!0&&t.p.cellEdit!==!0&&!t.p.sortable&&!t.p.scroll){for(t.p.rownumbers&&f++,t.p.multiselect&&f++;f<v;){if(c[f].frozen===!0)l=!0,i=f;else break;f++}i>=0&&l&&(r=t.p.caption?n(t.grid.cDiv).outerHeight():0,s=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).height(),t.p.toppager&&(r=r+n(t.grid.topDiv).outerHeight()),t.p.toolbar[0]===!0&&t.p.toolbar[1]!=="bottom"&&(r=r+n(t.grid.uDiv).outerHeight()),t.grid.fhDiv=n('<div style="position:absolute;left:0px;top:'+r+"px;height:"+s+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"><\/div>'),t.grid.fbDiv=n('<div style="position:absolute;left:0px;top:'+(parseInt(r,10)+parseInt(s,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"><\/div>'),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fhDiv),u=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0),t.p.groupHeader?(n("tr.jqg-first-row-header, tr.jqg-third-row-header",u).each(function(){n("th:gt("+i+")",this).remove()}),e=-1,o=-1,n("tr.jqg-second-row-header th",u).each(function(){return h=parseInt(n(this).attr("colspan"),10),a=parseInt(n(this).attr("rowspan"),10),a&&(e++,o++),h&&(e=e+h,o++),e===i?!1:void 0}),e!==i&&(o=i),n("tr.jqg-second-row-header",u).each(function(){n("th:gt("+o+")",this).remove()})):n("tr",u).each(function(){n("th:gt("+i+")",this).remove()}),n(u).width(1),n(t.grid.fhDiv).append(u).mousemove(function(n){if(t.grid.resizing)return t.grid.dragMove(n),!1}),n(t).bind("jqGridResizeStop.setFrozenColumns",function(i,r,u){var e=n(".ui-jqgrid-htable",t.grid.fhDiv),f;n("th:eq("+u+")",e).width(r);f=n(".ui-jqgrid-btable",t.grid.fbDiv);n("tr:first td:eq("+u+")",f).width(r)}),n(t).bind("jqGridSortCol.setFrozenColumns",function(i,r,u){var f=n("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv),e=n("tr.ui-jqgrid-labels:last th:eq("+u+")",t.grid.fhDiv);n("span.ui-grid-ico-sort",f).addClass("ui-state-disabled");n(f).attr("aria-selected","false");n("span.ui-icon-"+t.p.sortorder,e).removeClass("ui-state-disabled");n(e).attr("aria-selected","true");t.p.viewsortcols[0]||t.p.lastsort!==u&&(n("span.s-ico",f).hide(),n("span.s-ico",e).show())}),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fbDiv),n(t.grid.bDiv).scroll(function(){n(t.grid.fbDiv).scrollTop(n(this).scrollTop())}),t.p.hoverrows===!0&&n("#"+n.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout"),n(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){n("#"+n.jgrid.jqID(t.p.id)+"_frozen").remove();n(t.grid.fbDiv).height(n(t.grid.bDiv).height()-16);var r=n("#"+n.jgrid.jqID(t.p.id)).clone(!0);n("tr[role=row]",r).each(function(){n("td[role=gridcell]:gt("+i+")",this).remove()});n(r).width(1).attr("id",t.p.id+"_frozen");n(t.grid.fbDiv).append(r);t.p.hoverrows===!0&&(n("tr.jqgrow",r).hover(function(){n(this).addClass("ui-state-hover");n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover");n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),n("tr.jqgrow","#"+n.jgrid.jqID(t.p.id)).hover(function(){n(this).addClass("ui-state-hover");n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover");n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")}));r=null}),t.grid.hDiv.loading||n(t).triggerHandler("jqGridAfterGridComplete"),t.p.frozenColumns=!0)}}})},destroyFrozenColumns:function(){return this.each(function(){var t,i;this.grid&&this.p.frozenColumns===!0&&(t=this,n(t.grid.fhDiv).remove(),n(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,n(this).unbind(".setFrozenColumns"),t.p.hoverrows===!0&&n("#"+n.jgrid.jqID(t.p.id)).bind("mouseover",function(t){i=n(t.target).closest("tr.jqgrow");n(i).attr("class")!=="ui-subgrid"&&n(i).addClass("ui-state-hover")}).bind("mouseout",function(t){i=n(t.target).closest("tr.jqgrow");n(i).removeClass("ui-state-hover")}),this.p.frozenColumns=!1)})}})}(jQuery),function(n){n.fn.jqm=function(r){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return i[this._jqm].c=n.extend({},i[this._jqm].c,r);u++;this._jqm=u;i[u]={c:n.extend(f,n.jqm.params,r),a:t,w:n(this).addClass("jqmID"+u),s:u};f.trigger&&n(this).jqmAddTrigger(f.trigger)})};n.fn.jqmAddClose=function(n){return h(this,n,"jqmHide")};n.fn.jqmAddTrigger=function(n){return h(this,n,"jqmShow")};n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})};n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})};n.jqm={hash:{},open:function(u,f){var o=i[u],h=o.c,y="."+h.closeClass,a=parseInt(o.w.css("z-index")),v,c,l;return(a=a>0?a:3e3,v=n("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":a-1,opacity:h.overlay/100}),o.a)?t:(o.t=f,o.a=!0,o.w.css("z-index",a),h.modal?(r[0]||setTimeout(function(){s("bind")},1),r.push(u)):h.overlay>0?h.closeoverlay&&o.w.jqmAddClose(v):v=t,o.o=v?v.addClass(h.overlayClass).prependTo("body"):t,h.ajax?(c=h.target||o.w,l=h.ajax,c=typeof c=="string"?n(c,o.w):n(c),l=l.substr(0,1)=="@"?n(f).attr(l.substring(1)):l,c.html(h.ajaxText).load(l,function(){h.onLoad&&h.onLoad.call(this,o);y&&o.w.jqmAddClose(n(y,o.w));e(o)})):y&&o.w.jqmAddClose(n(y,o.w)),h.toTop&&o.o&&o.w.before('<span id="jqmP'+o.w[0]._jqm+'"><\/span>').insertAfter(o.o),h.onShow?h.onShow(o):o.w.show(),e(o),t)},close:function(u){var f=i[u];if(!f.a)return t;if(f.a=t,r[0]&&(r.pop(),r[0]||s("unbind")),f.c.toTop&&f.o&&n("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide)f.c.onHide(f);else f.w.hide(),f.o&&f.o.remove();return t},params:{}};var u=0,i=n.jqm.hash,r=[],t=!1,e=function(n){o(n)},o=function(t){try{n(":input:visible",t.w)[0].focus()}catch(i){}},s=function(t){n(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var u=i[r[r.length-1]],f=!n(t.target).parents(".jqmID"+u.s)[0];return f&&(n(".jqmID"+u.s).each(function(){var r=n(this),i=r.offset();if(i.top<=t.pageY&&t.pageY<=i.top+r.height()&&i.left<=t.pageX&&t.pageX<=i.left+r.width())return f=!1,!1}),o(u)),!f},h=function(r,u,f){return r.each(function(){var r=this._jqm;n(u).each(function(){this[f]||(this[f]=[],n(this).click(function(){var n,r;for(n in{jqmShow:1,jqmHide:1})for(r in this[n])i[this[n][r]]&&i[this[n][r]].w[n](this);return t}));this[f].push(r)})})}}(jQuery),function(n){n.fn.jqDrag=function(n){return s(this,n,"d")};n.fn.jqResize=function(n,t){return s(this,n,"r",t)};n.jqDnR={dnr:{},e:0,drag:function(n){return t.k=="d"?i.css({left:t.X+n.pageX-t.pX,top:t.Y+n.pageY-t.pY}):(i.css({width:Math.max(n.pageX-t.pX+t.W,0),height:Math.max(n.pageY-t.pY+t.H,0)}),r&&u.css({width:Math.max(n.pageX-r.pX+r.W,0),height:Math.max(n.pageY-r.pY+r.H,0)})),!1},stop:function(){n(document).unbind("mousemove",f.drag).unbind("mouseup",f.stop)}};var f=n.jqDnR,t=f.dnr,i=f.e,u,r,s=function(f,s,h,c){return f.each(function(){s=s?n(s,f):f;s.bind("mousedown",{e:f,k:h},function(f){var h=f.data,s={};if(i=h.e,u=c?n(c):!1,i.css("position")!="relative")try{i.position(s)}catch(l){}if(t={X:s.left||e("left")||0,Y:s.top||e("top")||0,W:e("width")||i[0].scrollWidth||0,H:e("height")||i[0].scrollHeight||0,pX:f.pageX,pY:f.pageY,k:h.k},r=u&&h.k!="d"?{X:s.left||o("left")||0,Y:s.top||o("top")||0,W:u[0].offsetWidth||o("width")||0,H:u[0].offsetHeight||o("height")||0,pX:f.pageX,pY:f.pageY,k:h.k}:!1,n("input.hasDatepicker",i[0])[0])try{n("input.hasDatepicker",i[0]).datepicker("hide")}catch(a){}return n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},e=function(n){return parseInt(i.css(n),10)||!1},o=function(n){return parseInt(u.css(n),10)||!1}}(jQuery);var xmlJsonClass={xml2json:function(n,t){n.nodeType===9&&(n=n.documentElement);var r=this.removeWhite(n),u=this.toObj(r),i=this.toJson(u,n.nodeName,"\t");return"{\n"+t+(t?i.replace(/\t/g,t):i.replace(/\t|\n/g,""))+"\n}"},json2xml:function(n,t){var i=function(n,t,r){var u="",e,s,h,o,f;if(n instanceof Array)if(n.length===0)u+=r+"<"+t+">__EMPTY_ARRAY_<\/"+t+">\n";else for(e=0,s=n.length;e<s;e+=1)h=r+i(n[e],t,r+"\t")+"\n",u+=h;else if(typeof n=="object"){o=!1;u+=r+"<"+t;for(f in n)n.hasOwnProperty(f)&&(f.charAt(0)==="@"?u+=" "+f.substr(1)+'="'+n[f].toString()+'"':o=!0);if(u+=o?">":"/>",o){for(f in n)n.hasOwnProperty(f)&&(f==="#text"?u+=n[f]:f==="#cdata"?u+="<![CDATA["+n[f]+"]\]>":f.charAt(0)!=="@"&&(u+=i(n[f],f,r+"\t")));u+=(u.charAt(u.length-1)==="\n"?r:"")+"<\/"+t+">"}}else typeof n=="function"?u+=r+"<"+t+"><![CDATA["+n+"]\]><\/"+t+">":(n===undefined&&(n=""),u+=n.toString()==='""'||n.toString().length===0?r+"<"+t+">__EMPTY_STRING_<\/"+t+">":r+"<"+t+">"+n.toString()+"<\/"+t+">");return u},r="";for(var u in n)n.hasOwnProperty(u)&&(r+=i(n[u],u,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(n){var i={},e=/function/i,r;if(n.nodeType===1){if(n.attributes.length)for(r=0;r<n.attributes.length;r+=1)i["@"+n.attributes[r].nodeName]=(n.attributes[r].nodeValue||"").toString();if(n.firstChild){for(var f=0,u=0,o=!1,t=n.firstChild;t;t=t.nextSibling)t.nodeType===1?o=!0:t.nodeType===3&&t.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:t.nodeType===4&&(u+=1);if(o)if(f<2&&u<2)for(this.removeWhite(n),t=n.firstChild;t;t=t.nextSibling)t.nodeType===3?i["#text"]=this.escape(t.nodeValue):t.nodeType===4?e.test(t.nodeValue)?i[t.nodeName]=[i[t.nodeName],t.nodeValue]:i["#cdata"]=this.escape(t.nodeValue):i[t.nodeName]?i[t.nodeName]instanceof Array?i[t.nodeName][i[t.nodeName].length]=this.toObj(t):i[t.nodeName]=[i[t.nodeName],this.toObj(t)]:i[t.nodeName]=this.toObj(t);else n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):i=this.escape(this.innerXml(n));else if(f)n.attributes.length?i["#text"]=this.escape(this.innerXml(n)):(i=this.escape(this.innerXml(n)),i==="__EMPTY_ARRAY_"?i="[]":i==="__EMPTY_STRING_"&&(i=""));else if(u)if(u>1)i=this.escape(this.innerXml(n));else for(t=n.firstChild;t;t=t.nextSibling)if(e.test(n.firstChild.nodeValue)){i=n.firstChild.nodeValue;break}else i["#cdata"]=this.escape(t.nodeValue)}n.attributes.length||n.firstChild||(i=null)}else n.nodeType===9?i=this.toObj(n.documentElement):alert("unhandled node type: "+n.nodeType);return i},toJson:function(n,t,i,r){var l,s,h,o,c;r===undefined&&(r=!0);var e=t?'"'+t+'"':"",u="\t",f="\n";if(r||(u="",f=""),n==="[]")e+=t?":[]":"[]";else if(n instanceof Array){for(h=[],s=0,l=n.length;s<l;s+=1)h[s]=this.toJson(n[s],"",i+u,r);e+=(t?":[":"[")+(h.length>1?f+i+u+h.join(","+f+i+u)+f+i:h.join(""))+"]"}else if(n===null)e+=(t&&":")+"null";else if(typeof n=="object"){o=[];for(c in n)n.hasOwnProperty(c)&&(o[o.length]=this.toJson(n[c],c,i+u,r));e+=(t?":{":"{")+(o.length>1?f+i+u+o.join(","+f+i+u)+f+i:o.join(""))+"}"}else e+=typeof n=="string"?(t&&":")+'"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+n.toString();return e},innerXml:function(n){var i="",r,t;if("innerHTML"in n)i=n.innerHTML;else for(r=function(n){var t="",i,u;if(n.nodeType===1){for(t+="<"+n.nodeName,i=0;i<n.attributes.length;i+=1)t+=" "+n.attributes[i].nodeName+'="'+(n.attributes[i].nodeValue||"").toString()+'"';if(n.firstChild){for(t+=">",u=n.firstChild;u;u=u.nextSibling)t+=r(u);t+="<\/"+n.nodeName+">"}else t+="/>"}else n.nodeType===3?t+=n.nodeValue:n.nodeType===4&&(t+="<![CDATA["+n.nodeValue+"]\]>");return t},t=n.firstChild;t;t=t.nextSibling)i+=r(t);return i},escape:function(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(n){var t,i;for(n.normalize(),t=n.firstChild;t;)t.nodeType===3?t.nodeValue.match(/[^ \f\n\r\t\v]/)?t=t.nextSibling:(i=t.nextSibling,n.removeChild(t),t=i):t.nodeType===1?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return n}};(function(n){"use strict";n.fmatter={};n.extend(n.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0}});n.fn.fmatter=function(t,i,r,u,f){var e=i;r=n.extend({},n.jgrid.formatter,r);try{e=n.fn.fmatter[t].call(this,i,r,u,f)}catch(o){}return e};n.fmatter.util={NumberFormat:function(t,i){var s,h,l,f,c,e;if(n.fmatter.isNumber(t)||(t*=1),n.fmatter.isNumber(t)){var a=t<0,r=String(t),o=i.decimalSeparator||".",u;if(n.fmatter.isNumber(i.decimalPlaces)&&(s=i.decimalPlaces,h=Math.pow(10,s),r=String(Math.round(t*h)/h),u=r.lastIndexOf("."),s>0))for(u<0?(r+=o,u=r.length-1):o!=="."&&(r=r.replace(".",o));r.length-1-u<s;)r+="0";if(i.thousandsSeparator){for(l=i.thousandsSeparator,u=r.lastIndexOf(o),u=u>-1?u:r.length,f=r.substring(u),c=-1,e=u;e>0;e--)c++,c%3==0&&e!==u&&(!a||e>1)&&(f=l+f),f=r.charAt(e-1)+f;r=f}return r=i.prefix?i.prefix+r:r,i.suffix?r+i.suffix:r}return t}};n.fn.fmatter.defaultFormat=function(t,i){return n.fmatter.isValue(t)&&t!==""?t:i.defaultValue||"&#160;"};n.fn.fmatter.email=function(t,i){return n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var r=n.extend({},i.checkbox),u,f;return i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),u=r.disabled===!0?'disabled="disabled"':"",(n.fmatter.isEmpty(t)||t===undefined)&&(t=n.fn.fmatter.defaultFormat(t,r)),t=String(t),t=(t+"").toLowerCase(),f=t.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+f+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),!n.fmatter.isEmpty(t))?"<a "+u+' href="'+t+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.showlink=function(t,i){var r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},u="",f;return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),f=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,n.fmatter.isString(t)||n.fmatter.isNumber(t))?"<a "+u+' href="'+f+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t))?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return(i.colModel!==undefined&&i.colModel.formatoptions!==undefined&&(f=n.extend({},f,i.colModel.formatoptions)),!f.reformatAfterEdit&&u==="edit")?n.fn.fmatter.defaultFormat(t,i):n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.jgrid.parseDate(f.srcformat,t,f.newformat,f)};n.fn.fmatter.select=function(t,i){var r,f,o,c,s,e,u,l,a,h;if(t=String(t),r=!1,f=[],i.colModel.formatoptions!==undefined?(r=i.colModel.formatoptions.value,o=i.colModel.formatoptions.separator===undefined?":":i.colModel.formatoptions.separator,c=i.colModel.formatoptions.delimiter===undefined?";":i.colModel.formatoptions.delimiter):i.colModel.editoptions!==undefined&&(r=i.colModel.editoptions.value,o=i.colModel.editoptions.separator===undefined?":":i.colModel.editoptions.separator,c=i.colModel.editoptions.delimiter===undefined?";":i.colModel.editoptions.delimiter),r)if(s=i.colModel.editoptions.multiple===!0?!0:!1,e=[],s&&(e=t.split(","),e=n.map(e,function(t){return n.trim(t)})),n.fmatter.isString(r)){for(l=r.split(c),a=0,h=0;h<l.length;h++)if(u=l[h].split(o),u.length>2&&(u[1]=n.map(u,function(n,t){if(t>0)return n}).join(o)),s)n.inArray(u[0],e)>-1&&(f[a]=u[1],a++);else if(n.trim(u[0])===n.trim(t)){f[0]=u[1];break}}else n.fmatter.isObject(r)&&(s?f=n.map(e,function(n){return r[n]}):f[0]=r[t]||"");return t=f.join(", "),t===""?n.fn.fmatter.defaultFormat(t,i):t};n.fn.fmatter.rowactions=function(t){var c=n(this).closest("tr.jqgrow"),f=c.attr("id"),a=n(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),r=n("#"+a),o=r[0],e=o.p,s=e.colModel[n.jgrid.getCellIndex(this)],u=s.frozen?n("tr#"+f+" td:eq("+n.jgrid.getCellIndex(this)+") > div",r):n(this).parent(),i={extraparam:{}},v=function(t,r){n.isFunction(i.afterSave)&&i.afterSave.call(o,t,r);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},l=function(t){n.isFunction(i.afterRestore)&&i.afterRestore.call(o,t);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},h;s.formatoptions!==undefined&&(i=n.extend(i,s.formatoptions));e.editOptions!==undefined&&(i.editOptions=e.editOptions);e.delOptions!==undefined&&(i.delOptions=e.delOptions);c.hasClass("jqgrid-new-row")&&(i.extraparam[e.prmNames.oper]=e.prmNames.addoper);h={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:v,errorfunc:i.onError,afterrestorefunc:l,restoreAfterError:i.restoreAfterError,mtype:i.mtype};switch(t){case"edit":r.jqGrid("editRow",f,h);u.find("div.ui-inline-edit,div.ui-inline-del").hide();u.find("div.ui-inline-save,div.ui-inline-cancel").show();r.triggerHandler("jqGridAfterGridComplete");break;case"save":r.jqGrid("saveRow",f,h)&&(u.find("div.ui-inline-edit,div.ui-inline-del").show(),u.find("div.ui-inline-save,div.ui-inline-cancel").hide(),r.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":r.jqGrid("restoreRow",f,l);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide();r.triggerHandler("jqGridAfterGridComplete");break;case"del":r.jqGrid("delGridRow",f,i.delOptions);break;case"formedit":r.jqGrid("setSelection",f);r.jqGrid("editGridRow",f,i.editOptions)}};n.fn.fmatter.actions=function(t,i){var e={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},u=i.rowId,f="",r;return(i.colModel.formatoptions!==undefined&&(e=n.extend(e,i.colModel.formatoptions)),u===undefined||n.fmatter.isEmpty(u))?"":(e.editformbutton?(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f+="<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"):e.editbutton&&(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",f+="<div title='"+n.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"),e.delbutton&&(r="id='jDeleteButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f+="<div title='"+n.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+r+"><span class='ui-icon ui-icon-trash'><\/span><\/div>"),r="id='jSaveButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f+="<div title='"+n.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='ui-icon ui-icon-disk'><\/span><\/div>",r="id='jCancelButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f+="<div title='"+n.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='ui-icon ui-icon-cancel'><\/span><\/div>","<div style='margin-left:8px;'>"+f+"<\/div>")};n.unformat=function(t,i,r,u){var e,h=i.colModel.formatter,f=i.colModel.formatoptions||{},o,l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,a=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,c,s,v;if(a!==undefined&&n.isFunction(a))e=a.call(this,n(t).text(),i,t);else if(h!==undefined&&n.fmatter.isString(h)){c=n.jgrid.formatter||{};switch(h){case"integer":f=n.extend({},c.integer,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"");break;case"number":f=n.extend({},c.number,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text();f.prefix&&f.prefix.length&&(e=e.substr(f.prefix.length));f.suffix&&f.suffix.length&&(e=e.substr(0,e.length-f.suffix.length));e=e.replace(s,"").replace(f.decimalSeparator,".");break;case"checkbox":v=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];e=n("input",t).is(":checked")?v[0]:v[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return e!==undefined?e:u===!0?n(t).text():n.jgrid.htmlDecode(n(t).html())};n.unformat.select=function(t,i,r,u){var c=[],s=n(t).text(),v,y,l;if(u===!0)return s;var e=n.extend({},i.colModel.formatoptions!==undefined?i.colModel.formatoptions:i.colModel.editoptions),p=e.separator===undefined?":":e.separator,w=e.delimiter===undefined?";":e.delimiter;if(e.value){var h=e.value,a=e.multiple===!0?!0:!1,o=[],f;if(a&&(o=s.split(","),o=n.map(o,function(t){return n.trim(t)})),n.fmatter.isString(h)){for(v=h.split(w),y=0,l=0;l<v.length;l++)if(f=v[l].split(p),f.length>2&&(f[1]=n.map(f,function(n,t){if(t>0)return n}).join(p)),a)n.inArray(f[1],o)>-1&&(c[y]=f[0],y++);else if(n.trim(f[1])===n.trim(s)){c[0]=f[0];break}}else(n.fmatter.isObject(h)||n.isArray(h))&&(a||(o[0]=s),c=n.map(o,function(t){var i;return n.each(h,function(n,r){if(r===t)return i=n,!1}),i!==undefined?i:void 0}));return c.join(", ")}return s||""};n.unformat.date=function(t,i){var r=n.jgrid.formatter.date||{};return(i.formatoptions!==undefined&&(r=n.extend({},r,i.formatoptions)),!n.fmatter.isEmpty(t))?n.jgrid.parseDate(r.newformat,t,r.srcformat,r):n.fn.fmatter.defaultFormat(t,i)}})(jQuery),function(n){"use strict";n.extend(n.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(t,i){if(i=n.extend({jqm:!0,gb:""},i||{}),i.onClose){var r=i.gb&&typeof i.gb=="string"&&i.gb.substr(0,6)==="#gbox_"?i.onClose.call(n("#"+i.gb.substr(6))[0],t):i.onClose(t);if(typeof r=="boolean"&&!r)return}if(n.fn.jqm&&i.jqm===!0)n(t).attr("aria-hidden","true").jqmHide();else{if(i.gb!=="")try{n(".jqgrid-overlay:first",i.gb).hide()}catch(u){}n(t).hide().attr("aria-hidden","true")}},findPos:function(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]},createModal:function(t,i,r,u,f,e,o){var s,y,p,h,l,a,c,v,w,b;if(r=n.extend(!0,{},n.jgrid.jqModal||{},r),s=document.createElement("div"),p=this,o=n.extend({},o||{}),y=n(r.gbox).attr("dir")==="rtl"?!0:!1,s.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",s.id=t.themodal,h=document.createElement("div"),h.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",h.id=t.modalhead,n(h).append("<span class='ui-jqdialog-title'>"+r.caption+"<\/span>"),l=n("<a class='ui-jqdialog-titlebar-close ui-corner-all'><\/a>").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'><\/span>"),n(h).append(l),y?(s.dir="rtl",n(".ui-jqdialog-title",h).css("float","right"),n(".ui-jqdialog-titlebar-close",h).css("left",.3+"em")):(s.dir="ltr",n(".ui-jqdialog-title",h).css("float","left"),n(".ui-jqdialog-titlebar-close",h).css("right",.3+"em")),a=document.createElement("div"),n(a).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),n(a).append(i),s.appendChild(a),n(s).prepend(h),e===!0?n("body").append(s):typeof e=="string"?n(e).append(s):n(s).insertBefore(u),n(s).css(o),r.jqModal===undefined&&(r.jqModal=!0),c={},n.fn.jqm&&r.jqModal===!0?(r.left===0&&r.top===0&&r.overlay&&(v=[],v=n.jgrid.findPos(f),r.left=v[0]+4,r.top=v[1]+4),c.top=r.top+"px",c.left=r.left):(r.left!==0||r.top!==0)&&(c.left=r.left,c.top=r.top+"px"),n("a.ui-jqdialog-titlebar-close",h).click(function(){var i=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,u=n("#"+n.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return p.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:u,jqm:r.jqModal,onClose:i}),!1}),r.width!==0&&r.width||(r.width=300),r.height!==0&&r.height||(r.height=200),r.zIndex||(w=n(u).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=w?parseInt(w,10)+2:950),b=0,y&&c.left&&!e&&(b=n(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,c.left=parseInt(c.left,10)+parseInt(b,10)),c.left&&(c.left+="px"),n(s).css(n.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),r.drag===undefined&&(r.drag=!0),r.resize===undefined&&(r.resize=!0),r.drag)if(n(h).css("cursor","move"),n.fn.jqDrag)n(s).jqDrag(h);else try{n(s).draggable({handle:n("#"+n.jgrid.jqID(h.id))})}catch(k){}if(r.resize)if(n.fn.jqResize)n(s).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'><\/div>"),n("#"+n.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1);else try{n(s).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+n.jgrid.jqID(t.scrollelm):!1})}catch(d){}r.closeOnEscape===!0&&n(s).keydown(function(i){if(i.which==27){var u=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;p.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:u})}})},viewModal:function(t,i){if(i=n.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:n.jgrid.showModal,onHide:n.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),n.fn.jqm&&i.jqm===!0)i.jqM?n(t).attr("aria-hidden","false").jqm(i).jqmShow():n(t).attr("aria-hidden","false").jqmShow();else{i.gbox!==""&&(n(".jqgrid-overlay:first",i.gbox).show(),n(t).data("gbox",i.gbox));n(t).show().attr("aria-hidden","false");try{n(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,i,r,u){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},o,c,s,e;if(n.extend(!0,f,n.jgrid.jqModal||{},{caption:"<b>"+t+"<\/b>"},u||{}),o=f.jqModal,c=this,n.fn.jqm&&!o&&(o=!1),s="",f.buttons.length>0)for(e=0;e<f.buttons.length;e++)f.buttons[e].id===undefined&&(f.buttons[e].id="info_button_"+e),s+="<a id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[e].text+"<\/a>";var l=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",a="text-align:"+f.align+";",h="<div id='info_id'>";h+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+a+"'>"+i+"<\/div>";h+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"<\/a>"+s+"<\/div>":s!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+s+"<\/div>":"";h+="<\/div>";try{n("#info_dialog").attr("aria-hidden")==="false"&&n.jgrid.hideModal("#info_dialog",{jqm:o});n("#info_dialog").remove()}catch(v){}n.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},h,f,"","",!0);s&&n.each(f.buttons,function(t){n("#"+n.jgrid.jqID(this.id),"#info_id").bind("click",function(){return f.buttons[t].onClick.call(n("#info_dialog")),!1})});n("#closedialog","#info_id").click(function(){return c.hideModal("#info_dialog",{jqm:o,onClose:n("#info_dialog").data("onClose")||f.onClose,gb:n("#info_dialog").data("gbox")||f.gbox}),!1});n(".fm-button","#info_dialog").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});n.isFunction(f.beforeOpen)&&f.beforeOpen();n.jgrid.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:f.modal,jqm:o});n.isFunction(f.afterOpen)&&f.afterOpen();try{n("#info_dialog").focus()}catch(y){}},bindEv:function(t,i){var r=this;n.isFunction(i.dataInit)&&i.dataInit.call(r,t,i);i.dataEvents&&n.each(i.dataEvents,function(){this.data!==undefined?n(t).bind(this.type,this.data,this.fn):n(t).bind(this.type,this.fn)})},createEl:function(t,i,r,u,f){function v(t,i,r){var u=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value"];r!==undefined&&n.isArray(r)&&n.merge(u,r);n.each(i,function(i,r){n.inArray(i,u)===-1&&n(t).attr(i,r)});i.hasOwnProperty("id")||n(t).attr("id",n.jgrid.randId())}var e="",a=this,nt,d,h,c,p,w,g,tt,s,o,it,rt,y,l,ut,b;switch(t){case"textarea":e=document.createElement("textarea");u?i.cols||n(e).css({width:"98%"}):i.cols||(i.cols=20);i.rows||(i.rows=2);(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r="");e.value=r;v(e,i);n(e).attr({role:"textbox",multiline:"true"});break;case"checkbox":e=document.createElement("input");e.type="checkbox";i.value?(d=i.value.split(":"),r===d[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=d[0],n(e).attr("offval",d[1])):(nt=(r+"").toLowerCase(),nt.search(/(false|f|0|no|n|off|undefined)/i)<0&&nt!==""?(e.checked=!0,e.defaultChecked=!0,e.value=r):e.value="on",n(e).attr("offval","off"));v(e,i,["value"]);n(e).attr("role","checkbox");break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),c=[],i.multiple===!0?(h=!0,e.multiple="multiple",n(e).attr("aria-multiselectable","true")):h=!1,i.dataUrl!==undefined)p=i.name?String(i.id).substring(0,String(i.id).length-String(i.name).length-1):String(i.id),w=i.postData||f.postData,a.p&&a.p.idPrefix&&(p=n.jgrid.stripPref(a.p.idPrefix,p)),n.ajax(n.extend({url:n.isFunction(i.dataUrl)?i.dataUrl.call(a,p,r,String(i.name)):i.dataUrl,type:"GET",dataType:"html",data:n.isFunction(w)?w.call(a,p,r,String(i.name)):w,context:{elem:e,options:i,vl:r},success:function(t){var i=[],f=this.elem,e=this.vl,r=n.extend({},this.options),o=r.multiple===!0,u=n.isFunction(r.buildSelect)?r.buildSelect.call(a,t):t;typeof u=="string"&&(u=n(n.trim(u)).html());u&&(n(f).append(u),v(f,r,w?["postData"]:undefined),r.size===undefined&&(r.size=o?3:1),o?(i=e.split(","),i=n.map(i,function(t){return n.trim(t)})):i[0]=n.trim(e),setTimeout(function(){n("option",f).each(function(t){t===0&&f.multiple&&(this.selected=!1);n(this).attr("role","option");(n.inArray(n.trim(n(this).text()),i)>-1||n.inArray(n.trim(n(this).val()),i)>-1)&&(this.selected="selected")})},0))}},f||{}));else if(i.value){if(i.size===undefined&&(i.size=h?3:1),h&&(c=r.split(","),c=n.map(c,function(t){return n.trim(t)})),typeof i.value=="function"&&(i.value=i.value()),it=i.separator===undefined?":":i.separator,rt=i.delimiter===undefined?";":i.delimiter,typeof i.value=="string")for(tt=i.value.split(rt),g=0;g<tt.length;g++)s=tt[g].split(it),s.length>2&&(s[1]=n.map(s,function(n,t){if(t>0)return n}).join(it)),o=document.createElement("option"),o.setAttribute("role","option"),o.value=s[0],o.innerHTML=s[1],e.appendChild(o),h||n.trim(s[0])!==n.trim(r)&&n.trim(s[1])!==n.trim(r)||(o.selected="selected"),h&&(n.inArray(n.trim(s[1]),c)>-1||n.inArray(n.trim(s[0]),c)>-1)&&(o.selected="selected");else if(typeof i.value=="object"){y=i.value;for(l in y)y.hasOwnProperty(l)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=l,o.innerHTML=y[l],e.appendChild(o),h||n.trim(l)!==n.trim(r)&&n.trim(y[l])!==n.trim(r)||(o.selected="selected"),h&&(n.inArray(n.trim(y[l]),c)>-1||n.inArray(n.trim(l),c)>-1)&&(o.selected="selected"))}v(e,i,["value"])}break;case"text":case"password":case"button":ut=t==="button"?"button":"textbox";e=document.createElement("input");e.type=t;e.value=r;v(e,i);t!=="button"&&(u?i.size||n(e).css({width:"98%"}):i.size||(i.size=20));n(e).attr("role",ut);break;case"image":case"file":e=document.createElement("input");e.type=t;v(e,i);break;case"custom":e=document.createElement("span");try{if(n.isFunction(i.custom_element))if(b=i.custom_element.call(a,r,i),b)b=n(b).addClass("customelement").attr({id:i.id,name:i.name}),n(e).empty().append(b);else throw"e2";else throw"e1";}catch(k){k==="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose);k==="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_element' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,typeof k=="string"?k:k.message,n.jgrid.edit.bClose)}}return e},checkDate:function(n,t){var a=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},i={},h,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!==-1?"/":n.indexOf("-")!==-1?"-":n.indexOf(".")!==-1?".":"/",n=n.split(h),t=t.split(h),t.length!==3)return!1;for(var u=-1,f,e=-1,o=-1,r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!==-1&&(u=r),f.indexOf("m")!==-1&&(o=r),f.indexOf("d")!==-1&&(e=r);return(f=n[u]==="y"||n[u]==="yyyy"?4:n[u]==="yy"?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],u===-1)?!1:(s=i[n[u]].toString(),f===2&&s.length===1&&(f=1),s.length!==f||i[n[u]]===0&&t[u]!=="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]===2&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0},isEmpty:function(n){return n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(t){var i;if(!n.jgrid.isEmpty(t))if(i=t.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/),i){if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}else return!1;return!0},checkValues:function(t,i,r,u){var f,s,e,c,y,l=this,o=l.p.colModel,h,a,v;if(r===undefined)if(typeof i=="string"){for(s=0,y=o.length;s<y;s++)if(o[s].name===i){f=o[s].editrules;i=s;o[s].formoptions!=null&&(e=o[s].formoptions.label);break}}else i>=0&&(f=o[i].editrules);else f=r,e=u===undefined?"_":u;if(f){if(e||(e=l.p.colNames!=null?l.p.colNames[i]:o[i].label),f.required===!0&&n.jgrid.isEmpty(t))return[!1,e+": "+n.jgrid.edit.msg.required,""];if(h=f.required===!1?!1:!0,f.number===!0&&!(h===!1&&n.jgrid.isEmpty(t))&&isNaN(t))return[!1,e+": "+n.jgrid.edit.msg.number,""];if(f.minValue!==undefined&&!isNaN(f.minValue)&&parseFloat(t)<parseFloat(f.minValue))return[!1,e+": "+n.jgrid.edit.msg.minValue+" "+f.minValue,""];if(f.maxValue!==undefined&&!isNaN(f.maxValue)&&parseFloat(t)>parseFloat(f.maxValue))return[!1,e+": "+n.jgrid.edit.msg.maxValue+" "+f.maxValue,""];if(f.email===!0&&!(h===!1&&n.jgrid.isEmpty(t))&&(a=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!a.test(t)))return[!1,e+": "+n.jgrid.edit.msg.email,""];if(f.integer===!0&&!(h===!1&&n.jgrid.isEmpty(t))){if(isNaN(t))return[!1,e+": "+n.jgrid.edit.msg.integer,""];if(t%1!=0||t.indexOf(".")!==-1)return[!1,e+": "+n.jgrid.edit.msg.integer,""]}if(f.date===!0&&!(h===!1&&n.jgrid.isEmpty(t))&&(o[i].formatoptions&&o[i].formatoptions.newformat?(c=o[i].formatoptions.newformat,n.jgrid.formatter.date.masks.hasOwnProperty(c)&&(c=n.jgrid.formatter.date.masks[c])):c=o[i].datefmt||"Y-m-d",!n.jgrid.checkDate(c,t)))return[!1,e+": "+n.jgrid.edit.msg.date+" - "+c,""];if(f.time===!0&&!(h===!1&&n.jgrid.isEmpty(t))&&!n.jgrid.checkTime(t))return[!1,e+": "+n.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(f.url===!0&&!(h===!1&&n.jgrid.isEmpty(t))&&(a=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!a.test(t)))return[!1,e+": "+n.jgrid.edit.msg.url,""];if(f.custom===!0&&!(h===!1&&n.jgrid.isEmpty(t)))return n.isFunction(f.custom_func)?(v=f.custom_func.call(l,t,e,i),n.isArray(v)?v:[!1,n.jgrid.edit.msg.customarray,""]):[!1,n.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(n){"use strict";n.fn.jqFilter=function(t){var r,u,i;if(typeof t=="string"){if(r=n.fn.jqFilter[t],!r)throw"jqFilter - No such method: "+t;return u=n.makeArray(arguments).slice(1),r.apply(this,u)}return i=n.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},n.jgrid.filter,t||{}),this.each(function(){var r,u,t,f,e,o;if(!this.filter&&(this.p=i,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),u=this.p.columns.length,f=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=n.extend(!0,{},this.p.filter),u)){for(r=0;r<u;r++)t=this.p.columns[r],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),t.hidden===undefined&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});this.p.showQuery&&n(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");e=function(){return n("#"+n.jgrid.jqID(i.id))[0]||null};o=function(t,r){var u=[!0,""],f=e();if(n.isFunction(r.searchrules))u=r.searchrules.call(f,t,r);else if(n.jgrid&&n.jgrid.checkValues)try{u=n.jgrid.checkValues.call(f,t,-1,r.searchrules,r.label)}catch(o){}u&&u.length&&u[0]===!1&&(i.error=!u[0],i.errmsg=u[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",n.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){n("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);n(this).append(t);n.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(t,r){var f=this,u,e=n("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody><\/tbody><\/table>"),a="left",v,o,h,y,k,c,p,s,w,l,d,b;if(this.p.direction==="rtl"&&(a="right",e.attr("dir","rtl")),r===null&&e.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+a+"'><\/th><\/tr>"),v=n("<tr><\/tr>"),e.append(v),o=n("<th colspan='5' align='"+a+"'><\/th>"),v.append(o),this.p.ruleButtons===!0){for(h=n("<select class='opsel'><\/select>"),o.append(h),y="",u=0;u<i.groupOps.length;u++)k=t.groupOp===f.p.groupOps[u].op?" selected='selected'":"",y+="<option value='"+f.p.groupOps[u].op+"'"+k+">"+f.p.groupOps[u].text+"<\/option>";h.append(y).bind("change",function(){t.groupOp=n(h).val();f.onchange()})}if(c="<span><\/span>",this.p.groupButton&&(c=n("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),c.bind("click",function(){return t.groups===undefined&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),f.reDraw(),f.onchange(),!1})),o.append(c),this.p.ruleButtons===!0&&(p=n("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),p.bind("click",function(){var r;for(t.rules===undefined&&(t.rules=[]),u=0;u<f.p.columns.length;u++){var i=f.p.columns[u].search===undefined?!0:f.p.columns[u].search,e=f.p.columns[u].hidden===!0,o=f.p.columns[u].searchoptions.searchhidden===!0;if(o&&i||i&&!e){s=f.p.columns[u];break}}return r=s.searchoptions.sopt?s.searchoptions.sopt:f.p.sopt?f.p.sopt:n.inArray(s.searchtype,f.p.strarr)!==-1?f.p.stropts:f.p.numopts,t.rules.push({field:s.name,op:r[0],data:""}),f.reDraw(),!1}),o.append(p)),r!==null&&(w=n("<input type='button' value='-' title='Delete group' class='delete-group'/>"),o.append(w),w.bind("click",function(){for(u=0;u<r.groups.length;u++)if(r.groups[u]===t){r.groups.splice(u,1);break}return f.reDraw(),f.onchange(),!1})),t.groups!==undefined)for(u=0;u<t.groups.length;u++)l=n("<tr><\/tr>"),e.append(l),d=n("<td class='first'><\/td>"),l.append(d),b=n("<td colspan='4'><\/td>"),b.append(this.createTableForGroup(t.groups[u],t)),l.append(b);if(t.groupOp===undefined&&(t.groupOp=f.p.groupOps[0].op),t.rules!==undefined)for(u=0;u<t.rules.length;u++)e.append(this.createTableRowForRule(t.rules[u],t));return e};this.createTableRowForRule=function(t,r){var u=this,a=e(),v=n("<tr><\/tr>"),o,l,h,s,w="",b,g,k,c,y,nt,tt,p,d,it,rt,ut;for(v.append("<td class='first'><\/td>"),g=n("<td class='columns'><\/td>"),v.append(g),k=n("<select><\/select>"),y=[],g.append(k),k.bind("change",function(){var i,r,e,v;for(t.field=n(k).val(),h=n(this).parents("tr:first"),o=0;o<u.p.columns.length;o++)if(u.p.columns[o].name===t.field){s=u.p.columns[o];break}if(s){for(s.searchoptions.id=n.jgrid.randId(),f&&s.inputtype==="text"&&(s.searchoptions.size||(s.searchoptions.size=10)),i=n.jgrid.createEl.call(a,s.inputtype,s.searchoptions,"",!0,u.p.ajaxSelectOptions||{},!0),n(i).addClass("input-elm"),l=s.searchoptions.sopt?s.searchoptions.sopt:u.p.sopt?u.p.sopt:n.inArray(s.searchtype,u.p.strarr)!==-1?u.p.stropts:u.p.numopts,r="",e=0,y=[],n.each(u.p.ops,function(){y.push(this.oper)}),o=0;o<l.length;o++)c=n.inArray(l[o],y),c!==-1&&(e===0&&(t.op=u.p.ops[c].oper),r+="<option value='"+u.p.ops[c].oper+"'>"+u.p.ops[c].text+"<\/option>",e++);n(".selectopts",h).empty().append(r);n(".selectopts",h)[0].selectedIndex=0;n.jgrid.msie&&n.jgrid.msiever()<9&&(v=parseInt(n("select.selectopts",h)[0].offsetWidth,10)+1,n(".selectopts",h).width(v),n(".selectopts",h).css("width","auto"));n(".data",h).empty().append(i);n.jgrid.bindEv.call(a,i,s.searchoptions);n(".input-elm",h).bind("change",function(i){var r=i.target;t.data=r.nodeName.toUpperCase()==="SPAN"&&s.searchoptions&&n.isFunction(s.searchoptions.custom_value)?s.searchoptions.custom_value.call(a,n(r).children(".customelement:first"),"get"):r.value;u.onchange()});setTimeout(function(){t.data=n(i).val();u.onchange()},0)}}),nt=0,o=0;o<u.p.columns.length;o++){var ft=u.p.columns[o].search===undefined?!0:u.p.columns[o].search,et=u.p.columns[o].hidden===!0,ot=u.p.columns[o].searchoptions.searchhidden===!0;(ot&&ft||ft&&!et)&&(b="",t.field===u.p.columns[o].name&&(b=" selected='selected'",nt=o),w+="<option value='"+u.p.columns[o].name+"'"+b+">"+u.p.columns[o].label+"<\/option>")}for(k.append(w),tt=n("<td class='operators'><\/td>"),v.append(tt),s=i.columns[nt],s.searchoptions.id=n.jgrid.randId(),f&&s.inputtype==="text"&&(s.searchoptions.size||(s.searchoptions.size=10)),p=n.jgrid.createEl.call(a,s.inputtype,s.searchoptions,t.data,!0,u.p.ajaxSelectOptions||{},!0),(t.op==="nu"||t.op==="nn")&&(n(p).attr("readonly","true"),n(p).attr("disabled","true")),d=n("<select class='selectopts'><\/select>"),tt.append(d),d.bind("change",function(){t.op=n(d).val();h=n(this).parents("tr:first");var i=n(".input-elm",h)[0];t.op==="nu"||t.op==="nn"?(t.data="",i.tagName.toUpperCase()!=="SELECT"&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):(i.tagName.toUpperCase()==="SELECT"&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled"));u.onchange()}),l=s.searchoptions.sopt?s.searchoptions.sopt:u.p.sopt?u.p.sopt:n.inArray(s.searchtype,u.p.strarr)!==-1?u.p.stropts:u.p.numopts,w="",n.each(u.p.ops,function(){y.push(this.oper)}),o=0;o<l.length;o++)c=n.inArray(l[o],y),c!==-1&&(b=t.op===u.p.ops[c].oper?" selected='selected'":"",w+="<option value='"+u.p.ops[c].oper+"'"+b+">"+u.p.ops[c].text+"<\/option>");return d.append(w),it=n("<td class='data'><\/td>"),v.append(it),it.append(p),n.jgrid.bindEv.call(a,p,s.searchoptions),n(p).addClass("input-elm").bind("change",function(){t.data=s.inputtype==="custom"?s.searchoptions.custom_value.call(a,n(this).children(".customelement:first"),"get"):n(this).val();u.onchange()}),rt=n("<td><\/td>"),v.append(rt),this.p.ruleButtons===!0&&(ut=n("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),rt.append(ut),ut.bind("click",function(){for(o=0;o<r.rules.length;o++)if(r.rules[o]===t){r.rules.splice(o,1);break}return u.reDraw(),u.onchange(),!1})),v};this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(r){alert(r)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(u){alert(u)}return(t+=")",t==="()")?"":t};this.getStringForRule=function(t){for(var s="",r="",e,u,f=0;f<this.p.ops.length;f++)if(this.p.ops[f].oper===t.op){s=this.p.operands.hasOwnProperty(t.op)?this.p.operands[t.op]:"";r=this.p.ops[f].oper;break}for(f=0;f<this.p.columns.length;f++)if(this.p.columns[f].name===t.field){e=this.p.columns[f];break}return e==undefined?"":(u=t.data,(r==="bw"||r==="bn")&&(u=u+"%"),(r==="ew"||r==="en")&&(u="%"+u),(r==="cn"||r==="nc")&&(u="%"+u+"%"),(r==="in"||r==="ni")&&(u=" ("+u+")"),i.errorcheck&&o(t.data,e),n.inArray(e.searchtype,["int","integer","float","number","currency"])!==-1||r==="nn"||r==="nu"?t.field+" "+s+" "+u:t.field+" "+s+' "'+u+'"')};this.resetFilter=function(){this.p.filter=n.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){n("th.ui-state-error",this).html("");n("tr.error",this).hide()};this.showError=function(){n("th.ui-state-error",this).html(this.p.errmsg);n("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&o(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return(r+=")",r==="()")?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}})};n.extend(n.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){typeof t=="string"&&(t=n.jgrid.parse(t));this.each(function(){this.p.filter=t;this.reDraw();this.onchange()})}})}(jQuery),function(n){"use strict";var t={};n.jgrid.extend({searchGrid:function(t){return t=n.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},n.jgrid.search,t||{}),this.each(function(){function w(u){h=n(i).triggerHandler("jqGridFilterBeforeShow",[u]);h===undefined&&(h=!0);h&&n.isFunction(t.beforeShowSearch)&&(h=t.beforeShowSearch.call(i,u));h&&(n.jgrid.viewModal("#"+n.jgrid.jqID(f.themodal),{gbox:"#gbox_"+n.jgrid.jqID(r),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),n(i).triggerHandler("jqGridFilterAfterShow",[u]),n.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(i,u))}var i=this,y;if(i.grid){var r="fbox_"+i.p.id,h=!0,u=!0,f={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},s=i.p.postData[t.sFilter];if(typeof s=="string"&&(s=n.jgrid.parse(s)),t.recreateFilter===!0&&n("#"+n.jgrid.jqID(f.themodal)).remove(),n("#"+n.jgrid.jqID(f.themodal))[0]!==undefined)w(n("#fbox_"+n.jgrid.jqID(+i.p.id)));else{var e=n("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'><\/div><\/div>").insertBefore("#gview_"+n.jgrid.jqID(i.p.id)),b="left",k="";i.p.direction==="rtl"&&(b="right",k=" style='text-align:left'",e.attr("dir","rtl"));var o=n.extend([],i.p.colModel),g="<a id='"+r+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'><\/span>"+t.Find+"<\/a>",nt="<a id='"+r+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'><\/span>"+t.Reset+"<\/a>",p="",c="",v,l=!1,d,a=-1;t.showQuery&&(p="<a id='"+r+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'><\/span>Query<\/a>");t.columns.length?(o=t.columns,a=0,v=o[0].index||o[0].name):n.each(o,function(n,t){if(t.label||(t.label=i.p.colNames[n]),!l){var r=t.search===undefined?!0:t.search,u=t.hidden===!0,f=t.searchoptions&&t.searchoptions.searchhidden===!0;(f&&r||r&&!u)&&(l=!0,v=t.index||t.name,a=n)}});(!s&&v||t.multipleSearch===!1)&&(y="eq",a>=0&&o[a].searchoptions&&o[a].searchoptions.sopt?y=o[a].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(y=t.sopt[0]),s={groupOp:"AND",rules:[{field:v,op:y,data:""}]});l=!1;t.tmplNames&&t.tmplNames.length&&(l=!0,c=t.tmplLabel,c+="<select class='ui-template'>",c+="<option value='default'>Default<\/option>",n.each(t.tmplNames,function(n,t){c+="<option value='"+n+"'>"+t+"<\/option>"}),c+="<\/select>");d="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr><td class='EditButton' style='text-align:"+b+"'>"+nt+c+"<\/td><td class='EditButton' "+k+">"+p+g+"<\/td><\/tr><\/tbody><\/table>";r=n.jgrid.jqID(r);n("#"+r).jqFilter({columns:o,filter:t.loadDefaults?s:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,ops:t.odata,operands:t.operands,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function(){this.p.showQuery&&n(".query",this).html(this.toUserFriendlyString());n.isFunction(t.afterChange)&&t.afterChange.call(i,n("#"+r),t)},direction:i.p.direction,id:i.p.id});e.append(d);l&&t.tmplFilters&&t.tmplFilters.length&&n(".ui-template",e).bind("change",function(){var i=n(this).val();return i==="default"?n("#"+r).jqFilter("addFilter",s):n("#"+r).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1});t.multipleGroup===!0&&(t.multipleSearch=!0);n(i).triggerHandler("jqGridFilterInitialize",[n("#"+r)]);n.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(i,n("#"+r));t.gbox="#gbox_"+r;t.layer?n.jgrid.createModal(f,e,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0],"#"+n.jgrid.jqID(t.layer),{position:"relative"}):n.jgrid.createModal(f,e,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0]);(t.searchOnEnter||t.closeOnEscape)&&n("#"+n.jgrid.jqID(f.themodal)).keydown(function(i){var u=n(i.target);return t.searchOnEnter&&i.which===13&&!u.hasClass("add-group")&&!u.hasClass("add-rule")&&!u.hasClass("delete-group")&&!u.hasClass("delete-rule")&&(!u.hasClass("fm-button")||!u.is("[id$=_query]"))?(n("#"+r+"_search").click(),!1):t.closeOnEscape&&i.which===27?(n("#"+n.jgrid.jqID(f.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0});p&&n("#"+r+"_query").bind("click",function(){return n(".queryresult",e).toggle(),!1});t.stringResult===undefined&&(t.stringResult=t.multipleSearch);n("#"+r+"_search").bind("click",function(){var s=n("#"+r),e={},h,o;if(s.find(".input-elm:focus").change(),o=s.jqFilter("filterData"),t.errorcheck&&(s[0].hideError(),t.showQuery||s.jqFilter("toSQLString"),s[0].p.error))return s[0].showError(),!1;if(t.stringResult){try{h=xmlJsonClass.toJson(o,"","",!1)}catch(c){try{h=JSON.stringify(o)}catch(l){}}typeof h=="string"&&(e[t.sFilter]=h,n.each([t.sField,t.sValue,t.sOper],function(){e[this]=""}))}else t.multipleSearch?(e[t.sFilter]=o,n.each([t.sField,t.sValue,t.sOper],function(){e[this]=""})):(e[t.sField]=o.rules[0].field,e[t.sValue]=o.rules[0].data,e[t.sOper]=o.rules[0].op,e[t.sFilter]="");return i.p.search=!0,n.extend(i.p.postData,e),u=n(i).triggerHandler("jqGridFilterSearch"),u===undefined&&(u=!0),u&&n.isFunction(t.onSearch)&&(u=t.onSearch.call(i,i.p.filters)),u!==!1&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&n.jgrid.hideModal("#"+n.jgrid.jqID(f.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});n("#"+r+"_reset").bind("click",function(){var o={},s=n("#"+r);return i.p.search=!1,i.p.resetsearch=!0,t.multipleSearch===!1?o[t.sField]=o[t.sValue]=o[t.sOper]="":o[t.sFilter]="",s[0].resetFilter(),l&&n(".ui-template",e).val("default"),n.extend(i.p.postData,o),u=n(i).triggerHandler("jqGridFilterReset"),u===undefined&&(u=!0),u&&n.isFunction(t.onReset)&&(u=t.onReset.call(i)),u!==!1&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&n.jgrid.hideModal("#"+n.jgrid.jqID(f.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});w(n("#"+r));n(".fm-button:not(.ui-state-disabled)",e).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})}}})},editGridRow:function(i,r){return r=n.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},n.jgrid.edit,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function bt(){return n(o+" > tbody > tr > td > .FormElement").each(function(){var i=n(".customelement",this),r,t,e,s;if(i.length)r=i[0],t=n(r).attr("name"),n.each(u.p.colModel,function(){if(this.name===t&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(f[t]=this.editoptions.custom_value.call(u,n("#"+n.jgrid.jqID(t),o),"get"),f[t]===undefined)throw"e1";}catch(i){i==="e1"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,i.message,n.jgrid.edit.bClose)}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).is(":checked")?f[this.name]=n(this).val():(e=n(this).attr("offval"),f[this.name]=e);break;case"select-one":f[this.name]=n("option:selected",this).val();break;case"select-multiple":f[this.name]=n(this).val();f[this.name]=f[this.name]?f[this.name].join(","):"";s=[];n("option:selected",this).each(function(t,i){s[t]=n(i).text()});break;case"password":case"text":case"textarea":case"button":f[this.name]=n(this).val()}u.p.autoencode&&(f[this.name]=n.jgrid.htmlEncode(f[this.name]))}}),!0}function ni(i,r,f,o){for(var h,y,c,a=0,s,b,v,k=[],l=!1,d="",w,p=1;p<=o;p++)d+="<td class='CaptionTD'>&#160;<\/td><td class='DataTD'>&#160;<\/td>";return i!=="_empty"&&(l=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(p){var tt;if(h=this.name,y=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,b=y?"style='display:none'":"",h!=="cb"&&h!=="subgrid"&&this.editable===!0&&h!=="rn"){if(l===!1)s="";else if(h===r.p.ExpandColumn&&r.p.treeGrid===!0)s=n("td[role='gridcell']:eq("+p+")",r.rows[l]).text();else{try{s=n.unformat.call(r,n("td[role='gridcell']:eq("+p+")",r.rows[l]),{rowId:i,colModel:this},p)}catch(rt){s=this.edittype&&this.edittype==="textarea"?n("td[role='gridcell']:eq("+p+")",r.rows[l]).text():n("td[role='gridcell']:eq("+p+")",r.rows[l]).html()}s&&s!=="&nbsp;"&&s!=="&#160;"&&(s.length!==1||s.charCodeAt(0)!==160)||(s="")}var w=n.extend({},this.editoptions||{},{id:h,name:h}),g=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),nt=parseInt(g.rowpos,10)||a+1,it=parseInt((parseInt(g.colpos,10)||1)*2,10);i==="_empty"&&w.defaultValue&&(s=n.isFunction(w.defaultValue)?w.defaultValue.call(u):w.defaultValue);this.edittype||(this.edittype="text");u.p.autoencode&&(s=n.jgrid.htmlDecode(s));v=n.jgrid.createEl.call(u,this.edittype,w,s,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[h]=s);n(v).addClass("FormElement");n.inArray(this.edittype,["text","textarea","password","select"])>-1&&n(v).addClass("ui-widget-content ui-corner-all");c=n(f).find("tr[rowpos="+nt+"]");g.rowabove&&(tt=n("<tr><td class='contentinfo' colspan='"+o*2+"'>"+g.rowcontent+"<\/td><\/tr>"),n(f).append(tt),tt[0].rp=nt);c.length===0&&(c=n("<tr "+b+" rowpos='"+nt+"'><\/tr>").addClass("FormData").attr("id","tr_"+h),n(c).append(d),n(f).append(c),c[0].rp=nt);n("td:eq("+(it-2)+")",c[0]).html(g.label===undefined?r.p.colNames[p]:g.label);n("td:eq("+(it-1)+")",c[0]).append(g.elmprefix).append(v).append(g.elmsuffix);this.edittype==="custom"&&n.isFunction(w.custom_value)&&w.custom_value.call(u,n("#"+h,"#"+e),"set",s);n.jgrid.bindEv.call(u,v,w);k[a]=p;a++}}),a>0&&(w=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(o*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/><\/td><\/tr>"),w[0].rp=a+999,n(f).append(w),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[r.p.id+"_id"]=i)),k}function ft(i,r,f){var s,p=0,e,h,a,l,v,c,y;if((t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData={},t[u.p.id]._savedData[r.p.id+"_id"]=i),c=r.p.colModel,i==="_empty"){n(c).each(function(){s=this.name;a=n.extend({},this.editoptions||{});h=n("#"+n.jgrid.jqID(s),"#"+f);h&&h.length&&h[0]!==null&&(l="",this.edittype==="custom"&&n.isFunction(a.custom_value)?a.custom_value.call(u,n("#"+s,"#"+f),"set",l):a.defaultValue?(l=n.isFunction(a.defaultValue)?a.defaultValue.call(u):a.defaultValue,h[0].type==="checkbox"?(v=l.toLowerCase(),v.search(/(false|f|0|no|n|off|undefined)/i)<0&&v!==""?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=l):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(l)):h[0].type==="checkbox"?(h[0].checked=!1,h[0].defaultChecked=!1,l=n(h).attr("offval")):h[0].type&&h[0].type.substr(0,6)==="select"?h[0].selectedIndex=0:h.val(l),(t[u.p.id].checkOnSubmit===!0||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[s]=l))});n("#id_g","#"+f).val(i);return}(y=n(r).jqGrid("getInd",i,!0),y)&&(n('td[role="gridcell"]',y).each(function(o){var h,l;if(s=c[o].name,s!=="cb"&&s!=="subgrid"&&s!=="rn"&&c[o].editable===!0){if(s===r.p.ExpandColumn&&r.p.treeGrid===!0)e=n(this).text();else try{e=n.unformat.call(r,n(this),{rowId:i,colModel:c[o]},o)}catch(v){e=c[o].edittype==="textarea"?n(this).text():n(this).html()}u.p.autoencode&&(e=n.jgrid.htmlDecode(e));(t[u.p.id].checkOnSubmit===!0||t[u.p.id].checkOnUpdate)&&(t[u.p.id]._savedData[s]=e);s=n.jgrid.jqID(s);switch(c[o].edittype){case"password":case"text":case"button":case"image":case"textarea":(e==="&nbsp;"||e==="&#160;"||e.length===1&&e.charCodeAt(0)===160)&&(e="");n("#"+s,"#"+f).val(e);break;case"select":h=e.split(",");h=n.map(h,function(t){return n.trim(t)});n("#"+s+" option","#"+f).each(function(){this.selected=c[o].editoptions.multiple||n.trim(e)!==n.trim(n(this).text())&&h[0]!==n.trim(n(this).text())&&h[0]!==n.trim(n(this).val())?c[o].editoptions.multiple?n.inArray(n.trim(n(this).text()),h)>-1||n.inArray(n.trim(n(this).val()),h)>-1?!0:!1:!1:!0});break;case"checkbox":e=String(e);c[o].editoptions&&c[o].editoptions.value?(l=c[o].editoptions.value.split(":"),l[0]===e?n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})):(e=e.toLowerCase(),e.search(/(false|f|0|no|n|off|undefined)/i)<0&&e!==""?(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!0),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!0)):(n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("checked",!1),n("#"+s,"#"+f)[u.p.useProp?"prop":"attr"]("defaultChecked",!1)));break;case"custom":try{if(c[o].editoptions&&n.isFunction(c[o].editoptions.custom_value))c[o].editoptions.custom_value.call(u,n("#"+s,"#"+f),"set",e);else throw"e1";}catch(a){a==="e1"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,a.message,n.jgrid.edit.bClose)}}p++}}),p>0&&n("#id_g",o).val(i))}function ti(){n.each(u.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&f.hasOwnProperty(t.name)&&f[t.name]===""&&(f[t.name]="null")})}function b(){var b,i=[!0,"",""],k={},a=u.p.prmNames,l,y,d,nt,g,v=n(u).triggerHandler("jqGridAddEditBeforeCheckValues",[n("#"+e),h]),it,tt,p,w;v&&typeof v=="object"&&(f=v);n.isFunction(t[u.p.id].beforeCheckValues)&&(v=t[u.p.id].beforeCheckValues.call(u,f,n("#"+e),h),v&&typeof v=="object"&&(f=v));for(d in f)if(f.hasOwnProperty(d)&&(i=n.jgrid.checkValues.call(u,f[d],d),i[0]===!1))break;if(ti(),i[0]&&(k=n(u).triggerHandler("jqGridAddEditClickSubmit",[t[u.p.id],f,h]),k===undefined&&n.isFunction(t[u.p.id].onclickSubmit)&&(k=t[u.p.id].onclickSubmit.call(u,t[u.p.id],f,h)||{}),i=n(u).triggerHandler("jqGridAddEditBeforeSubmit",[f,n("#"+e),h]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[u.p.id].beforeSubmit)&&(i=t[u.p.id].beforeSubmit.call(u,f,n("#"+e),h))),i[0]&&!t[u.p.id].processing){if(t[u.p.id].processing=!0,n("#sData",o+"_2").addClass("ui-state-active"),y=a.oper,l=a.id,f[y]=n.trim(f[u.p.id+"_id"])==="_empty"?a.addoper:a.editoper,f[y]!==a.addoper?f[l]=f[u.p.id+"_id"]:f[l]===undefined&&(f[l]=f[u.p.id+"_id"]),delete f[u.p.id+"_id"],f=n.extend(f,t[u.p.id].editData,k),u.p.treeGrid===!0){f[y]===a.addoper&&(nt=n(u).jqGrid("getGridParam","selrow"),it=u.p.treeGridModel==="adjacency"?u.p.treeReader.parent_id_field:"parent_id",f[it]=nt);for(g in u.p.treeReader)if(u.p.treeReader.hasOwnProperty(g)&&(tt=u.p.treeReader[g],f.hasOwnProperty(tt))){if(f[y]===a.addoper&&g==="parent_id_field")continue;delete f[tt]}}f[l]=n.jgrid.stripPref(u.p.idPrefix,f[l]);p=n.extend({url:t[u.p.id].url||n(u).jqGrid("getGridParam","editurl"),type:t[u.p.id].mtype,data:n.isFunction(t[u.p.id].serializeEditData)?t[u.p.id].serializeEditData.call(u,f):f,complete:function(v,p){var w;if(f[l]=u.p.idPrefix+f[l],v.status>=300&&v.status!==304?(i[0]=!1,i[1]=n(u).triggerHandler("jqGridAddEditErrorTextFormat",[v,h]),i[1]=n.isFunction(t[u.p.id].errorTextFormat)?t[u.p.id].errorTextFormat.call(u,v,h):p+" Status: '"+v.statusText+"'. Error code: "+v.status):(i=n(u).triggerHandler("jqGridAddEditAfterSubmit",[v,f,h]),i===undefined&&(i=[!0,"",""]),i[0]&&n.isFunction(t[u.p.id].afterSubmit)&&(i=t[u.p.id].afterSubmit.call(u,v,f,h))),i[0]===!1)n("#FormError>td",o).html(i[1]),n("#FormError",o).show();else if(u.p.autoencode&&n.each(f,function(t,i){f[t]=n.jgrid.htmlDecode(i)}),f[y]===a.addoper?(i[2]||(i[2]=n.jgrid.randId()),f[l]=i[2],t[u.p.id].reloadAfterSubmit?n(u).trigger("reloadGrid"):u.p.treeGrid===!0?n(u).jqGrid("addChildNode",i[2],nt,f):n(u).jqGrid("addRowData",i[2],f,r.addedrow),t[u.p.id].closeAfterAdd?(u.p.treeGrid!==!0&&n(u).jqGrid("setSelection",i[2]),n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose})):t[u.p.id].clearAfterAdd&&ft("_empty",u,e)):(t[u.p.id].reloadAfterSubmit?(n(u).trigger("reloadGrid"),t[u.p.id].closeAfterEdit||setTimeout(function(){n(u).jqGrid("setSelection",f[l])},1e3)):u.p.treeGrid===!0?n(u).jqGrid("setTreeRow",f[l],f):n(u).jqGrid("setRowData",f[l],f),t[u.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose})),n.isFunction(t[u.p.id].afterComplete)&&(b=v,setTimeout(function(){n(u).triggerHandler("jqGridAddEditAfterComplete",[b,f,n("#"+e),h]);t[u.p.id].afterComplete.call(u,b,f,n("#"+e),h);b=null},500)),(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(n("#"+e).data("disabled",!1),t[u.p.id]._savedData[u.p.id+"_id"]!=="_empty"))for(w in t[u.p.id]._savedData)t[u.p.id]._savedData.hasOwnProperty(w)&&f[w]&&(t[u.p.id]._savedData[w]=f[w]);t[u.p.id].processing=!1;n("#sData",o+"_2").removeClass("ui-state-active");try{n(":input:visible","#"+e)[0].focus()}catch(k){}}},n.jgrid.ajaxOptions,t[u.p.id].ajaxEditOptions);p.url||t[u.p.id].useDataProxy||(n.isFunction(u.p.dataProxy)?t[u.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl));i[0]&&(t[u.p.id].useDataProxy?(w=u.p.dataProxy.call(u,p,"set_"+u.p.id),w===undefined&&(w=[!0,""]),w[0]===!1?(i[0]=!1,i[1]=w[1]||"Error deleting the selected row!"):(p.data.oper===a.addoper&&t[u.p.id].closeAfterAdd&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}),p.data.oper===a.editoper&&t[u.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}))):n.ajax(p))}i[0]===!1&&(n("#FormError>td",o).html(i[1]),n("#FormError",o).show())}function kt(n,t){var r=!1;for(var i in n)if(n.hasOwnProperty(i)&&n[i]!=t[i]){r=!0;break}return r}function a(){var i=!0;return n("#FormError",o).hide(),t[u.p.id].checkOnUpdate&&(f={},bt(),w=kt(f,t[u.p.id]._savedData),w&&(n("#"+e).data("disabled",!0),n(".confirm","#"+s.themodal).show(),i=!1)),i}function ii(){var t;if(i!=="_empty"&&u.p.savedRow!==undefined&&u.p.savedRow.length>0&&n.isFunction(n.fn.jqGrid.restoreRow))for(t=0;t<u.p.savedRow.length;t++)if(u.p.savedRow[t].id==i){n(u).jqGrid("restoreRow",i);break}}function et(t,i){var r=i[1].length-1;t===0?n("#pData",o+"_2").addClass("ui-state-disabled"):i[1][t-1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?n("#pData",o+"_2").addClass("ui-state-disabled"):n("#pData",o+"_2").removeClass("ui-state-disabled");t===r?n("#nData",o+"_2").addClass("ui-state-disabled"):i[1][t+1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?n("#nData",o+"_2").addClass("ui-state-disabled"):n("#nData",o+"_2").removeClass("ui-state-disabled")}function ot(){var t=n(u).jqGrid("getDataIDs"),i=n("#id_g",o).val(),r=n.inArray(i,t);return[r,t]}var u=this,ut,y,nt,ct,lt,tt,at;if(u.grid&&i){var c=u.p.id,e="FrmGrid_"+c,it="TblGrid_"+c,o="#"+n.jgrid.jqID(it),s={themodal:"editmod"+c,modalhead:"edithd"+c,modalcontent:"editcnt"+c,scrollelm:e},vt=n.isFunction(t[u.p.id].beforeShowForm)?t[u.p.id].beforeShowForm:!1,yt=n.isFunction(t[u.p.id].afterShowForm)?t[u.p.id].afterShowForm:!1,pt=n.isFunction(t[u.p.id].beforeInitData)?t[u.p.id].beforeInitData:!1,wt=n.isFunction(t[u.p.id].onInitializeForm)?t[u.p.id].onInitializeForm:!1,l=!0,p=1,rt=0,f,w,h;e=n.jgrid.jqID(e);i==="new"?(i="_empty",h="add",r.caption=t[u.p.id].addCaption):(r.caption=t[u.p.id].editCaption,h="edit");r.recreateForm||n(u).data("formProp")&&n.extend(t[n(this)[0].p.id],n(u).data("formProp"));ut=!0;r.checkOnUpdate&&r.jqModal&&!r.modal&&(ut=!1);var ri=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",ui=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",dt=n("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:"+ui+";overflow:auto;position:relative;height:"+ri+";'><\/form>").data("disabled",!1),v=n("<table id='"+it+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>");if(l=n(u).triggerHandler("jqGridAddEditBeforeInitData",[n("#"+e),h]),l===undefined&&(l=!0),l&&pt&&(l=pt.call(u,n("#"+e),h)),l!==!1){ii();n(u.p.colModel).each(function(){var n=this.formoptions;p=Math.max(p,n?n.colpos||0:0);rt=Math.max(rt,n?n.rowpos||0:0)});n(dt).append(v);y=n("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+p*2+"'><\/td><\/tr>");y[0].rp=0;n(v).append(y);y=n("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+p*2+"'>"+t[u.p.id].topinfo+"<\/td><\/tr>");y[0].rp=0;n(v).append(y);var k=u.p.direction==="rtl"?!0:!1,fi=k?"nData":"pData",ei=k?"pData":"nData";ni(i,u,v,p);var gt="<a id='"+fi+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/a>",d="<a id='"+ei+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/a>",st="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"<\/a>",ht="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"<\/a>",g="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+it+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(k?d+gt:gt+d)+"<\/td><td class='EditButton'>"+st+ht+"<\/td><\/tr>";g+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t[u.p.id].bottominfo+"<\/td><\/tr>";g+="<\/tbody><\/table>";rt>0&&(nt=[],n.each(n(v)[0].rows,function(n,t){nt[n]=t}),nt.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(nt,function(t,i){n("tbody",v).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(c);ct=!1;r.closeOnEscape===!0&&(r.closeOnEscape=!1,ct=!0);lt=n("<div><\/div>").append(dt).append(g);n.jgrid.createModal(s,lt,t[n(this)[0].p.id],"#gview_"+n.jgrid.jqID(u.p.id),n("#gbox_"+n.jgrid.jqID(u.p.id))[0]);k&&(n("#pData, #nData",o+"_2").css("float","right"),n(".EditButton",o+"_2").css("text-align","left"));t[u.p.id].topinfo&&n(".tinfo",o).show();t[u.p.id].bottominfo&&n(".binfo",o+"_2").show();lt=null;g=null;n("#"+n.jgrid.jqID(s.themodal)).keydown(function(i){var f=i.target;if(n("#"+e).data("disabled")===!0)return!1;if(t[u.p.id].savekey[0]===!0&&i.which===t[u.p.id].savekey[1]&&f.tagName!=="TEXTAREA")return n("#sData",o+"_2").trigger("click"),!1;if(i.which===27)return a()?(ct&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1;if(t[u.p.id].navkeys[0]===!0){if(n("#id_g",o).val()==="_empty")return!0;if(i.which===t[u.p.id].navkeys[1])return n("#pData",o+"_2").trigger("click"),!1;if(i.which===t[u.p.id].navkeys[2])return n("#nData",o+"_2").trigger("click"),!1}});r.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+n.jgrid.jqID(s.themodal)).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(s.themodal)).unbind("click").click(function(){return a()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1}));r.saveicon=n.extend([!0,"left","ui-icon-disk"],r.saveicon);r.closeicon=n.extend([!0,"left","ui-icon-close"],r.closeicon);r.saveicon[0]===!0&&n("#sData",o+"_2").addClass(r.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'><\/span>");r.closeicon[0]===!0&&n("#cData",o+"_2").addClass(r.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'><\/span>");(t[u.p.id].checkOnSubmit||t[u.p.id].checkOnUpdate)&&(st="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"<\/a>",d="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"<\/a>",ht="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"<\/a>",tt=r.zIndex||999,tt++,n("<div class='"+r.overlayClass+" jqgrid-overlay confirm' style='z-index:"+tt+";display:none;'>&#160;<\/div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(tt+1)+"'>"+r.saveData+"<br/><br/>"+st+d+ht+"<\/div>").insertAfter("#"+e),n("#sNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return b(),n("#"+e).data("disabled",!1),n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),!1}),n("#nNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),n("#"+e).data("disabled",!1),setTimeout(function(){n(":input:visible","#"+e)[0].focus()},0),!1}),n("#cNew","#"+n.jgrid.jqID(s.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(s.themodal)).hide(),n("#"+e).data("disabled",!1),n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1}));n(u).triggerHandler("jqGridAddEditInitializeForm",[n("#"+e),h]);wt&&wt.call(u,n("#"+e),h);i!=="_empty"&&t[u.p.id].viewPagerButtons?n("#pData,#nData",o+"_2").show():n("#pData,#nData",o+"_2").hide();n(u).triggerHandler("jqGridAddEditBeforeShowForm",[n("#"+e),h]);vt&&vt.call(u,n("#"+e),h);n("#"+n.jgrid.jqID(s.themodal)).data("onClose",t[u.p.id].onClose);n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,overlayClass:r.overlayClass,onHide:function(t){n(u).data("formProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:n(t.w).width(),height:n(t.w).height(),dataheight:n("#"+e).height(),datawidth:n("#"+e).width()});t.w.remove();t.o&&t.o.remove()}});ut||n("."+n.jgrid.jqID(r.overlayClass)).click(function(){return a()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1});n(".fm-button","#"+n.jgrid.jqID(s.themodal)).hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});n("#sData",o+"_2").click(function(){return f={},n("#FormError",o).hide(),bt(),f[u.p.id+"_id"]==="_empty"?b():r.checkOnSubmit===!0?(w=kt(f,t[u.p.id]._savedData),w?(n("#"+e).data("disabled",!0),n(".confirm","#"+n.jgrid.jqID(s.themodal)).show()):b()):b(),!1});n("#cData",o+"_2").click(function(){return a()?(n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(c),jqm:r.jqModal,onClose:t[u.p.id].onClose}),!1):!1});n("#nData",o+"_2").click(function(){var t,i;if(!a())return!1;if(n("#FormError",o).hide(),t=ot(),t[0]=parseInt(t[0],10),t[0]!==-1&&t[1][t[0]+1]){if((n(u).triggerHandler("jqGridAddEditClickPgButtons",["next",n("#"+e),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&(i=r.onclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]]),i!==undefined&&i===!1))||n("#"+n.jgrid.jqID(t[1][t[0]+1])).hasClass("ui-state-disabled"))return!1;ft(t[1][t[0]+1],u,e);n(u).jqGrid("setSelection",t[1][t[0]+1]);n(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",n("#"+e),t[1][t[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"next",n("#"+e),t[1][t[0]+1]);et(t[0]+1,t)}return!1});n("#pData",o+"_2").click(function(){var t,i;if(!a())return!1;if(n("#FormError",o).hide(),t=ot(),t[0]!==-1&&t[1][t[0]-1]){if((n(u).triggerHandler("jqGridAddEditClickPgButtons",["prev",n("#"+e),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&(i=r.onclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]]),i!==undefined&&i===!1))||n("#"+n.jgrid.jqID(t[1][t[0]-1])).hasClass("ui-state-disabled"))return!1;ft(t[1][t[0]-1],u,e);n(u).jqGrid("setSelection",t[1][t[0]-1]);n(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",n("#"+e),t[1][t[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"prev",n("#"+e),t[1][t[0]-1]);et(t[0]-1,t)}return!1});n(u).triggerHandler("jqGridAddEditAfterShowForm",[n("#"+e),h]);yt&&yt.call(u,n("#"+e),h);at=ot();et(at[0],at)}}})},viewGridRow:function(i,r){return r=n.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},n.jgrid.view,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function p(){(t[u.p.id].closeOnEscape===!0||t[u.p.id].navkeys[0]===!0)&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(s.modalhead)).focus()},0)}function et(t,i,u,f){for(var o,s,e,h=0,c,k,d=[],l=!1,tt="<td class='CaptionTD form-view-label ui-widget-content' width='"+r.labelswidth+"'>&#160;<\/td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;<\/td>",g="",it=["integer","number","currency"],v=0,y=0,p,w,nt,b,a=1;a<=f;a++)g+=a===1?tt:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;<\/td><td class='DataTD form-view-data ui-widget-content'>&#160;<\/td>";return n(i.p.colModel).each(function(){s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1;s||this.align!=="right"||(this.formatter&&n.inArray(this.formatter,it)!==-1?v=Math.max(v,parseInt(this.width,10)):y=Math.max(y,parseInt(this.width,10)))}),p=v!==0?v:y!==0?y:0,l=n(i).jqGrid("getInd",t),n(i.p.colModel).each(function(t){var y;if(o=this.name,w=!1,s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=s?"style='display:none'":"",nt=typeof this.viewable!="boolean"?!0:this.viewable,o!=="cb"&&o!=="subgrid"&&o!=="rn"&&nt){c=l===!1?"":o===i.p.ExpandColumn&&i.p.treeGrid===!0?n("td:eq("+t+")",i.rows[l]).text():n("td:eq("+t+")",i.rows[l]).html();w=this.align==="right"&&p!==0?!0:!1;var r=n.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),a=parseInt(r.rowpos,10)||h+1,v=parseInt((parseInt(r.colpos,10)||1)*2,10);r.rowabove&&(y=n("<tr><td class='contentinfo' colspan='"+f*2+"'>"+r.rowcontent+"<\/td><\/tr>"),n(u).append(y),y[0].rp=a);e=n(u).find("tr[rowpos="+a+"]");e.length===0&&(e=n("<tr "+k+" rowpos='"+a+"'><\/tr>").addClass("FormData").attr("id","trv_"+o),n(e).append(g),n(u).append(e),e[0].rp=a);n("td:eq("+(v-2)+")",e[0]).html("<b>"+(r.label===undefined?i.p.colNames[t]:r.label)+"<\/b>");n("td:eq("+(v-1)+")",e[0]).append("<span>"+c+"<\/span>").attr("id","v_"+o);w&&n("td:eq("+(v-1)+") span",e[0]).css({"text-align":"right",width:p+"px"});d[h]=t;h++}}),h>0&&(b=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(f*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/><\/td><\/tr>"),b[0].rp=h+99,n(u).append(b)),d}function nt(t,i){var r,u,s=0,e,o;(o=n(i).jqGrid("getInd",t,!0),o)&&(n("td",o).each(function(t){r=i.p.colModel[t].name;u=i.p.colModel[t].editrules&&i.p.colModel[t].editrules.edithidden===!0?!1:i.p.colModel[t].hidden===!0?!0:!1;r!=="cb"&&r!=="subgrid"&&r!=="rn"&&(e=r===i.p.ExpandColumn&&i.p.treeGrid===!0?n(this).text():n(this).html(),r=n.jgrid.jqID("v_"+r),n("#"+r+" span","#"+f).html(e),u&&n("#"+r,"#"+f).parents("tr:first").hide(),s++)}),s>0&&n("#id_g","#"+f).val(t))}function w(t,i){var r=i[1].length-1;t===0?n("#pData","#"+f+"_2").addClass("ui-state-disabled"):i[1][t-1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?n("#pData",f+"_2").addClass("ui-state-disabled"):n("#pData","#"+f+"_2").removeClass("ui-state-disabled");t===r?n("#nData","#"+f+"_2").addClass("ui-state-disabled"):i[1][t+1]!==undefined&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?n("#nData",f+"_2").addClass("ui-state-disabled"):n("#nData","#"+f+"_2").removeClass("ui-state-disabled")}function b(){var t=n(u).jqGrid("getDataIDs"),i=n("#id_g","#"+f).val(),r=n.inArray(i,t);return[r,t]}var u=this,a,k,d;if(u.grid&&i){var e=u.p.id,o="ViewGrid_"+n.jgrid.jqID(e),f="ViewTbl_"+n.jgrid.jqID(e),ut="ViewGrid_"+e,ft="ViewTbl_"+e,s={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,scrollelm:o},g=n.isFunction(t[u.p.id].beforeInitData)?t[u.p.id].beforeInitData:!1,h=!0,v=1,y=0;r.recreateForm||n(u).data("viewProp")&&n.extend(t[n(this)[0].p.id],n(u).data("viewProp"));var ot=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",st=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",tt=n("<form name='FormPost' id='"+ut+"' class='FormGrid' style='width:"+st+";overflow:auto;position:relative;height:"+ot+";'><\/form>"),c=n("<table id='"+ft+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody><\/tbody><\/table>");if(g&&(h=g.call(u,n("#"+o)),h===undefined&&(h=!0)),h!==!1){n(u.p.colModel).each(function(){var n=this.formoptions;v=Math.max(v,n?n.colpos||0:0);y=Math.max(y,n?n.rowpos||0:0)});n(tt).append(c);et(i,u,c,v);var l=u.p.direction==="rtl"?!0:!1,ht=l?"nData":"pData",ct=l?"pData":"nData",it="<a id='"+ht+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/a>",rt="<a id='"+ct+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/a>",lt="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bClose+"<\/a>";y>0&&(a=[],n.each(n(c)[0].rows,function(n,t){a[n]=t}),a.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(a,function(t,i){n("tbody",c).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(e);k=n("<div><\/div>").append(tt).append("<table border='0' class='EditTable' id='"+f+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+r.labelswidth+"'>"+(l?rt+it:it+rt)+"<\/td><td class='EditButton'>"+lt+"<\/td><\/tr><\/tbody><\/table>");n.jgrid.createModal(s,k,r,"#gview_"+n.jgrid.jqID(u.p.id),n("#gview_"+n.jgrid.jqID(u.p.id))[0]);l&&(n("#pData, #nData","#"+f+"_2").css("float","right"),n(".EditButton","#"+f+"_2").css("text-align","left"));r.viewPagerButtons||n("#pData, #nData","#"+f+"_2").hide();k=null;n("#"+s.themodal).keydown(function(i){if(i.which===27)return t[u.p.id].closeOnEscape&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:r.onClose}),!1;if(r.navkeys[0]===!0){if(i.which===r.navkeys[1])return n("#pData","#"+f+"_2").trigger("click"),!1;if(i.which===r.navkeys[2])return n("#nData","#"+f+"_2").trigger("click"),!1}});r.closeicon=n.extend([!0,"left","ui-icon-close"],r.closeicon);r.closeicon[0]===!0&&n("#cData","#"+f+"_2").addClass(r.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'><\/span>");n.isFunction(r.beforeShowForm)&&r.beforeShowForm.call(u,n("#"+o));n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,onHide:function(t){n(u).data("viewProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:n(t.w).width(),height:n(t.w).height(),dataheight:n("#"+o).height(),datawidth:n("#"+o).width()});t.w.remove();t.o&&t.o.remove()}});n(".fm-button:not(.ui-state-disabled)","#"+f+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});p();n("#cData","#"+f+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,onClose:r.onClose}),!1});n("#nData","#"+f+"_2").click(function(){n("#FormError","#"+f).hide();var t=b();return t[0]=parseInt(t[0],10),t[0]!==-1&&t[1][t[0]+1]&&(n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(u,"next",n("#"+o),t[1][t[0]]),nt(t[1][t[0]+1],u),n(u).jqGrid("setSelection",t[1][t[0]+1]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"next",n("#"+o),t[1][t[0]+1]),w(t[0]+1,t)),p(),!1});n("#pData","#"+f+"_2").click(function(){n("#FormError","#"+f).hide();var t=b();return t[0]!==-1&&t[1][t[0]-1]&&(n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(u,"prev",n("#"+o),t[1][t[0]]),nt(t[1][t[0]-1],u),n(u).jqGrid("setSelection",t[1][t[0]-1]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(u,"prev",n("#"+o),t[1][t[0]-1]),w(t[0]-1,t)),p(),!1});d=b();w(d[0],d)}}})},delGridRow:function(i,r){return r=n.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},n.jgrid.del,r||{}),t[n(this)[0].p.id]=r,this.each(function(){var u=this,k,d;if(u.grid&&i){var y=n.isFunction(t[u.p.id].beforeShowForm),p=n.isFunction(t[u.p.id].afterShowForm),l=n.isFunction(t[u.p.id].beforeInitData)?t[u.p.id].beforeInitData:!1,e=u.p.id,v={},o=!0,f="DelTbl_"+n.jgrid.jqID(e),c,w,a,b,g="DelTbl_"+e,s={themodal:"delmod"+e,modalhead:"delhd"+e,modalcontent:"delcnt"+e,scrollelm:f};if(n.isArray(i)&&(i=i.join()),n("#"+n.jgrid.jqID(s.themodal))[0]!==undefined){if(l&&(o=l.call(u,n("#"+f)),o===undefined&&(o=!0)),o===!1)return;n("#DelData>td","#"+f).text(i);n("#DelError","#"+f).hide();t[u.p.id].processing===!0&&(t[u.p.id].processing=!1,n("#dData","#"+f).removeClass("ui-state-active"));y&&t[u.p.id].beforeShowForm.call(u,n("#"+f));n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,jqM:!1,overlay:t[u.p.id].overlay,modal:t[u.p.id].modal});p&&t[u.p.id].afterShowForm.call(u,n("#"+f))}else{var nt=isNaN(t[u.p.id].dataheight)?t[u.p.id].dataheight:t[u.p.id].dataheight+"px",tt=isNaN(r.datawidth)?r.datawidth:r.datawidth+"px",h="<div id='"+g+"' class='formdata' style='width:"+tt+";overflow:auto;position:relative;height:"+nt+";'>";if(h+="<table class='DelTable'><tbody>",h+="<tr id='DelError' style='display:none'><td class='ui-state-error'><\/td><\/tr>",h+="<tr id='DelData' style='display:none'><td >"+i+"<\/td><\/tr>",h+='<tr><td class="delmsg" style="white-space:pre;">'+t[u.p.id].msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>",h+="<\/tbody><\/table><\/div>",k="<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"<\/a>",d="<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"<\/a>",h+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+f+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr><td class='DelButton EditButton'>"+k+"&#160;"+d+"<\/td><\/tr><\/tbody><\/table>",r.gbox="#gbox_"+n.jgrid.jqID(e),n.jgrid.createModal(s,h,r,"#gview_"+n.jgrid.jqID(u.p.id),n("#gview_"+n.jgrid.jqID(u.p.id))[0]),l&&(o=l.call(u,n("#"+f)),o===undefined&&(o=!0)),o===!1)return;n(".fm-button","#"+f+"_2").hover(function(){n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")});r.delicon=n.extend([!0,"left","ui-icon-scissors"],t[u.p.id].delicon);r.cancelicon=n.extend([!0,"left","ui-icon-cancel"],t[u.p.id].cancelicon);r.delicon[0]===!0&&n("#dData","#"+f+"_2").addClass(r.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'><\/span>");r.cancelicon[0]===!0&&n("#eData","#"+f+"_2").addClass(r.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'><\/span>");n("#dData","#"+f+"_2").click(function(){var i=[!0,""],l,o=n("#DelData>td","#"+f).text(),y,h;if(v={},n.isFunction(t[u.p.id].onclickSubmit)&&(v=t[u.p.id].onclickSubmit.call(u,t[u.p.id],o)||{}),n.isFunction(t[u.p.id].beforeSubmit)&&(i=t[u.p.id].beforeSubmit.call(u,o)),i[0]&&!t[u.p.id].processing){if(t[u.p.id].processing=!0,a=u.p.prmNames,c=n.extend({},t[u.p.id].delData,v),b=a.oper,c[b]=a.deloper,w=a.id,o=String(o).split(","),!o.length)return!1;for(l in o)o.hasOwnProperty(l)&&(o[l]=n.jgrid.stripPref(u.p.idPrefix,o[l]));c[w]=o.join();n(this).addClass("ui-state-active");y=n.extend({url:t[u.p.id].url||n(u).jqGrid("getGridParam","editurl"),type:t[u.p.id].mtype,data:n.isFunction(t[u.p.id].serializeDelData)?t[u.p.id].serializeDelData.call(u,c):c,complete:function(h,l){var a;if(h.status>=300&&h.status!==304?(i[0]=!1,i[1]=n.isFunction(t[u.p.id].errorTextFormat)?t[u.p.id].errorTextFormat.call(u,h):l+" Status: '"+h.statusText+"'. Error code: "+h.status):n.isFunction(t[u.p.id].afterSubmit)&&(i=t[u.p.id].afterSubmit.call(u,h,c)),i[0]===!1)n("#DelError>td","#"+f).html(i[1]),n("#DelError","#"+f).show();else{if(t[u.p.id].reloadAfterSubmit&&u.p.datatype!=="local")n(u).trigger("reloadGrid");else{if(u.p.treeGrid===!0)try{n(u).jqGrid("delTreeNode",u.p.idPrefix+o[0])}catch(v){}else for(a=0;a<o.length;a++)n(u).jqGrid("delRowData",u.p.idPrefix+o[a]);u.p.selrow=null;u.p.selarrrow=[]}n.isFunction(t[u.p.id].afterComplete)&&setTimeout(function(){t[u.p.id].afterComplete.call(u,h,o)},500)}t[u.p.id].processing=!1;n("#dData","#"+f+"_2").removeClass("ui-state-active");i[0]&&n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,onClose:t[u.p.id].onClose})}},n.jgrid.ajaxOptions,t[u.p.id].ajaxDelOptions);y.url||t[u.p.id].useDataProxy||(n.isFunction(u.p.dataProxy)?t[u.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.errors.nourl));i[0]&&(t[u.p.id].useDataProxy?(h=u.p.dataProxy.call(u,y,"del_"+u.p.id),h===undefined&&(h=[!0,""]),h[0]===!1?(i[0]=!1,i[1]=h[1]||"Error deleting the selected row!"):n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:r.jqModal,onClose:t[u.p.id].onClose})):n.ajax(y))}return i[0]===!1&&(n("#DelError>td","#"+f).html(i[1]),n("#DelError","#"+f).show()),!1});n("#eData","#"+f+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(s.themodal),{gb:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,onClose:t[u.p.id].onClose}),!1});y&&t[u.p.id].beforeShowForm.call(u,n("#"+f));n.jgrid.viewModal("#"+n.jgrid.jqID(s.themodal),{gbox:"#gbox_"+n.jgrid.jqID(e),jqm:t[u.p.id].jqModal,overlay:t[u.p.id].overlay,modal:t[u.p.id].modal});p&&t[u.p.id].afterShowForm.call(u,n("#"+f))}t[u.p.id].closeOnEscape===!0&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(s.modalhead)).focus()},0)}})},navGrid:function(t,i,r,u,f,e,o){return i=n.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},n.jgrid.nav,i||{}),this.each(function(){var v,s,y,k,h,c,g,a,l;if(!this.nav&&(v={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},s=this,s.grid&&typeof t=="string")){n("#"+v.themodal)[0]===undefined&&(i.alerttop||i.alertleft||(window.innerWidth!==undefined?(i.alertleft=window.innerWidth,i.alerttop=window.innerHeight):document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0?(i.alertleft=document.documentElement.clientWidth,i.alerttop=document.documentElement.clientHeight):(i.alertleft=1024,i.alerttop=768),i.alertleft=i.alertleft/2-parseInt(i.alertwidth,10)/2,i.alerttop=i.alerttop/2-25),n.jgrid.createModal(v,"<div>"+i.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex},"#gview_"+n.jgrid.jqID(s.p.id),n("#gbox_"+n.jgrid.jqID(s.p.id))[0],!0));var d=1,b,p=function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},w=function(){n(this).removeClass("ui-state-hover")};for(i.cloneToTop&&s.p.toppager&&(d=2),b=0;b<d;b++)c=n("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr><\/tr><\/tbody><\/table>"),g="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",b===0?(a=t,l=s.p.id,a===s.p.toppager&&(l+="_top",d=1)):(a=s.p.toppager,l=s.p.id+"_top"),s.p.direction==="rtl"&&n(c).attr("dir","rtl").css("float","right"),i.add&&(u=u||{},h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'><\/span>"+i.addtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.addtitle||"",id:u.id||"add_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||(n.isFunction(i.addfunc)?i.addfunc.call(s):n(s).jqGrid("editGridRow","new",u)),!1}).hover(p,w),h=null),i.edit&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),r=r||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'><\/span>"+i.edittext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.edittitle||"",id:r.id||"edit_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?n.isFunction(i.editfunc)?i.editfunc.call(s,t):n(s).jqGrid("editGridRow",t,r):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(p,w),h=null),i.view&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),o=o||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'><\/span>"+i.viewtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.viewtitle||"",id:o.id||"view_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t=s.p.selrow;t?n.isFunction(i.viewfunc)?i.viewfunc.call(s,t):n(s).jqGrid("viewGridRow",t,o):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(p,w),h=null),i.del&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),f=f||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'><\/span>"+i.deltext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.deltitle||"",id:f.id||"del_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){var t;s.p.multiselect?(t=s.p.selarrrow,t.length===0&&(t=null)):t=s.p.selrow;t?n.isFunction(i.delfunc)?i.delfunc.call(s,t):n(s).jqGrid("delGridRow",t,f):(n.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+n.jgrid.jqID(s.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(p,w),h=null),(i.add||i.edit||i.del||i.view)&&n("tr",c).append(g),i.search&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),e=e||{},n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'><\/span>"+i.searchtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.searchtitle||"",id:e.id||"search_"+l}).click(function(){return n(this).hasClass("ui-state-disabled")||(n.isFunction(i.searchfunc)?i.searchfunc.call(s,e):n(s).jqGrid("searchGrid",e)),!1}).hover(p,w),e.showOnLoad&&e.showOnLoad===!0&&n(h,c).click(),h=null),i.refresh&&(h=n("<td class='ui-pg-button ui-corner-all'><\/td>"),n(h).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'><\/span>"+i.refreshtext+"<\/div>"),n("tr",c).append(h),n(h,c).attr({title:i.refreshtitle||"",id:"refresh_"+l}).click(function(){if(!n(this).hasClass("ui-state-disabled")){n.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(s);s.p.search=!1;s.p.resetsearch=!0;try{var t=s.p.id;s.p.postData.filters="";try{n("#fbox_"+n.jgrid.jqID(t)).jqFilter("resetFilter")}catch(r){}n.isFunction(s.clearToolbar)&&s.clearToolbar.call(s,!1)}catch(u){}switch(i.refreshstate){case"firstpage":n(s).trigger("reloadGrid",[{page:1}]);break;case"current":n(s).trigger("reloadGrid",[{current:!0}])}n.isFunction(i.afterRefresh)&&i.afterRefresh.call(s)}return!1}).hover(p,w),h=null),k=n(".ui-jqgrid").css("font-size")||"11px",n("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ><\/div>"),y=n(c).clone().appendTo("#testpg2").width(),n("#testpg2").remove(),n(a+"_"+i.position,a).append(c),s.p._nvtd&&(y>s.p._nvtd[0]&&(n(a+"_"+i.position,a).width(y),s.p._nvtd[0]=y),s.p._nvtd[1]=y),k=null,y=null,c=null,this.nav=!0}})},navButtonAdd:function(t,i){return i=n.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){var r,f,u;if(this.grid&&(typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t)),r=n(".navtable",t)[0],f=this,r)){if(i.id&&n("#"+n.jgrid.jqID(i.id),r)[0]!==undefined)return;u=n("<td><\/td>");i.buttonicon.toString().toUpperCase()==="NONE"?n(u).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"<\/div>"):n(u).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'><\/span>"+i.caption+"<\/div>");i.id&&n(u).attr("id",i.id);i.position==="first"?r.rows[0].cells.length===0?n("tr",r).append(u):n("tr td:eq(0)",r).before(u):n("tr",r).append(u);n(u,r).attr("title",i.title||"").click(function(t){return n(this).hasClass("ui-state-disabled")||n.isFunction(i.onClickButton)&&i.onClickButton.call(f,t),!1}).hover(function(){n(this).hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},function(){n(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(t,i){return i=n.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){var r,u;this.grid&&(typeof t=="string"&&t.indexOf("#")!==0&&(t="#"+n.jgrid.jqID(t)),r=n(".navtable",t)[0],r&&(u="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'><\/span>"+i.sepcontent+"<\/td>",i.position==="first"?r.rows[0].cells.length===0?n("tr",r).append(u):n("tr td:eq(0)",r).before(u):n("tr",r).append(u)))})},GridToForm:function(t,i){return this.each(function(){var f=this,r,u;if(f.grid&&(u=n(f).jqGrid("getRowData",t),u))for(r in u)u.hasOwnProperty(r)&&(n("[name="+n.jgrid.jqID(r)+"]",i).is("input:radio")||n("[name="+n.jgrid.jqID(r)+"]",i).is("input:checkbox")?n("[name="+n.jgrid.jqID(r)+"]",i).each(function(){n(this).val()==u[r]?n(this)[f.p.useProp?"prop":"attr"]("checked",!0):n(this)[f.p.useProp?"prop":"attr"]("checked",!1)}):n("[name="+n.jgrid.jqID(r)+"]",i).val(u[r]))})},FormToGrid:function(t,i,r,u){return this.each(function(){var e=this,o,f;e.grid&&(r||(r="set"),u||(u="first"),o=n(i).serializeArray(),f={},n.each(o,function(n,t){f[t.name]=t.value}),r==="add"?n(e).jqGrid("addRowData",t,f,u):r==="set"&&n(e).jqGrid("setRowData",t,f))})}})}(jQuery),function(n){"use strict";n.jgrid.inlineEdit=n.jgrid.inlineEdit||{};n.jgrid.extend({editRow:function(t,i,r,u,f,e,o,s,h){var c={},l=n.makeArray(arguments).slice(1);return n.type(l[0])==="object"?c=l[0]:(i!==undefined&&(c.keys=i),n.isFunction(r)&&(c.oneditfunc=r),n.isFunction(u)&&(c.successfunc=u),f!==undefined&&(c.url=f),e!==undefined&&(c.extraparam=e),n.isFunction(o)&&(c.aftersavefunc=o),n.isFunction(s)&&(c.errorfunc=s),n.isFunction(h)&&(c.afterrestorefunc=h)),c=n.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},n.jgrid.inlineEdit,c),this.each(function(){var i=this,f,u,l,a=0,s=null,h={},e,r,o;i.grid&&(e=n(i).jqGrid("getInd",t,!0),e!==!1)&&(o=n.isFunction(c.beforeEditRow)?c.beforeEditRow.call(i,c,t):undefined,o===undefined&&(o=!0),o)&&(l=n(e).attr("editable")||"0",l!=="0"||n(e).hasClass("not-editable-row")||(r=i.p.colModel,n('td[role="gridcell"]',e).each(function(e){var c,l,o;if(f=r[e].name,c=i.p.treeGrid===!0&&f===i.p.ExpandColumn,c)u=n("span:first",this).html();else try{u=n.unformat.call(i,this,{rowId:t,colModel:r[e]},e)}catch(v){u=r[e].edittype&&r[e].edittype==="textarea"?n(this).text():n(this).html()}f!=="cb"&&f!=="subgrid"&&f!=="rn"&&(i.p.autoencode&&(u=n.jgrid.htmlDecode(u)),h[f]=u,r[e].editable===!0&&(s===null&&(s=e),c?n("span:first",this).html(""):n(this).html(""),l=n.extend({},r[e].editoptions||{},{id:t+"_"+f,name:f}),r[e].edittype||(r[e].edittype="text"),(u==="&nbsp;"||u==="&#160;"||u.length===1&&u.charCodeAt(0)===160)&&(u=""),o=n.jgrid.createEl.call(i,r[e].edittype,l,u,!0,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),n(o).addClass("editable"),c?n("span:first",this).append(o):n(this).append(o),n.jgrid.bindEv.call(i,o,l),r[e].edittype==="select"&&r[e].editoptions!==undefined&&r[e].editoptions.multiple===!0&&r[e].editoptions.dataUrl===undefined&&n.jgrid.msie&&n(o).width(n(o).width()),a++))}),a>0&&(h.id=t,i.p.savedRow.push(h),n(e).attr("editable","1"),setTimeout(function(){n("td:eq("+s+") input",e).focus()},0),c.keys===!0&&n(e).bind("keydown",function(r){if(r.keyCode===27){if(n(i).jqGrid("restoreRow",t,c.afterrestorefunc),i.p._inlinenav)try{n(i).jqGrid("showAddEditButtons")}catch(f){}return!1}if(r.keyCode===13){var u=r.target;if(u.tagName==="TEXTAREA")return!0;if(n(i).jqGrid("saveRow",t,c)&&i.p._inlinenav)try{n(i).jqGrid("showAddEditButtons")}catch(e){}return!1}}),n(i).triggerHandler("jqGridInlineEditRow",[t,c]),n.isFunction(c.oneditfunc)&&c.oneditfunc.call(i,t))))})},saveRow:function(t,i,r,u,f,e,o){var ht=n.makeArray(arguments).slice(1),c={},nt,a,ut,ft,y,tt,it,rt,et,ot,g,st;n.type(ht[0])==="object"?c=ht[0]:(n.isFunction(i)&&(c.successfunc=i),r!==undefined&&(c.url=r),u!==undefined&&(c.extraparam=u),n.isFunction(f)&&(c.aftersavefunc=f),n.isFunction(e)&&(c.errorfunc=e),n.isFunction(o)&&(c.afterrestorefunc=o));c=n.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},n.jgrid.inlineEdit,c);var b=!1,s=this[0],l,h={},k={},p={},ct,w,d,v;if(!s.grid||(v=n(s).jqGrid("getInd",t,!0),v===!1))return b;if(nt=n.isFunction(c.beforeSaveRow)?c.beforeSaveRow.call(s,c,t):undefined,nt===undefined&&(nt=!0),nt){if(ct=n(v).attr("editable"),c.url=c.url||s.p.editurl,ct==="1"){if(n('td[role="gridcell"]',v).each(function(t){var i,f,r;if(a=s.p.colModel[t],l=a.name,l!=="cb"&&l!=="subgrid"&&a.editable===!0&&l!=="rn"&&!n(this).hasClass("not-editable-cell")){switch(a.edittype){case"checkbox":i=["Yes","No"];a.editoptions&&(i=a.editoptions.value.split(":"));h[l]=n("input",this).is(":checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":h[l]=n("input, textarea",this).val();break;case"select":a.editoptions.multiple?(f=n("select",this),r=[],h[l]=n(f).val(),h[l]=h[l]?h[l].join(","):"",n("select option:selected",this).each(function(t,i){r[t]=n(i).text()}),k[l]=r.join(",")):(h[l]=n("select option:selected",this).val(),k[l]=n("select option:selected",this).text());a.formatter&&a.formatter==="select"&&(k={});break;case"custom":try{if(a.editoptions&&n.isFunction(a.editoptions.custom_value)){if(h[l]=a.editoptions.custom_value.call(s,n(".customelement",this),"get"),h[l]===undefined)throw"e2";}else throw"e1";}catch(u){u==="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose);u==="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,u.message,n.jgrid.edit.bClose)}}if(d=n.jgrid.checkValues.call(s,h[l],t),d[0]===!1)return!1;s.p.autoencode&&(h[l]=n.jgrid.htmlEncode(h[l]));c.url!=="clientArray"&&a.editoptions&&a.editoptions.NullIfEmpty===!0&&h[l]===""&&(p[l]="null")}}),d[0]===!1){try{ut=n(s).jqGrid("getGridRowById",t);ft=n.jgrid.findPos(ut);n.jgrid.info_dialog(n.jgrid.errors.errcap,d[1],n.jgrid.edit.bClose,{left:ft[0],top:ft[1]+n(ut).outerHeight()})}catch(lt){alert(d[1])}return b}if(tt=s.p.prmNames,it=t,y=s.p.keyIndex===!1?tt.id:s.p.colModel[s.p.keyIndex+(s.p.rownumbers===!0?1:0)+(s.p.multiselect===!0?1:0)+(s.p.subGrid===!0?1:0)].name,h&&(h[tt.oper]=tt.editoper,h[y]===undefined||h[y]===""?h[y]=t:v.id!==s.p.idPrefix+h[y]&&(rt=n.jgrid.stripPref(s.p.idPrefix,t),s.p._index[rt]!==undefined&&(s.p._index[h[y]]=s.p._index[rt],delete s.p._index[rt]),t=s.p.idPrefix+h[y],n(v).attr("id",t),s.p.selrow===it&&(s.p.selrow=t),n.isArray(s.p.selarrrow)&&(et=n.inArray(it,s.p.selarrrow),et>=0&&(s.p.selarrrow[et]=t)),s.p.multiselect&&(ot="jqg_"+s.p.id+"_"+t,n("input.cbox",v).attr("id",ot).attr("name",ot))),s.p.inlineData===undefined&&(s.p.inlineData={}),h=n.extend({},h,s.p.inlineData,c.extraparam)),c.url==="clientArray"){for(h=n.extend({},h,k),s.p.autoencode&&n.each(h,function(t,i){h[t]=n.jgrid.htmlDecode(i)}),st=n(s).jqGrid("setRowData",t,h),n(v).attr("editable","0"),g=0;g<s.p.savedRow.length;g++)if(String(s.p.savedRow[g].id)===String(it)){w=g;break}w>=0&&s.p.savedRow.splice(w,1);n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,st,h,c]);n.isFunction(c.aftersavefunc)&&c.aftersavefunc.call(s,t,st,c);b=!0;n(v).removeClass("jqgrid-new-row").unbind("keydown")}else n("#lui_"+n.jgrid.jqID(s.p.id)).show(),p=n.extend({},h,p),p[y]=n.jgrid.stripPref(s.p.idPrefix,p[y]),n.ajax(n.extend({url:c.url,data:n.isFunction(s.p.serializeRowData)?s.p.serializeRowData.call(s,p):p,type:c.mtype,async:!1,complete:function(i,r){if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),r==="success"){var e=!0,u,f;if(u=n(s).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,c]),n.isArray(u)||(u=[!0,h]),u[0]&&n.isFunction(c.successfunc)&&(u=c.successfunc.call(s,i)),n.isArray(u)?(e=u[0],h=u[1]||h):e=u,e===!0){for(s.p.autoencode&&n.each(h,function(t,i){h[t]=n.jgrid.htmlDecode(i)}),h=n.extend({},h,k),n(s).jqGrid("setRowData",t,h),n(v).attr("editable","0"),f=0;f<s.p.savedRow.length;f++)if(String(s.p.savedRow[f].id)===String(t)){w=f;break}w>=0&&s.p.savedRow.splice(w,1);n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,i,h,c]);n.isFunction(c.aftersavefunc)&&c.aftersavefunc.call(s,t,i);b=!0;n(v).removeClass("jqgrid-new-row").unbind("keydown")}else n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,c]),n.isFunction(c.errorfunc)&&c.errorfunc.call(s,t,i,r,null),c.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,c.afterrestorefunc)}},error:function(i,r,u){if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,u,c]),n.isFunction(c.errorfunc))c.errorfunc.call(s,t,i,r,u);else{var f=i.responseText||i.statusText;try{n.jgrid.info_dialog(n.jgrid.errors.errcap,'<div class="ui-state-error">'+f+"<\/div>",n.jgrid.edit.bClose,{buttonalign:"right"})}catch(e){alert(f)}}c.restoreAfterError===!0&&n(s).jqGrid("restoreRow",t,c.afterrestorefunc)}},n.jgrid.ajaxOptions,s.p.ajaxRowOptions||{}))}return b}},restoreRow:function(t,i){var u=n.makeArray(arguments).slice(1),r={};return n.type(u[0])==="object"?r=u[0]:n.isFunction(i)&&(r.afterrestorefunc=i),r=n.extend(!0,{},n.jgrid.inlineEdit,r),this.each(function(){var i=this,u=-1,e,s={},f,o;if(i.grid&&(e=n(i).jqGrid("getInd",t,!0),e!==!1)&&(o=n.isFunction(r.beforeCancelRow)?r.beforeCancelRow.call(i,r,sr):undefined,o===undefined&&(o=!0),o)){for(f=0;f<i.p.savedRow.length;f++)if(String(i.p.savedRow[f].id)===String(t)){u=f;break}if(u>=0){if(n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker","#"+n.jgrid.jqID(e.id)).datepicker("hide")}catch(h){}n.each(i.p.colModel,function(){this.editable===!0&&i.p.savedRow[u].hasOwnProperty(this.name)&&(s[this.name]=i.p.savedRow[u][this.name])});n(i).jqGrid("setRowData",t,s);n(e).attr("editable","0").unbind("keydown");i.p.savedRow.splice(u,1);n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(i.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){n(i).jqGrid("delRowData",t);n(i).jqGrid("showAddEditButtons")},0)}n(i).triggerHandler("jqGridInlineAfterRestoreRow",[t]);n.isFunction(r.afterrestorefunc)&&r.afterrestorefunc.call(i,t)}})},addRow:function(t){return t=n.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){var i,r,u,f;this.grid&&(i=this,r=n.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):undefined,r===undefined&&(r=!0),r)&&(t.rowID=n.isFunction(t.rowID)?t.rowID.call(i,t):t.rowID!=null?t.rowID:n.jgrid.randId(),t.useDefValues===!0&&n(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,u=n.isFunction(r)?r.call(i):r;t.initdata[this.name]=u}}),n(i).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=i.p.idPrefix+t.rowID,n("#"+n.jgrid.jqID(t.rowID),"#"+n.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter?n("#"+n.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+n.jgrid.jqID(i.p.id)).click():(u=i.p.prmNames,f=u.oper,t.addRowParams.extraparam[f]=u.addoper,n(i).jqGrid("editRow",t.rowID,t.addRowParams),n(i).jqGrid("setSelection",t.rowID)))})},inlineNav:function(t,i){return i=n.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},n.jgrid.nav,i||{}),this.each(function(){var r,s,u,o,e,h,f;if(this.grid){if(r=this,u=n.jgrid.jqID(r.p.id),r.p._inlinenav=!0,i.addParams.useFormatter===!0)for(o=r.p.colModel,e=0;e<o.length;e++)if(o[e].formatter&&o[e].formatter==="actions"){o[e].formatoptions&&(h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f=n.extend(h,o[e].formatoptions),i.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSave,errorfunc:f.onError,afterrestorefunc:f.afterRestore});break}i.add&&n(r).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:r.p.id+"_iladd",onClickButton:function(){n(r).jqGrid("addRow",i.addParams);i.addParams.useFormatter||(n("#"+u+"_ilsave").removeClass("ui-state-disabled"),n("#"+u+"_ilcancel").removeClass("ui-state-disabled"),n("#"+u+"_iladd").addClass("ui-state-disabled"),n("#"+u+"_iledit").addClass("ui-state-disabled"))}});i.edit&&n(r).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:r.p.id+"_iledit",onClickButton:function(){var t=n(r).jqGrid("getGridParam","selrow");t?(n(r).jqGrid("editRow",t,i.editParams),n("#"+u+"_ilsave").removeClass("ui-state-disabled"),n("#"+u+"_ilcancel").removeClass("ui-state-disabled"),n("#"+u+"_iladd").addClass("ui-state-disabled"),n("#"+u+"_iledit").addClass("ui-state-disabled")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}});i.save&&(n(r).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:r.p.id+"_ilsave",onClickButton:function(){var t=r.p.savedRow[0].id;if(t){var f=r.p.prmNames,e=f.oper,o=i.editParams;n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")?(i.addParams.addRowParams.extraparam[e]=f.addoper,o=i.addParams.addRowParams):(i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[e]=f.editoper);n(r).jqGrid("saveRow",t,o)&&n(r).jqGrid("showAddEditButtons")}else n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus()}}),n("#"+u+"_ilsave").addClass("ui-state-disabled"));i.cancel&&(n(r).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:r.p.id+"_ilcancel",onClickButton:function(){var t=r.p.savedRow[0].id,f=i.editParams;t?(n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")&&(f=i.addParams.addRowParams),n(r).jqGrid("restoreRow",t,f),n(r).jqGrid("showAddEditButtons")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),n("#"+u+"_ilcancel").addClass("ui-state-disabled"));i.restoreAfterSelect===!0&&(s=n.isFunction(r.p.beforeSelectRow)?r.p.beforeSelectRow:!1,r.p.beforeSelectRow=function(t,u){var f=!0;return r.p.savedRow.length>0&&r.p._inlinenav===!0&&t!==r.p.selrow&&r.p.selrow!==null&&(r.p.selrow===i.addParams.rowID?n(r).jqGrid("delRowData",r.p.selrow):n(r).jqGrid("restoreRow",r.p.selrow,i.editParams),n(r).jqGrid("showAddEditButtons")),s&&(f=s.call(r,t,u)),f})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id);n("#"+t+"_ilsave").addClass("ui-state-disabled");n("#"+t+"_ilcancel").addClass("ui-state-disabled");n("#"+t+"_iladd").removeClass("ui-state-disabled");n("#"+t+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(n){"use strict";n.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var u=this,e,f,o,s,c,l,h;if(u.grid&&u.p.cellEdit===!0){if(i=parseInt(i,10),u.p.selrow=u.rows[t].id,u.p.knv||n(u).jqGrid("GridNav"),u.p.savedRow.length>0){if(r===!0&&t==u.p.iRow&&i==u.p.iCol)return;n(u).jqGrid("saveCell",u.p.savedRow[0].id,u.p.savedRow[0].ic)}else window.setTimeout(function(){n("#"+n.jgrid.jqID(u.p.knv)).attr("tabindex","-1").focus()},0);if(s=u.p.colModel[i],e=s.name,e!=="subgrid"&&e!=="cb"&&e!=="rn"){if(o=n("td:eq("+i+")",u.rows[t]),s.editable!==!0||r!==!0||o.hasClass("not-editable-cell"))parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover")),o.addClass("edit-cell ui-state-highlight"),n(u.rows[t]).addClass("selected-row ui-state-hover"),f=o.html().replace(/\&#160\;/ig,""),n(u).triggerHandler("jqGridSelectCell",[u.rows[t].id,e,f,t,i]),n.isFunction(u.p.onSelectCell)&&u.p.onSelectCell.call(u,u.rows[t].id,e,f,t,i);else{parseInt(u.p.iCol,10)>=0&&parseInt(u.p.iRow,10)>=0&&(n("td:eq("+u.p.iCol+")",u.rows[u.p.iRow]).removeClass("edit-cell ui-state-highlight"),n(u.rows[u.p.iRow]).removeClass("selected-row ui-state-hover"));n(o).addClass("edit-cell ui-state-highlight");n(u.rows[t]).addClass("selected-row ui-state-hover");try{f=n.unformat.call(u,o,{rowId:u.rows[t].id,colModel:s},i)}catch(a){f=s.edittype&&s.edittype==="textarea"?n(o).text():n(o).html()}u.p.autoencode&&(f=n.jgrid.htmlDecode(f));s.edittype||(s.edittype="text");u.p.savedRow.push({id:t,ic:i,name:e,v:f});(f==="&nbsp;"||f==="&#160;"||f.length===1&&f.charCodeAt(0)===160)&&(f="");n.isFunction(u.p.formatCell)&&(c=u.p.formatCell.call(u,u.rows[t].id,e,f,t,i),c!==undefined&&(f=c));n(u).triggerHandler("jqGridBeforeEditCell",[u.rows[t].id,e,f,t,i]);n.isFunction(u.p.beforeEditCell)&&u.p.beforeEditCell.call(u,u.rows[t].id,e,f,t,i);l=n.extend({},s.editoptions||{},{id:t+"_"+e,name:e});h=n.jgrid.createEl.call(u,s.edittype,l,f,!0,n.extend({},n.jgrid.ajaxOptions,u.p.ajaxSelectOptions||{}));n(o).html("").append(h).attr("tabindex","0");n.jgrid.bindEv.call(u,h,l);window.setTimeout(function(){n(h).focus()},0);n("input, select, textarea",o).bind("keydown",function(r){if(r.keyCode===27&&(n("input.hasDatepicker",o).length>0?n(".ui-datepicker").is(":hidden")?n(u).jqGrid("restoreCell",t,i):n("input.hasDatepicker",o).datepicker("hide"):n(u).jqGrid("restoreCell",t,i)),r.keyCode===13)return n(u).jqGrid("saveCell",t,i),!1;if(r.keyCode===9){if(u.grid.hDiv.loading)return!1;r.shiftKey?n(u).jqGrid("prevCell",t,i):n(u).jqGrid("nextCell",t,i)}r.stopPropagation()});n(u).triggerHandler("jqGridAfterEditCell",[u.rows[t].id,e,f,t,i]);n.isFunction(u.p.afterEditCell)&&u.p.afterEditCell.call(u,u.rows[t].id,e,f,t,i)}u.p.iCol=i;u.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r=this,w,b,k,a,v,y,g,l,o,nt,tt,p;if(r.grid&&r.p.cellEdit===!0){if(w=r.p.savedRow.length>=1?0:null,w!==null){var h=n("td:eq("+i+")",r.rows[t]),u,e,s=r.p.colModel[i],f=s.name,c=n.jgrid.jqID(f);switch(s.edittype){case"select":s.editoptions.multiple?(b=n("#"+t+"_"+c,r.rows[t]),k=[],u=n(b).val(),u?u.join(","):u="",n("option:selected",b).each(function(t,i){k[t]=n(i).text()}),e=k.join(",")):(u=n("#"+t+"_"+c+" option:selected",r.rows[t]).val(),e=n("#"+t+"_"+c+" option:selected",r.rows[t]).text());s.formatter&&(e=u);break;case"checkbox":a=["Yes","No"];s.editoptions&&(a=s.editoptions.value.split(":"));u=n("#"+t+"_"+c,r.rows[t]).is(":checked")?a[0]:a[1];e=u;break;case"password":case"text":case"textarea":case"button":u=n("#"+t+"_"+c,r.rows[t]).val();e=u;break;case"custom":try{if(s.editoptions&&n.isFunction(s.editoptions.custom_value))if(u=s.editoptions.custom_value.call(r,n(".customelement",h),"get"),u===undefined)throw"e2";else e=u;else throw"e1";}catch(d){d==="e1"&&n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.nodefined,n.jgrid.edit.bClose);d==="e2"?n.jgrid.info_dialog(n.jgrid.errors.errcap,"function 'custom_value' "+n.jgrid.edit.msg.novalue,n.jgrid.edit.bClose):n.jgrid.info_dialog(n.jgrid.errors.errcap,d.message,n.jgrid.edit.bClose)}}if(e!==r.p.savedRow[w].v)if(v=n(r).triggerHandler("jqGridBeforeSaveCell",[r.rows[t].id,f,u,t,i]),v&&(u=v,e=v),n.isFunction(r.p.beforeSaveCell)&&(y=r.p.beforeSaveCell.call(r,r.rows[t].id,f,u,t,i),y&&(u=y,e=y)),g=n.jgrid.checkValues.call(r,u,i),g[0]===!0){if(l=n(r).triggerHandler("jqGridBeforeSubmitCell",[r.rows[t].id,f,u,t,i])||{},n.isFunction(r.p.beforeSubmitCell)&&(l=r.p.beforeSubmitCell.call(r,r.rows[t].id,f,u,t,i),l||(l={})),n("input.hasDatepicker",h).length>0&&n("input.hasDatepicker",h).datepicker("hide"),r.p.cellsubmit==="remote")if(r.p.cellurl)o={},r.p.autoencode&&(u=n.jgrid.htmlEncode(u)),o[f]=u,p=r.p.prmNames,nt=p.id,tt=p.oper,o[nt]=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),o[tt]=p.editoper,o=n.extend(l,o),n("#lui_"+n.jgrid.jqID(r.p.id)).show(),r.grid.hDiv.loading=!0,n.ajax(n.extend({url:r.p.cellurl,data:n.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,o):o,type:"POST",complete:function(s,c){if(n("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1,c==="success"){var l=n(r).triggerHandler("jqGridAfterSubmitCell",[r,s,o.id,f,u,t,i])||[!0,""];l[0]===!0&&n.isFunction(r.p.afterSubmitCell)&&(l=r.p.afterSubmitCell.call(r,s,o.id,f,u,t,i));l[0]===!0?(n(h).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,e,!1,!1,!0),n(h).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1)):(n.jgrid.info_dialog(n.jgrid.errors.errcap,l[1],n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}},error:function(u,f,e){n("#lui_"+n.jgrid.jqID(r.p.id)).hide();r.grid.hDiv.loading=!1;n(r).triggerHandler("jqGridErrorCell",[u,f,e]);n.isFunction(r.p.errorCell)?(r.p.errorCell.call(r,u,f,e),n(r).jqGrid("restoreCell",t,i)):(n.jgrid.info_dialog(n.jgrid.errors.errcap,u.status+" : "+u.statusText+"<br/>"+f,n.jgrid.edit.bClose),n(r).jqGrid("restoreCell",t,i))}},n.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}));else try{n.jgrid.info_dialog(n.jgrid.errors.errcap,n.jgrid.errors.nourl,n.jgrid.edit.bClose);n(r).jqGrid("restoreCell",t,i)}catch(d){}r.p.cellsubmit==="clientArray"&&(n(h).empty(),n(r).jqGrid("setCell",r.rows[t].id,i,e,!1,!1,!0),n(h).addClass("dirty-cell"),n(r.rows[t]).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,f,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,f,u,t,i),r.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){n.jgrid.info_dialog(n.jgrid.errors.errcap,u+" "+g[1],n.jgrid.edit.bClose)},100);n(r).jqGrid("restoreCell",t,i)}catch(d){}else n(r).jqGrid("restoreCell",t,i)}window.setTimeout(function(){n("#"+n.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,u,f;if(r.grid&&r.p.cellEdit===!0){if(u=r.p.savedRow.length>=1?0:null,u!==null){if(f=n("td:eq("+i+")",r.rows[t]),n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker",f).datepicker("hide")}catch(e){}n(f).empty().attr("tabindex","-1");n(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[u].v,!1,!1,!0);n(r).triggerHandler("jqGridAfterRestoreCell",[r.rows[t].id,r.p.savedRow[u].v,t,i]);n.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[u].v,t,i);r.p.savedRow.splice(0,1)}window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i+1;u<r.p.colModel.length;u++)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r=this,f=!1,u;if(r.grid&&r.p.cellEdit===!0){for(u=i-1;u>=0;u--)if(r.p.colModel[u].editable===!0){f=u;break}f!==!1?n(r).jqGrid("editCell",t,f,!0):r.p.savedRow.length>0&&n(r).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function u(i,r,u){if(u.substr(0,1)==="v"){var e=n(t.grid.bDiv)[0].clientHeight,o=n(t.grid.bDiv)[0].scrollTop,s=t.rows[i].offsetTop+t.rows[i].clientHeight,h=t.rows[i].offsetTop;u==="vd"&&s>=e&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop+t.rows[i].clientHeight);u==="vu"&&h<o&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop-t.rows[i].clientHeight)}if(u==="h"){var c=n(t.grid.bDiv)[0].clientWidth,f=n(t.grid.bDiv)[0].scrollLeft,l=t.rows[i].cells[r].offsetLeft+t.rows[i].cells[r].clientWidth,a=t.rows[i].cells[r].offsetLeft;l>=c+parseInt(f,10)?n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft+t.rows[i].cells[r].clientWidth:a<f&&(n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft-t.rows[i].cells[r].clientWidth)}}function e(n,i){var u,r;if(i==="lft")for(u=n+1,r=n;r>=0;r--)if(t.p.colModel[r].hidden!==!0){u=r;break}if(i==="rgt")for(u=n-1,r=n;r<t.p.colModel.length;r++)if(t.p.colModel[r].hidden!==!0){u=r;break}return u}var t=this,f,i,r;t.grid&&t.p.cellEdit===!0&&(t.p.knv=t.p.id+"_kn",f=n("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+t.p.knv+"'><\/div><\/div>"),n(f).insertBefore(t.grid.cDiv),n("#"+t.p.knv).focus().keydown(function(f){r=f.keyCode;t.p.direction==="rtl"&&(r===37?r=39:r===39&&(r=37));switch(r){case 38:t.p.iRow-1>0&&(u(t.p.iRow-1,t.p.iCol,"vu"),n(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,!1));break;case 40:t.p.iRow+1<=t.rows.length-1&&(u(t.p.iRow+1,t.p.iCol,"vd"),n(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,!1));break;case 37:t.p.iCol-1>=0&&(i=e(t.p.iCol-1,"lft"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 39:t.p.iCol+1<=t.p.colModel.length-1&&(i=e(t.p.iCol+1,"rgt"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1));break;case 13:parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&n(t).jqGrid("editCell",t.p.iRow,t.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r=this,u;r.grid&&r.p.cellEdit===!0&&n(r.rows).each(function(f){var e={};n(this).hasClass("edited")&&(n("td",this).each(function(i){if(u=r.p.colModel[i].name,u!=="cb"&&u!=="subgrid")if(t==="dirty"){if(n(this).hasClass("dirty-cell"))try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}else try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(o){e[u]=n.jgrid.htmlDecode(n(this).html())}}),e.id=this.id,i.push(e))})}),i}})}(jQuery),function(n){"use strict";n.jgrid.extend({setSubGrid:function(){return this.each(function(){var t=this,i,r;if(t.p.subGridOptions=n.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},t.p.subGridOptions||{}),t.p.colNames.unshift(""),t.p.colModel.unshift({name:"subgrid",width:n.jgrid.cell_width?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),i=t.p.subGridModel,i[0])for(i[0].align=n.extend([],i[0].align||[]),r=0;r<i[0].name.length;r++)i[0].align[r]=i[0].align[r]||"left"})},addSubGridCell:function(n,t){var i="",r,u;return this.each(function(){i=this.formatCol(n,t);u=this.p.id;r=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+u+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+i+"><a style='cursor:pointer;'><span class='ui-icon "+r+"'><\/span><\/a><\/td>"},addSubGrid:function(t,i){return this.each(function(){var r=this,c,s;if(r.grid){var h=function(t,i,u){var f=n("<td align='"+r.p.subGridModel[0].align[u]+"'><\/td>").html(i);n(t).append(f)},l=function(t,i){for(var o,e,s=n("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),f=n("<tr><\/tr>"),c,u=0;u<r.p.subGridModel[0].name.length;u++)o=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(o).html(r.p.subGridModel[0].name[u]),n(o).width(r.p.subGridModel[0].width[u]),n(f).append(o);return n(s).append(f),t&&(e=r.p.xmlReader.subgrid,n(e.root+" "+e.row,t).each(function(){if(f=n("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),e.repeatitems===!0)n(e.cell,this).each(function(t){h(f,n(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(u=0;u<t.length;u++)h(f,n(t[u],this).text()||"&#160;",u)}n(s).append(f)})),c=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(c+i)).append(s),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},a=function(t,i){for(var c,l,e,s,u,v=n("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),o=n("<tr><\/tr>"),a,y,f=0;f<r.p.subGridModel[0].name.length;f++)c=n("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(c).html(r.p.subGridModel[0].name[f]),n(c).width(r.p.subGridModel[0].width[f]),n(o).append(c);if(n(v).append(o),t&&(s=r.p.jsonReader.subgrid,l=n.jgrid.getAccessor(t,s.root),l!==undefined))for(f=0;f<l.length;f++){if(e=l[f],o=n("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),s.repeatitems===!0)for(s.cell&&(e=e[s.cell]),u=0;u<e.length;u++)h(o,e[u]||"&#160;",u);else if(a=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name,a.length)for(u=0;u<a.length;u++)h(o,e[a[u]]||"&#160;",u);n(v).append(o)}return y=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(y+i)).append(v),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},p=function(t){var f,i,u,e;if(f=n(t).attr("id"),i={nd_:(new Date).getTime()},i[r.p.prmNames.subgridid]=f,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(e=0;e<r.p.subGridModel[0].params.length;e++)for(u=0;u<r.p.colModel.length;u++)r.p.colModel[u].name===r.p.subGridModel[0].params[e]&&(i[r.p.colModel[u].name]=n("td:eq("+u+")",t).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading){r.grid.hDiv.loading=!0;n("#load_"+n.jgrid.jqID(r.p.id)).show();r.p.subgridtype||(r.p.subgridtype=r.p.datatype);n.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,i):r.p.subgridtype=r.p.subgridtype.toLowerCase();switch(r.p.subgridtype){case"xml":case"json":n.ajax(n.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:n.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,i):i,complete:function(t){r.p.subgridtype==="xml"?l(t.responseXML,f):a(n.jgrid.parse(t.responseText),f);t=null}},n.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}}return!1},u,e,v,y=0,f,o;for(n.each(r.p.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&y++}),c=r.rows.length,s=1,i!==undefined&&i>0&&(s=i,c=i+1);s<c;)n(r.rows[s]).hasClass("jqgrow")&&n(r.rows[s].cells[t]).bind("click",function(){var i=n(this).parent("tr")[0];if(o=i.nextSibling,n(this).hasClass("sgcollapsed")){if(e=r.p.id,u=i.id,r.p.subGridOptions.reloadOnExpand!==!0&&(r.p.subGridOptions.reloadOnExpand!==!1||n(o).hasClass("ui-subgrid")))n(o).show();else{if(v=t>=1?"<td colspan='"+t+"'>&#160;<\/td>":"",f=n(r).triggerHandler("jqGridSubGridBeforeExpand",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,f&&n.isFunction(r.p.subGridBeforeExpand)&&(f=r.p.subGridBeforeExpand.call(r,e+"_"+u,u)),f===!1)return!1;n(i).after("<tr role='row' class='ui-subgrid'>"+v+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+r.p.subGridOptions.openicon+"'><\/span><\/td><td colspan='"+parseInt(r.p.colNames.length-1-y,10)+"' class='ui-widget-content subgrid-data'><div id="+e+"_"+u+" class='tablediv'><\/div><\/td><\/tr>");n(r).triggerHandler("jqGridSubGridRowExpanded",[e+"_"+u,u]);n.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,e+"_"+u,u):p(i)}n(this).html("<a style='cursor:pointer;'><span class='ui-icon "+r.p.subGridOptions.minusicon+"'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded");r.p.subGridOptions.selectOnExpand&&n(r).jqGrid("setSelection",u)}else if(n(this).hasClass("sgexpanded")){if(f=n(r).triggerHandler("jqGridSubGridRowColapsed",[e+"_"+u,u]),f=f===!1||f==="stop"?!1:!0,u=i.id,f&&n.isFunction(r.p.subGridRowColapsed)&&(f=r.p.subGridRowColapsed.call(r,e+"_"+u,u)),f===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?n(o).remove(".ui-subgrid"):n(o).hasClass("ui-subgrid")&&n(o).hide();n(this).html("<a style='cursor:pointer;'><span class='ui-icon "+r.p.subGridOptions.plusicon+"'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed");r.p.subGridOptions.selectOnCollapse&&n(r).jqGrid("setSelection",u)}return!1}),s++;r.p.subGridOptions.expandOnLoad===!0&&n(r.rows).filter(".jqgrow").each(function(t,i){n(i.cells[0]).click()});r.subGridXml=function(n,t){l(n,t)};r.subGridJson=function(n,t){a(n,t)}}})},expandSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgcollapsed",i)[0],r&&n(r).trigger("click")))})},collapseSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&u.p.subGrid===!0&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgexpanded",i)[0],r&&n(r).trigger("click")))})},toggleSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&u.p.subGrid===!0&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i?n(i).trigger("click"):(i=n("td.sgexpanded",r)[0],i&&n(i).trigger("click"))))})}})}(jQuery),function(n){"use strict";n.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this,k,d,g,c;if(r.grid&&r.p.treeGrid)for(var l=r.p.expColInd,e=r.p.treeReader.expanded_field,f=r.p.treeReader.leaf_field,nt=r.p.treeReader.level_field,a=r.p.treeReader.icon_field,o=r.p.treeReader.loaded,w,b,s,v,y,h,u,p;t<i;)k=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),d=r.p._index[k],u=r.p.data[d],r.p.treeGridModel==="nested"&&(u[f]||(w=parseInt(u[r.p.treeReader.left_field],10),b=parseInt(u[r.p.treeReader.right_field],10),u[f]=b===w+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=u[f])),s=parseInt(u[nt],10),r.p.tree_root_level===0?(v=s+1,y=s):(v=s,y=s-1),h="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+v*18+"px;'>",h+="<div style='"+(r.p.direction==="rtl"?"right:":"left:")+y*18+"px;' class='ui-icon ",u[o]!==undefined&&(u[o]=u[o]==="true"||u[o]===!0?!0:!1),u[f]==="true"||u[f]===!0?(h+=(u[a]!==undefined&&u[a]!==""?u[a]:r.p.treeIcons.leaf)+" tree-leaf treeclick",u[f]=!0,p="leaf"):(u[f]=!1,p=""),u[e]=(u[e]==="true"||u[e]===!0?!0:!1)&&(u[o]||u[o]===undefined),h+=u[e]===!1?u[f]===!0?"'":r.p.treeIcons.plus+" tree-plus treeclick'":u[f]===!0?"'":r.p.treeIcons.minus+" tree-minus treeclick'",h+="><\/div><\/div>",n(r.rows[t].cells[l]).wrapInner("<span class='cell-wrapper"+p+"'><\/span>").prepend(h),s!==parseInt(r.p.tree_root_level,10)&&(c=n(r).jqGrid("getNodeParent",u),g=c&&c.hasOwnProperty(e)?c[e]:!0,g||n(r.rows[t]).css("display","none")),n(r.rows[t].cells[l]).find("div.treeclick").bind("click",function(t){var u=t.target||t.srcElement,o=n.jgrid.stripPref(r.p.idPrefix,n(u,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[o];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),!1}),r.p.ExpandColClick===!0&&n(r.rows[t].cells[l]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var o=t.target||t.srcElement,u=n.jgrid.stripPref(r.p.idPrefix,n(o,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[u];return r.p.data[i][f]||(r.p.data[i][e]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),n(r).jqGrid("setSelection",u),!1}),t++})},setTreeGrid:function(){return this.each(function(){var t=this,i=0,e,o=!1,r,u,f,s=[];if(t.p.treeGrid){t.p.treedatatype||n.extend(t.p,{treedatatype:t.p.datatype});t.p.subGrid=!1;t.p.altRows=!1;t.p.pgbuttons=!1;t.p.pginput=!1;t.p.gridview=!0;t.p.rowTotal===null&&(t.p.rowNum=1e4);t.p.multiselect=!1;t.p.rowList=[];t.p.expColInd=0;e="ui-icon-triangle-1-"+(t.p.direction==="rtl"?"w":"e");t.p.treeIcons=n.extend({plus:e,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{});t.p.treeGridModel==="nested"?t.p.treeReader=n.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader):t.p.treeGridModel==="adjacency"&&(t.p.treeReader=n.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader));for(u in t.p.colModel)if(t.p.colModel.hasOwnProperty(u)){r=t.p.colModel[u].name;r!==t.p.ExpandColumn||o||(o=!0,t.p.expColInd=i);i++;for(f in t.p.treeReader)t.p.treeReader.hasOwnProperty(f)&&t.p.treeReader[f]===r&&s.push(r)}n.each(t.p.treeReader,function(r,u){u&&n.inArray(u,s)===-1&&(r==="leaf_field"&&(t.p._treeleafpos=i),i++,t.p.colNames.push(u),t.p.colModel.push({name:u,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this,r,u;i.grid&&i.p.treeGrid&&(r=n(i).jqGrid("getNodeChildren",t),u=i.p.treeReader.expanded_field,n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","");this[u]&&n(i).jqGrid("expandRow",this)}))})},collapseRow:function(t){this.each(function(){var i=this,r,u;i.grid&&i.p.treeGrid&&(r=n(i).jqGrid("getNodeChildren",t),u=i.p.treeReader.expanded_field,n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","none");this[u]&&n(i).jqGrid("collapseRow",this)}))})},getRootNodes:function(){var t=[];return this.each(function(){var i=this,u,r;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":u=i.p.treeReader.level_field;n(i.p.data).each(function(){parseInt(this[u],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":r=i.p.treeReader.parent_id_field;n(i.p.data).each(function(){(this[r]===null||String(this[r]).toLowerCase()==="null")&&t.push(this)})}}),t},getNodeDepth:function(t){var i=null;return this.each(function(){var r,u;if(this.grid&&this.p.treeGrid){r=this;switch(r.p.treeGridModel){case"nested":u=r.p.treeReader.level_field;i=parseInt(t[u],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=n(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this,o,s;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,f=r.p.treeReader.right_field,e=r.p.treeReader.level_field,h=parseInt(t[u],10),c=parseInt(t[f],10),l=parseInt(t[e],10);n(this.p.data).each(function(){if(parseInt(this[e],10)===l-1&&parseInt(this[u],10)<h&&parseInt(this[f],10)>c)return i=this,!1});break;case"adjacency":o=r.p.treeReader.parent_id_field;s=r.p.localReader.id;n(this.p.data).each(function(){if(this[s]===n.jgrid.stripPref(r.p.idPrefix,t[o]))return i=this,!1})}}),i},getNodeChildren:function(t){var i=[];return this.each(function(){var r=this,o,s;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,f=r.p.treeReader.right_field,e=r.p.treeReader.level_field,h=parseInt(t[u],10),c=parseInt(t[f],10),l=parseInt(t[e],10);n(this.p.data).each(function(){parseInt(this[e],10)===l+1&&parseInt(this[u],10)>h&&parseInt(this[f],10)<c&&i.push(this)});break;case"adjacency":o=r.p.treeReader.parent_id_field;s=r.p.localReader.id;n(this.p.data).each(function(){this[o]==n.jgrid.stripPref(r.p.idPrefix,t[s])&&i.push(this)})}}),i},getFullTreeNode:function(t){var i=[];return this.each(function(){var r=this,f,o,s;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,h=r.p.treeReader.right_field,e=r.p.treeReader.level_field,c=parseInt(t[u],10),l=parseInt(t[h],10),a=parseInt(t[e],10);n(this.p.data).each(function(){parseInt(this[e],10)>=a&&parseInt(this[u],10)>=c&&parseInt(this[u],10)<=l&&i.push(this)});break;case"adjacency":t&&(i.push(t),o=r.p.treeReader.parent_id_field,s=r.p.localReader.id,n(this.p.data).each(function(t){for(f=i.length,t=0;t<f;t++)if(n.jgrid.stripPref(r.p.idPrefix,i[t][s])===this[o]){i.push(this);break}}))}}),i},getNodeAncestors:function(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=n(this).jqGrid("getNodeParent",t);r;)i.push(r),r=n(this).jqGrid("getNodeParent",r)}),i},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this,u,f;r.grid&&r.p.treeGrid&&(u=n(r).jqGrid("getNodeAncestors",t),f=r.p.treeReader.expanded_field,n(u).each(function(){return i=i&&this[f],i?void 0:!1}))}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this,f,u;r.grid&&r.p.treeGrid&&(f=r.p.treeReader.leaf_field,u=r.p.treeReader.loaded,i=t!==undefined?t[u]!==undefined?t[u]:t[f]||n(r).jqGrid("getNodeChildren",t).length>0?!0:!1:!1)}),i},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var r=this.p.treeReader.expanded_field,e=this.p.treeReader.parent_id_field,o=this.p.treeReader.loaded,f=this.p.treeReader.level_field,s=this.p.treeReader.left_field,h=this.p.treeReader.right_field;if(!t[r]){var i=n.jgrid.getAccessor(t,this.p.localReader.id),u=n("#"+this.p.idPrefix+n.jgrid.jqID(i),this.grid.bDiv)[0],c=this.p._index[i];n(this).jqGrid("isNodeLoaded",this.p.data[c])?(t[r]=!0,n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[r]=!0,n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=u.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:t[s],n_right:t[h],n_level:t[f]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:t[e],n_level:t[f]}}),n(this).trigger("reloadGrid"),t[o]=!0,this.p.treeGridModel==="nested"?n(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(t){return this.each(function(){var i,r,u;this.grid&&this.p.treeGrid&&(i=this.p.treeReader.expanded_field,t[i]&&(t[i]=!1,r=n.jgrid.getAccessor(t,this.p.localReader.id),u=n("#"+this.p.idPrefix+n.jgrid.jqID(r),this.grid.bDiv)[0],n("div.treeclick",u).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")))})},SortTree:function(t,i,r,u){return this.each(function(){if(this.grid&&this.p.treeGrid){var f,l,h,e=[],c=this,o,s,a=n(this).jqGrid("getRootNodes");for(o=n.jgrid.from(a),o.orderBy(t,i,r,u),s=o.select(),f=0,l=s.length;f<l;f++)h=s[f],e.push(h),n(this).jqGrid("collectChildrenSortTree",e,h,t,i,r,u);n.each(e,function(t){var i=n.jgrid.getAccessor(this,c.p.localReader.id);n("#"+n.jgrid.jqID(c.p.id)+" tbody tr:eq("+t+")").after(n("tr#"+n.jgrid.jqID(i),c.grid.bDiv))});o=null;s=null;e=null}})},collectChildrenSortTree:function(t,i,r,u,f,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,l,s,a,h,c;for(a=n(this).jqGrid("getNodeChildren",i),h=n.jgrid.from(a),h.orderBy(r,u,f,e),c=h.select(),o=0,l=c.length;o<l;o++)s=c[o],t.push(s),n(this).jqGrid("collectChildrenSortTree",t,s,r,u,f,e)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var u=this;u.grid&&u.p.treeGrid&&(r=n(u).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i=this,a=i.p.localReader.id,e,o=i.p.treeReader.left_field,s=i.p.treeReader.right_field,h,l,r,u,f,c;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],f!==undefined)){if(h=parseInt(i.p.data[f][s],10),l=h-parseInt(i.p.data[f][o],10)+1,c=n(i).jqGrid("getFullTreeNode",i.p.data[f]),c.length>0)for(e=0;e<c.length;e++)n(i).jqGrid("delRowData",c[e][a]);if(i.p.treeGridModel==="nested"){if(r=n.jgrid.from(i.p.data).greater(o,h,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][o]=parseInt(r[u][o],10)-l);if(r=n.jgrid.from(i.p.data).greater(s,h,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][s]=parseInt(r[u][s],10)-l)}}})},addChildNode:function(t,i,r,u){var f=this[0],rt,w,b,e,o;if(r){var v=f.p.treeReader.expanded_field,y=f.p.treeReader.leaf_field,ut=f.p.treeReader.level_field,et=f.p.treeReader.parent_id_field,a=f.p.treeReader.left_field,s=f.p.treeReader.right_field,k=f.p.treeReader.loaded,d,g,c,nt,h,ft,tt=0,p=i,it,l;if(u===undefined&&(u=!1),t===undefined||t===null){if(h=f.p.data.length-1,h>=0)while(h>=0)tt=Math.max(tt,parseInt(f.p.data[h][f.p.localReader.id],10)),h--;t=tt+1}if(rt=n(f).jqGrid("getInd",i),it=!1,i===undefined||i===null||i===""?(i=null,p=null,d="last",nt=f.p.tree_root_level,h=f.p.data.length+1):(d="after",g=f.p._index[i],c=f.p.data[g],i=c[f.p.localReader.id],nt=parseInt(c[ut],10)+1,w=n(f).jqGrid("getFullTreeNode",c),w.length?(h=w[w.length-1][f.p.localReader.id],p=h,h=n(f).jqGrid("getInd",p)+1):h=n(f).jqGrid("getInd",i)+1,c[y]&&(it=!0,c[v]=!0,n(f.rows[rt]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[g][y]=!1,c[k]=!0)),ft=h+1,r[v]===undefined&&(r[v]=!1),r[k]===undefined&&(r[k]=!1),r[ut]=nt,r[y]===undefined&&(r[y]=!0),f.p.treeGridModel==="adjacency"&&(r[et]=i),f.p.treeGridModel==="nested")if(i!==null){if(l=parseInt(c[s],10),b=n.jgrid.from(f.p.data),b=b.greaterOrEquals(s,l,{stype:"integer"}),e=b.select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=e[o][a]>l?parseInt(e[o][a],10)+2:e[o][a],e[o][s]=e[o][s]>=l?parseInt(e[o][s],10)+2:e[o][s]);r[a]=l;r[s]=l+1}else{if(l=parseInt(n(f).jqGrid("getCol",s,!1,"max"),10),e=n.jgrid.from(f.p.data).greater(a,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=parseInt(e[o][a],10)+2);if(e=n.jgrid.from(f.p.data).greater(s,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][s]=parseInt(e[o][s],10)+2);r[a]=l+1;r[s]=l+2}(i===null||n(f).jqGrid("isNodeLoaded",c)||it)&&(n(f).jqGrid("addRowData",t,r,d,p),n(f).jqGrid("setTreeNode",h,ft));c&&!c[v]&&u&&n(f.rows[rt]).find("div.treeclick").click()}}})}(jQuery),function(n){"use strict";n.extend(n.jgrid,{template:function(t){var r=n.makeArray(arguments).slice(1),i,u=r.length;return t==null&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,f){if(!isNaN(parseInt(f,10)))return r[parseInt(f,10)];for(i=0;i<u;i++)if(n.isArray(r[i]))for(var e=r[i],o=e.length;o--;)if(f===e[o].nm)return e[o].v})}});n.jgrid.extend({groupingSetup:function(){return this.each(function(){var f=this,i,r,e,u=f.p.colModel,t=f.p.groupingView;if(t!==null&&(typeof t=="object"||n.isFunction(t)))if(t.groupField.length){for(t.visibiltyOnNextGrouping===undefined&&(t.visibiltyOnNextGrouping=[]),t.lastvalues=[],t._locgr||(t.groups=[]),t.counters=[],i=0;i<t.groupField.length;i++)t.groupOrder[i]||(t.groupOrder[i]="asc"),t.groupText[i]||(t.groupText[i]="{0}"),typeof t.groupColumnShow[i]!="boolean"&&(t.groupColumnShow[i]=!0),typeof t.groupSummary[i]!="boolean"&&(t.groupSummary[i]=!1),t.groupSummaryPos[i]||(t.groupSummaryPos[i]="footer"),t.groupColumnShow[i]===!0?(t.visibiltyOnNextGrouping[i]=!0,n(f).jqGrid("showCol",t.groupField[i])):(t.visibiltyOnNextGrouping[i]=n("#"+n.jgrid.jqID(f.p.id+"_"+t.groupField[i])).is(":visible"),n(f).jqGrid("hideCol",t.groupField[i]));for(t.summary=[],t.hideFirstGroupCol&&(t.formatDisplayField[0]=function(n){return n}),r=0,e=u.length;r<e;r++)t.hideFirstGroupCol&&(u[r].hidden||t.groupField[0]!==u[r].name||(u[r].formatter=function(){return""})),u[r].summaryType&&(u[r].summaryDivider?t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sd:u[r].summaryDivider,vd:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}):t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}))}else f.p.grouping=!1;else f.p.grouping=!1})},groupingPrepare:function(t,i){return this.each(function(){for(var r=this.p.groupingView,f=this,l=r.groupField.length,s,e,h,o,c=0,u=0;u<l;u++)s=r.groupField[u],h=r.displayField[u],e=t[s],o=h==null?null:t[h],o==null&&(o=e),e!==undefined&&(i===0?(r.groups.push({idx:u,dataIndex:s,value:e,displayValue:o,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=e,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,function(){n.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,t):(this.v=n(f).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),r.groups[r.counters[u].pos].summary=r.counters[u].summary):typeof e=="object"||(n.isArray(r.isInTheSameGroup)&&n.isFunction(r.isInTheSameGroup[u])?r.isInTheSameGroup[u].call(f,r.lastvalues[u],e,u,r):r.lastvalues[u]===e)?c===1?(r.groups.push({idx:u,dataIndex:s,value:e,displayValue:o,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=e,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,function(){n.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,t):(this.v=n(f).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.counters[u].cnt+=1,r.groups[r.counters[u].pos].cnt=r.counters[u].cnt,n.each(r.counters[u].summary,function(){n.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,t):(this.v=n(f).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.groups.push({idx:u,dataIndex:s,value:e,displayValue:o,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=e,c=1,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,function(){n.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,t):(this.v=n(f).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=n(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))}),r.groups[r.counters[u].pos].summary=r.counters[u].summary))}),this},groupingToggle:function(t){return this.each(function(){var r=this,a=r.p.groupingView,o=t.split("_"),h=parseInt(o[o.length-2],10),d;o.splice(o.length-2,2);var v=o.join("_"),s=a.minusicon,c=a.plusicon,b=n("#"+n.jgrid.jqID(t)),i=b.length?b[0].nextSibling:null,y=n("#"+n.jgrid.jqID(t)+" span.tree-wrap-"+r.p.direction),k=function(t){var i=n.map(t.split(" "),function(n){if(n.substring(0,v.length+1)===v+"_")return parseInt(n.substring(v.length+1),10)});return i.length>0?i[0]:undefined},f,l,p=!1,e=r.p.frozenColumns?r.p.id+"_frozen":!1,w=e?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(e)):!1,u=w&&w.length?w[0].nextSibling:null;if(y.hasClass(s)){if(a.showSummaryOnHide){if(i)while(i){if(n(i).hasClass("jqfoot")&&(d=parseInt(n(i).attr("jqfootlevel"),10),d<=h))break;n(i).hide();i=i.nextSibling;e&&(n(u).hide(),u=u.nextSibling)}}else if(i)while(i){if(f=k(i.className),f!==undefined&&f<=h)break;n(i).hide();i=i.nextSibling;e&&(n(u).hide(),u=u.nextSibling)}y.removeClass(s).addClass(c);p=!0}else{if(i)for(l=undefined;i;){if(f=k(i.className),l===undefined&&(l=f===undefined),f!==undefined){if(f<=h)break;f===h+1&&(n(i).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(s).addClass(c),e&&n(u).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(s).addClass(c))}else l&&(n(i).show(),e&&n(u).show());i=i.nextSibling;e&&(u=u.nextSibling)}y.removeClass(c).addClass(s)}n(r).triggerHandler("jqGridGroupingClickGroup",[t,p]);n.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,t,p)}),!1},groupingRender:function(t,i,r,u){return this.each(function(){function k(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function b(t,r,u,f){for(var s=k(t,r,u),h=e.p.colModel,c,v=s.cnt,y="",l,a,o=f;o<i;o++)l="<td "+e.formatCol(o,1,"")+">&#160;<\/td>",a="{0}",n.each(s.summary,function(){if(this.nm===h[o].name){h[o].summaryTpl&&(a=h[o].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&v>0&&(this.v=this.v/v));try{this.groupCount=s.cnt;this.groupIndex=s.dataIndex;this.groupValue=s.value;c=e.formatter("",this.v,o,this)}catch(t){c=this.v}return l="<td "+e.formatCol(o,1,"")+">"+n.jgrid.format(a,c)+"<\/td>",!1}}),y+=l;return y}var e=this,f=e.p.groupingView,o="",a="",s,l,p=f.groupCollapse?f.plusicon:f.minusicon,h,v=[],w=f.groupField.length,c,y;p+=" tree-wrap-"+e.p.direction;n.each(e.p.colModel,function(n,t){for(var i=0;i<w;i++)if(f.groupField[i]===t.name){v[i]=n;break}});c=0;y=n.makeArray(f.groupSummary);y.reverse();n.each(f.groups,function(k,d){var ft,nt,ut;if(f._locgr&&!(d.startRow+d.cnt>(r-1)*u&&d.startRow<r*u))return!0;c++;l=e.p.id+"ghead_"+d.idx;s=l+"_"+k;a="<span style='cursor:pointer;' class='ui-icon "+p+"' onclick=\"jQuery('#"+n.jgrid.jqID(e.p.id)+"').jqGrid('groupingToggle','"+s+"');return false;\"><\/span>";try{n.isArray(f.formatDisplayField)&&n.isFunction(f.formatDisplayField[d.idx])?(d.displayValue=f.formatDisplayField[d.idx].call(e,d.displayValue,d.value,e.p.colModel[v[d.idx]],d.idx,f),h=d.displayValue):h=e.formatter(s,d.displayValue,v[d.idx],d.value)}catch(st){h=d.displayValue}if(f.groupSummaryPos[d.idx]==="header"?(o+='<tr id="'+s+'"'+(f.groupCollapse&&d.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+e.p.direction+" "+l+'"><td style="padding-left:'+d.idx*12+'px;">'+a+n.jgrid.template(f.groupText[d.idx],h,d.cnt,d.summary)+"<\/td>",o+=b(k,d.idx-1,f.groups,1),o+="<\/tr>"):o+='<tr id="'+s+'"'+(f.groupCollapse&&d.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+e.p.direction+" "+l+'"><td style="padding-left:'+d.idx*12+'px;" colspan="'+i+'">'+a+n.jgrid.template(f.groupText[d.idx],h,d.cnt,d.summary)+"<\/td><\/tr>",ft=w-1===d.idx,ft){var rt=f.groups[k+1],tt,g,it=0,et=d.startRow,ot=rt!==undefined?f.groups[k+1].startRow:t.length;for(f._locgr&&(it=(r-1)*u,it>d.startRow&&(et=it)),tt=et;tt<ot;tt++){if(!t[tt-it])break;o+=t[tt-it].join("")}if(f.groupSummaryPos[d.idx]!=="header"){if(rt!==undefined){for(nt=0;nt<f.groupField.length;nt++)if(rt.dataIndex===f.groupField[nt])break;c=f.groupField.length-nt}for(g=0;g<c;g++)y[g]&&(ut="",f.groupCollapse&&!f.showSummaryOnHide&&(ut=' style="display:none;"'),o+="<tr"+ut+' jqfootlevel="'+(d.idx-g)+'" role="row" class="ui-widget-content jqfoot ui-row-'+e.p.direction+'">',o+=b(k,g,f.groups,0),o+="<\/tr>");c=nt}}});n("#"+n.jgrid.jqID(e.p.id)+" tbody:first").append(o);o=null})},groupingGroupBy:function(t,i){return this.each(function(){var f=this,u,r;for(typeof t=="string"&&(t=[t]),u=f.p.groupingView,f.p.grouping=!0,u.visibiltyOnNextGrouping===undefined&&(u.visibiltyOnNextGrouping=[]),r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(f).jqGrid("showCol",u.groupField[r]);for(r=0;r<t.length;r++)u.visibiltyOnNextGrouping[r]=n("#"+n.jgrid.jqID(f.p.id)+"_"+n.jgrid.jqID(t[r])).is(":visible");f.p.groupingView=n.extend(f.p.groupingView,i||{});u.groupField=t;n(f).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this,r,u;if(t===undefined&&(t=!0),i.p.grouping=!1,t===!0){for(r=i.p.groupingView,u=0;u<r.groupField.length;u++)!r.groupColumnShow[u]&&r.visibiltyOnNextGrouping[u]&&n(i).jqGrid("showCol",r.groupField);n("tr.jqgroup, tr.jqfoot","#"+n.jgrid.jqID(i.p.id)+" tbody:first").remove();n("tr.jqgrow:hidden","#"+n.jgrid.jqID(i.p.id)+" tbody:first").show()}else n(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return t===""?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return t===""?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return(t===""&&(t=0),f.hasOwnProperty(i))?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),r!=null&&(u==="fixed"?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}}})}(jQuery),function(n){"use strict";n.jgrid.extend({jqGridImport:function(t){return t=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var i=this,u=function(t,r){var s=n(r.xmlGrid.config,t)[0],h=n(r.xmlGrid.data,t)[0],u,f,e,o;if(xmlJsonClass.xml2json&&n.jgrid.parse){u=xmlJsonClass.xml2json(s," ");u=n.jgrid.parse(u);for(e in u)u.hasOwnProperty(e)&&(f=u[e]);h?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(i).jqGrid(f).jqGrid("setGridParam",{datatype:o})):n(i).jqGrid(f);u=null;f=null}else alert("xml2json or parse are not present")},f=function(t,r){var f,e,u,o,s;t&&typeof t=="string"&&(f=!1,n.jgrid.useJSON&&(n.jgrid.useJSON=!1,f=!0),e=n.jgrid.parse(t),f&&(n.jgrid.useJSON=!0),u=e[r.jsonGrid.config],o=e[r.jsonGrid.data],o?(s=u.datatype,u.datatype="jsonstring",u.datastr=o,n(i).jqGrid(u).jqGrid("setGridParam",{datatype:s})):n(i).jqGrid(u))},r;switch(t.imptype){case"xml":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(r,f){f==="success"&&(u(r.responseXML,t),n(i).triggerHandler("jqGridImportComplete",[r,t]),n.isFunction(t.importComplete)&&t.importComplete(r));r=null}},t.ajaxOptions));break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(r=n.parseXML(t.impstring),r&&(u(r,t),n(i).triggerHandler("jqGridImportComplete",[r,t]),n.isFunction(t.importComplete)&&t.importComplete(r),t.impstring=null),r=null);break;case"json":n.ajax(n.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(r){try{f(r.responseText,t);n(i).triggerHandler("jqGridImportComplete",[r,t]);n.isFunction(t.importComplete)&&t.importComplete(r)}catch(u){}r=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),n(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),n.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each(function(){if(this.grid){var u,r=n.extend(!0,{},n(this).jqGrid("getGridParam"));if(r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null,r.treeGrid)for(u in r.treeReader)r.treeReader.hasOwnProperty(u)&&(r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"<\/"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(r,t.root,t.ident,!1)+"}";r.postData.filters!==undefined&&(i=i.replace(/filters":"/,'filters":'),i=i.replace(/}]}"/,"}]}"))}}}),i},excelExport:function(t){return t=n.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var u,i,r;this.grid&&t.exptype==="remote"&&(i=n.extend({},this.p.postData),i[t.oper]=t.tag,r=jQuery.param(i),u=t.url.indexOf("?")!==-1?t.url+"&"+r:t.url+"?"+r,window.location=u)})}})}(jQuery),function($){"use strict";if($.jgrid.msie&&$.jgrid.msiever()===8&&($.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display==="none"}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var n=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(t,i){var u=n.call(this,t,i),r;return i&&this.selectedList&&(r=this.element,this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})),u}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();$.Widget===undefined?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)});$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(n){return this.each(function(){function u(){t.p.disableClick=!0}var t=this,r=$.jgrid.jqID(t.p.id),i={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(n){return $(document.createElement(n[0].nodeName)).addClass(n[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(n,i){var f=$(i.item).parent(),e=$(">th",f),o=t.p.colModel,u={},s=t.p.id+"_",r;$.each(o,function(n){u[this.name]=n});r=[];e.each(function(){var n=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");u.hasOwnProperty(n)&&r.push(u[n])});$(t).jqGrid("remapColumns",r,!0,!0);$.isFunction(t.p.sortable.update)&&t.p.sortable.update(r);setTimeout(function(){t.p.disableClick=!1},50)}},f;t.p.sortable.options?$.extend(i,t.p.sortable.options):$.isFunction(t.p.sortable)&&(t.p.sortable={update:t.p.sortable});i.start?(f=i.start,i.start=function(n,t){u();f.call(this,n,t)}):i.start=u;t.p.sortable.exclude&&(i.items+=":not("+t.p.sortable.exclude+")");n.sortable(i).data("sortable").floating=!0})},columnChooser:function(n){function h(n,t,i){if(t>=0){var r=n.slice(),u=r.splice(t,Math.max(n.length-t,t));return t>n.length&&(t=n.length),r[t]=i,r.concat(u)}}function f(n,t){n&&(typeof n=="string"?$.fn[n]&&$.fn[n].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(n)&&n.apply(t,$.makeArray(arguments).slice(2)))}var t=this,r,i,o,s;if(!$("#colchooser_"+$.jgrid.jqID(t[0].p.id)).length){if(r=$('<div id="colchooser_'+t[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),i=$("select",r),n=$.extend({width:420,height:240,classname:null,done:function(n){n&&t.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(n){var t={};return t[n.bSubmit]=function(){n.apply_perm();n.cleanup(!1)},t[n.bCancel]=function(){n.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){n.cleanup(!0)},modal:n.modal||!1,resizable:n.resizable||!0,width:n.width+20},n.dialog_opts||{})},apply_perm:function(){$("option",i).each(function(){this.selected?t.jqGrid("showCol",u[this.value].name):t.jqGrid("hideCol",u[this.value].name)});var r=[];$("option:selected",i).each(function(){r.push(parseInt(this.value,10))});$.each(r,function(){delete e[u[parseInt(this,10)].name]});$.each(e,function(){var n=parseInt(this,10);r=h(r,n,n)});n.done&&n.done.call(t,r)},cleanup:function(u){f(n.dlog,r,"destroy");f(n.msel,i,"destroy");r.remove();u&&n.done&&n.done.call(t)},msel_opts:{}},$.jgrid.col,n||{}),$.ui&&$.ui.multiselect&&n.msel==="multiselect"){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}n.msel_opts=$.extend($.ui.multiselect.defaults,n.msel_opts)}n.caption&&r.attr("title",n.caption);n.classname&&(r.addClass(n.classname),i.addClass(n.classname));n.width&&($(">div",r).css({width:n.width,margin:"0 auto"}),i.css("width",n.width));n.height&&($(">div",r).css("height",n.height),i.css("height",n.height-10));var u=t.jqGrid("getGridParam","colModel"),c=t.jqGrid("getGridParam","colNames"),e={},l=[];i.empty();$.each(u,function(n){if(e[this.name]=n,this.hidedlg){this.hidden||l.push(n);return}i.append("<option value='"+n+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(c[n])+"<\/option>")});o=$.isFunction(n.dlog_opts)?n.dlog_opts.call(t,n):n.dlog_opts;f(n.dlog,r,o);s=$.isFunction(n.msel_opts)?n.msel_opts.call(t,n):n.msel_opts;f(n.msel,i,s)}},sortableRows:function(n){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(n=$.extend({cursor:"move",axis:"y",items:".jqgrow"},n||{}),n.start&&$.isFunction(n.start)?(n._start_=n.start,delete n.start):n._start_=!1,n.update&&$.isFunction(n.update)?(n._update_=n.update,delete n.update):n._update_=!1,n.start=function(i,r){if($(r.item).css("border-width","0"),$("td",r.item).each(function(n){this.style.width=t.grid.cols[n].style.width}),t.p.subGrid){var u=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",u)}catch(f){}}n._start_&&n._start_.apply(this,[i,r])},n.update=function(i,r){$(r.item).css("border-width","");t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(n+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))});n._update_&&n._update_.apply(this,[i,r])},$("tbody:first",t).sortable(n),$("tbody:first",t).disableSelection()))})},gridDnD:function(n){return this.each(function(){function u(){var n=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(n.drag)?n.drag.call($(t),n):n.drag)}var t=this,i,r,f;if(t.grid&&!t.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>",$("#jqgrid_dnd")[0]===undefined&&$("body").append(f),typeof n=="string"&&n==="updateDnD"&&t.p.jqgdnd===!0){u();return}if(n=$.extend({drag:function(n){return $.extend({start:function(i,r){var u,f;if(t.p.subGrid){f=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",f)}catch(e){}}for(u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("getGridParam","reccount")===0&&$($.data(t,"dnd").connectWith[u]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(n){this.style.width=t.grid.headers[n].width+"px"});n.onstart&&$.isFunction(n.onstart)&&n.onstart.call($(t),i,r)},stop:function(i,r){var u,f;for(r.helper.dropped&&!n.dragcopy&&(f=$(r.helper).attr("id"),f===undefined&&(f=$(this).attr("id")),$(t).jqGrid("delRowData",f)),u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("delRowData","jqg_empty_row");n.onstop&&$.isFunction(n.onstop)&&n.onstop.call($(t),i,r)}},n.drag_opts||{})},drop:function(n){return $.extend({accept:function(n){var t,i;return $(n).hasClass("jqgrow")?(t=$(n).closest("table.ui-jqgrid-btable"),t.length>0&&$.data(t[0],"dnd")!==undefined)?(i=$.data(t[0],"dnd").connectWith,$.inArray("#"+$.jgrid.jqID(this.id),i)!==-1?!0:!1):!1:n},drop:function(i,r){var c,u,e,o;if($(r.draggable).hasClass("jqgrow")){if(c=$(r.draggable).attr("id"),u=r.draggable.parent().parent().jqGrid("getRowData",c),!n.dropbyname){var h=0,l={},f,s,a=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(s in u)u.hasOwnProperty(s)&&(f=a[h].name,f==="cb"||f==="rn"||f==="subgrid"||u.hasOwnProperty(s)&&a[h]&&(l[f]=u[s]),h++);u=l}catch(v){}}r.helper.dropped=!0;n.beforedrop&&$.isFunction(n.beforedrop)&&(e=n.beforedrop.call(this,i,r,u,$("#"+$.jgrid.jqID(t.p.id)),$(this)),e!==undefined&&e!==null&&typeof e=="object"&&(u=e));r.helper.dropped&&(n.autoid&&($.isFunction(n.autoid)?o=n.autoid.call(this,u):(o=Math.ceil(Math.random()*1e3),o=n.autoidprefix+o)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",o,u,n.droppos));n.ondrop&&$.isFunction(n.ondrop)&&n.ondrop.call(this,i,r,u)}}},n.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},n||{}),n.connectWith)for(n.connectWith=n.connectWith.split(","),n.connectWith=$.map(n.connectWith,function(n){return $.trim(n)}),$.data(t,"dnd",n),t.p.reccount===0||t.p.jqgdnd||u(),t.p.jqgdnd=!0,i=0;i<n.connectWith.length;i++)r=n.connectWith[i],$(r).droppable($.isFunction(n.drop)?n.drop.call($(t),n):n.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),optstest;$t.grid&&$.fn.resizable&&(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(n,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);opts._stop_&&opts._stop_.call($t,n,t)},opts._alsoResize_?(optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}",opts.alsoResize=eval("("+optstest+")")):opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID),delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts))})}})}(jQuery),function(n){"use strict";function t(n,t){var i,r,u=[],f;if(!this||typeof n!="function"||n instanceof RegExp)throw new TypeError;for(f=this.length,i=0;i<f;i++)if(this.hasOwnProperty(i)&&(r=this[i],n.call(t,r,i,this))){u.push(r);break}return u}n.assocArraySize=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};n.jgrid.extend({pivotSetup:function(i,r){var f=[],o=[],c=[],h=[],s={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},e=[],u=n.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},r||{});return this.each(function(){function wt(n,i,r){var u;return u=t.call(n,i,r),u.length>0?u[0]:null}function bt(n,t){var i=0,r=!0;for(var u in n){if(n[u]!=this[i]){r=!1;break}if(i++,i>=this.length)break}return r&&(it=t),r}function kt(n,t,i,r){var u;switch(n){case"sum":u=parseFloat(t||0)+parseFloat(r[i]||0);break;case"count":(t===""||t==null)&&(t=0);u=r.hasOwnProperty(i)?t+1:0;break;case"min":u=t===""||t==null?parseFloat(r[i]||0):Math.min(parseFloat(t),parseFloat(r[i]||0));break;case"max":u=t===""||t==null?parseFloat(r[i]||0):Math.max(parseFloat(t),parseFloat(r[i]||0))}return u}function rt(t,i,r,u){var l=i.length,f,e,s,a,c,o;for(a=n.isArray(r)?r.length:1,h=[],h.root=0,s=0;s<a;s++){for(c=[],f=0;f<l;f++){if(r==null)e=n.trim(i[f].member)+"_"+i[f].aggregator,o=e;else{o=r[s].replace(/\s+/g,"");try{e=l===1?o:o+"_"+i[f].aggregator+"_"+f}catch(v){}}u[e]=c[e]=kt(i[f].aggregator,u[e],i[f].member,t)}h[o]=c}return u}function yt(n){var o,r,t,s,i,h,l,c;for(t in n)if(n.hasOwnProperty(t)){if(typeof n[t]!="object"&&(t==="level"&&(st[n.level]===undefined&&(st[n.level]="",n.level>0&&n.text!=="_r_Totals"&&(e[n.level-1]={useColSpanStyle:!1,groupHeaders:[]})),st[n.level]!==n.text&&n.children.length&&n.text!=="_r_Totals"&&n.level>0&&(e[n.level-1].groupHeaders.push({titleText:n.text}),h=e[n.level-1].groupHeaders.length,l=h===1?dt:at+(h-1)*tt,e[n.level-1].groupHeaders[h-1].startColumnName=f[l].name,e[n.level-1].groupHeaders[h-1].numberOfColumns=f.length-l,at=f.length),st[n.level]=n.text),n.level===a&&t==="level"&&a>0))if(tt>1){c=1;for(o in n.fields)c===1&&e[a-1].groupHeaders.push({startColumnName:o,numberOfColumns:1,titleText:n.text}),c++;e[a-1].groupHeaders[e[a-1].groupHeaders.length-1].numberOfColumns=c-1}else e.splice(a-1,1);if(n[t]!=null&&typeof n[t]=="object"&&yt(n[t]),t==="level"&&n.level>0){r=0;for(o in n.fields){i={};for(s in u.aggregates[r])if(u.aggregates[r].hasOwnProperty(s))switch(s){case"member":case"label":case"aggregator":break;default:i[s]=u.aggregates[r][s]}tt>1?(i.name=o,i.label=u.aggregates[r].label||o):(i.name=n.text,i.label=n.text==="_r_Totals"?u.rowTotalsText:n.text);f.push(i);r++}}}}var p,it,r,pt=i.length,k,a,tt,w,b,ct=0,vt,ut,ft,d,g,v,l,nt,ht;if(u.rowTotals&&u.yDimension.length>0&&(vt=u.yDimension[0].dataName,u.yDimension.splice(0,0,{dataName:vt}),u.yDimension[0].converter=function(){return"_r_Totals"}),k=n.isArray(u.xDimension)?u.xDimension.length:0,a=u.yDimension.length,tt=n.isArray(u.aggregates)?u.aggregates.length:0,k===0||tt===0)throw"xDimension or aggregates optiona are not set!";for(r=0;r<k;r++)ut={name:u.xDimension[r].dataName,frozen:u.frozenStaticCols},ut=n.extend(!0,ut,u.xDimension[r]),f.push(ut);for(ft=k-1,d={};ct<pt;){p=i[ct];g=[];v=[];w={};r=0;do g[r]=n.trim(p[u.xDimension[r].dataName]),w[u.xDimension[r].dataName]=g[r],r++;while(r<k);if(l=0,it=-1,b=wt(o,bt,g),b){if(it>=0){if(l=0,a>=1){for(l=0;l<a;l++)v[l]=n.trim(p[u.yDimension[l].dataName]),u.yDimension[l].converter&&n.isFunction(u.yDimension[l].converter)&&(v[l]=u.yDimension[l].converter.call(this,v[l],g,v));b=rt(p,u.aggregates,v,b)}else a===0&&(b=rt(p,u.aggregates,null,b));o[it]=b}}else{if(l=0,a>=1){for(l=0;l<a;l++)v[l]=n.trim(p[u.yDimension[l].dataName]),u.yDimension[l].converter&&n.isFunction(u.yDimension[l].converter)&&(v[l]=u.yDimension[l].converter.call(this,v[l],g,v));w=rt(p,u.aggregates,v,w)}else a===0&&(w=rt(p,u.aggregates,null,w));o.push(w)}var lt=0,y=null,et=null;for(var ot in h){if(lt===0)d.children&&d.children!==undefined||(d={text:ot,level:0,children:[]}),y=d.children;else{for(et=null,r=0;r<y.length;r++)if(y[r].text===ot){et=y[r];break}et?y=et.children:(y.push({children:[],text:ot,level:lt,fields:h[ot]}),y=y[y.length-1].children)}lt++}ct++}var st=[],at=f.length,dt=at;if(a>0&&(e[a-1]={useColSpanStyle:!1,groupHeaders:[]}),yt(d,0),u.colTotals)for(ht=o.length;ht--;)for(r=k;r<f.length;r++)nt=f[r].name,c[nt]?c[nt]+=parseFloat(o[ht][nt]||0):c[nt]=parseFloat(o[ht][nt]||0);if(ft>0)for(r=0;r<ft;r++)s.groupingView.groupField[r]=f[r].name,s.groupingView.groupSummary[r]=u.groupSummary,s.groupingView.groupSummaryPos[r]=u.groupSummaryPos;else s.grouping=!1;s.sortname=f[ft].name;s.groupingView.hideFirstGroupCol=!0}),{colModel:f,rows:o,groupOptions:s,groupHeaders:e,summary:c}},jqPivot:function(t,i,r,u){return this.each(function(){function e(t){for(var e=jQuery(f).jqGrid("pivotSetup",t,i),s=n.assocArraySize(e.summary)>0?!0:!1,h=n.jgrid.from(e.rows),o,u=0;u<e.groupOptions.groupingView.groupField.length;u++)h.orderBy(e.groupOptions.groupingView.groupField[u],"a","text","");if(jQuery(f).jqGrid(n.extend({datastr:n.extend(h.select(),s?{userdata:e.summary}:{}),datatype:"jsonstring",footerrow:s,userDataOnFooter:s,colModel:e.colModel,viewrecords:!0,sortname:i.xDimension[0].dataName},r||{},e.groupOptions)),o=e.groupHeaders,o.length)for(u=0;u<o.length;u++)o[u]&&o[u].groupHeaders.length&&jQuery(f).jqGrid("setGroupHeaders",o[u]);i.frozenStaticCols&&jQuery(f).jqGrid("setFrozenColumns")}var f=this;typeof t=="string"?n.ajax(n.extend({url:t,dataType:"json",success:function(t){e(n.jgrid.getAccessor(t,u&&u.reader?u.reader:"rows"))}},u||{})):e(t)})}})}(jQuery),function(n){n.jgrid=n.jgrid||{};n.extend(n.jgrid,{defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(n){return n<11||n>13?["st","nd","rd","th"][Math.min((n-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery),function(n,t){var i=function(i,r){function vi(n){n.preventDefault();n.stopPropagation();var r=u.offset(),t=r[nt],i=f?n.pageY:n.pageX;i>t+e?(e=i-t-ut+bt,e>g&&(e=g)):(e=i-t-bt,e<0&&(e=0));c.update_scroll()}function yi(t){t.preventDefault();t.stopPropagation();v=f?w=t.pageY:w=t.pageX;st=!0;n("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",pi);n(kt).off("mouseup.ace_scroll").on("mouseup.ace_scroll",wi);u.addClass("active");dt&&c.$element.trigger("drag.start")}function pi(n){n.preventDefault();n.stopPropagation();v=f?n.pageY:n.pageX;v-w+e>g?v=w+g-e:v-w+e<0&&(v=w-e);e=e+(v-w);w=v;e<0?e=0:e>g&&(e=g);c.update_scroll()}function wi(t){t.preventDefault();t.stopPropagation();st=!1;n("html").off(".ace_scroll");n(kt).off(".ace_scroll");u.removeClass("active");dt&&c.$element.trigger("drag.end");y&&gt&&!yt&&ri()}function pt(n){var i=+new Date,t;ni&&i-ii>1e3&&(t=h[tt],ti!=t&&(ti=t,rt=!0,c.reset(!0)),ii=i);y&&gt&&(a!=null&&(clearTimeout(a),a=null),u.addClass("not-idle"),yt||n!=!0||ri())}function ri(){a!=null&&(clearTimeout(a),a=null);a=setTimeout(function(){a=null;u.removeClass("not-idle")},ai)}function ui(){u.css("visibility","hidden").addClass("scroll-hover");k=f?parseInt(u.outerWidth())||0:parseInt(u.outerHeight())||0;u.css("visibility","").removeClass("scroll-hover")}function hi(){if(vt!==!1){var i=s.offset(),n=i.left,t=i.top;f?lt||(n+=s.outerWidth()-k):lt||(t+=s.outerHeight()-k);vt===!0?u.css({top:parseInt(t),left:parseInt(n)}):vt==="left"?u.css("left",parseInt(n)):vt==="top"&&u.css("top",parseInt(t))}}var c=this,ci=ace.helper.getAttrSettings(i,n.fn.ace_scroll.defaults),o=n.extend({},n.fn.ace_scroll.defaults,r,ci),w,v,a,ii;this.size=0;this.lock=!1;this.lock_anyway=!1;this.$element=n(i);this.element=i;var f=!0,b=!1,y=!1,ht=!1,s=null,h=null,u=null,wt=null,fi=null,ei=null,d=null,ut=0,e=0,g=0,bt=0,ct=!0,oi=!1,p="",lt=!1,k=0,nt,ft,et,si,l,tt,ot=1,at=!1,st=!1,kt="onmouseup"in window?window:"html",dt=o.dragEvent||!1,li=r.scrollEvent||!1,it=o.detached||!1,vt=o.updatePos||!1,gt=o.hideOnIdle||!1,ai=o.hideDelay||1500,yt=!1,ni=o.observeContent||!1,ti=0,rt=!0;return this.create=function(t){var a,r,i,v;if(!ht){t&&(o=n.extend({},n.fn.ace_scroll.defaults,t));this.size=parseInt(this.$element.attr("data-size"))||o.size||200;f=!o.horizontal;nt=f?"top":"left";ft=f?"height":"width";et=f?"maxHeight":"maxWidth";si=f?"clientHeight":"clientWidth";l=f?"scrollTop":"scrollLeft";tt=f?"scrollHeight":"scrollWidth";this.$element.addClass("ace-scroll");this.$element.css("position")=="static"?(at=this.element.style.position,this.element.style.position="relative"):at=!1;a=null;it?a=n('<div class="scroll-track scroll-detached"><div class="scroll-bar"><\/div><\/div>').appendTo("body"):(this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"><\/div><\/div>'));s=this.$element;it||(s=this.$element.find(".scroll-content").eq(0));f||s.wrapInner("<div />");h=s.get(0);it?(u=a,hi()):u=this.$element.find(".scroll-track").eq(0);wt=u.find(".scroll-bar").eq(0);fi=u.get(0);ei=wt.get(0);d=ei.style;f||u.addClass("scroll-hz");o.styleClass&&(p=o.styleClass,u.addClass(p),lt=!!p.match(/scroll\-left|scroll\-top/));k==0&&(u.show(),ui());u.hide();u.on("mousedown",vi);wt.on("mousedown",yi);s.on("scroll",function(){ct&&(e=parseInt(Math.round(this[l]*ot)),d[nt]=e+"px");ct=!1;li&&this.$element.trigger("scroll",[h])});if(o.mouseWheel){this.lock=o.mouseWheelLock;this.lock_anyway=o.lockAnyway;this.$element.on(!n.event.special.mousewheel?"mousewheel.ace_scroll DOMMouseScroll.ace_scroll":"mousewheel.ace_scroll",function(t){var i;if(!b){if(pt(!0),!y)return!c.lock_anyway;st&&(st=!1,n("html").off(".ace_scroll"),n(kt).off(".ace_scroll"),dt&&c.$element.trigger("drag.end"));t.deltaY=t.deltaY||0;var u=t.deltaY>0||t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1,f=!1,e=h[si],r=h[l];return c.lock||(f=u==-1?h[tt]<=r+e:r==0),c.move_bar(!0),i=parseInt(e/8),i<80&&(i=80),i>c.size&&(i=c.size),i+=1,h[l]=r-u*i,f&&!c.lock_anyway}})}if(r=ace.vars.touch&&"ace_drag"in n.event.special&&o.touchDrag,r){i="";v=r?"ace_drag":"swipe";this.$element.on(v+".ace_scroll",function(n){if(b){n.retval.cancel=!0;return}if(pt(!0),!y){n.retval.cancel=this.lock_anyway;return}if(i=n.direction,f&&(i=="up"||i=="down")||!f&&(i=="left"||i=="right")){var t=f?n.dy:n.dx;t!=0&&(Math.abs(t)>20&&r&&(t=t*2),c.move_bar(!0),h[l]=h[l]+t)}})}if(gt&&u.addClass("idle-hide"),ni)u.on("mouseenter.ace_scroll",function(){yt=!0;pt(!1)}).on("mouseleave.ace_scroll",function(){yt=!1;st==!1&&ri()});this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(){rt=!0;ni?pt(!0):o.hoverReset&&c.reset(!0);u.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){u.removeClass("scroll-hover")});f||s.children(0).css(ft,this.size);s.css(et,this.size);b=!1;ht=!0}},this.is_active=function(){return y},this.is_enabled=function(){return!b},this.move_bar=function(n){ct=n},this.get_track=function(){return fi},this.reset=function(n){var i,c,r,t;if(!b&&(ht||this.create(),i=this.size,!n||rt)){if(rt=!1,it&&(c=parseInt(Math.round((parseInt(s.css("border-top-width"))+parseInt(s.css("border-bottom-width")))/2.5)),i-=c),r=f?h[tt]:i,f&&r==0||!f&&this.element.scrollWidth==0){u.removeClass("scroll-active");return}t=f?i:h.clientWidth;f||s.children(0).css(ft,i);s.css(et,this.size);r>t?(y=!0,u.css(ft,t).show(),ot=parseFloat((t/r).toFixed(5)),ut=parseInt(Math.round(t*ot)),bt=parseInt(Math.round(ut/2)),g=t-ut,e=parseInt(Math.round(h[l]*ot)),d[ft]=ut+"px",d[nt]=e+"px",u.addClass("scroll-active"),k==0&&ui(),oi||(o.reset&&(h[l]=0,d[nt]=0),oi=!0),it&&hi()):(y=!1,u.hide(),u.removeClass("scroll-active"),s.css(et,""));return}},this.disable=function(){h[l]=0;d[nt]=0;b=!0;y=!1;u.hide();this.$element.addClass("scroll-disabled");u.removeClass("scroll-active");s.css(et,"")},this.enable=function(){b=!1;this.$element.removeClass("scroll-disabled")},this.destroy=function(){y=!1;b=!1;ht=!1;this.$element.removeClass("ace-scroll scroll-disabled scroll-active");this.$element.off(".ace_scroll");it||(f||s.find("> div").children().unwrap(),s.children().unwrap(),s.remove());u.remove();at!==!1&&(this.element.style.position=at);a!=null&&(clearTimeout(a),a=null)},this.modify=function(t){t&&(o=n.extend({},o,t));this.destroy();this.create();rt=!0;this.reset(!0)},this.update=function(i){i&&(o=n.extend({},o,i));this.size=i.size||this.size;this.lock=i.mouseWheelLock||this.lock;this.lock_anyway=i.lockAnyway||this.lock_anyway;i.styleClass!=t&&(p&&u.removeClass(p),p=i.styleClass,p&&u.addClass(p),lt=!!p.match(/scroll\-left|scroll\-top/))},this.start=function(){h[l]=0},this.end=function(){h[l]=h[tt]},this.hide=function(){u.hide()},this.show=function(){u.show()},this.update_scroll=function(){ct=!1;d[nt]=e+"px";h[l]=parseInt(Math.round(e/ot))},w=-1,v=-1,a=null,ii=0,this.track_size=function(){return k==0&&ui(),k},this.create(),rt=!0,this.reset(!0),ti=h[tt],this};n.fn.ace_scroll=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_scroll"),o=typeof r=="object"&&r;t||e.data("ace_scroll",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,observeContent:!1,hideOnIdle:!1,hideDelay:1500,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1,detached:!1,updatePos:!0}}(window.jQuery),function(n,t){var i=function(t,i){var c=ace.helper.getAttrSettings(t,n.fn.ace_colorpicker.defaults),o=n.extend({},n.fn.ace_colorpicker.defaults,i,c),r=n(t),s="",h="",u=null,f=[],e;r.addClass("hide").find("option").each(function(){var t="colorpick-btn",n=this.value.replace(/[^\w\s,#\(\)\.]/g,"");this.value!=n&&(this.value=n);this.selected&&(t+=" selected",h=n);f.push(n);s+='<li><a class="'+t+'" href="#" style="background-color:'+n+';" data-color="'+n+'"><\/a><\/li>'}).end().on("change.color",function(){r.next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker">\t\t<a data-toggle="dropdown" class="dropdown-toggle" '+(o.auto_pos?'data-position="auto"':"")+' href="#"><span class="btn-colorpicker" style="background-color:'+h+'"><\/span><\/a><ul class="dropdown-menu'+(o.caret?" dropdown-caret":"")+(o.pull_right?" dropdown-menu-right":"")+'">'+s+"<\/ul><\/div>");e=r.next().find(".dropdown-menu");e.on(ace.click_event,function(t){var i=n(t.target),f;return i.is(".colorpick-btn")?(u&&u.removeClass("selected"),u=i,u.addClass("selected"),f=u.data("color"),r.val(f).trigger("change"),t.preventDefault(),!0):!1});u=r.next().find("a.selected");this.pick=function(i,u){if(typeof i=="number"){if(i>=f.length)return;t.selectedIndex=i;e.find("a:eq("+i+")").trigger(ace.click_event)}else if(typeof i=="string"){var o=i.replace(/[^\w\s,#\(\)\.]/g,"");if(i=f.indexOf(o),i==-1&&u===!0&&(f.push(o),n("<option />").appendTo(r).val(o),n('<li><a class="colorpick-btn" href="#"><\/a><\/li>').appendTo(e).find("a").css("background-color",o).data("color",o),i=f.length-1),i==-1)return;e.find("a:eq("+i+")").trigger(ace.click_event)}};this.destroy=function(){r.removeClass("hide").off("change.color").next().remove();f=[]}};n.fn.ace_colorpicker=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_colorpicker"),o=typeof r=="object"&&r;t||e.data("ace_colorpicker",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.ace_colorpicker.defaults={pull_right:!1,caret:!0,auto_pos:!0}}(window.jQuery),function(n,t){var s="multiple"in document.createElement("INPUT"),u="FileList"in window,h="FileReader"in window,r="File"in window,i=function(t,i){var r=this,e=ace.helper.getAttrSettings(t,n.fn.ace_file_input.defaults),u,f;this.settings=n.extend({},n.fn.ace_file_input.defaults,i,e);this.$element=n(t);this.element=t;this.disabled=!1;this.can_reset=!0;this.$element.off("change.ace_inner_call").on("change.ace_inner_call",function(n,t){if(!r.disabled)return t===!0?void 0:l.call(r)});u=this.$element.closest("label").css({display:"block"});f=u.length==0?"label":"span";this.$element.wrap("<"+f+' class="ace-file-input" />');this.apply_settings();this.reset_input_field()};i.error={FILE_LOAD_FAILED:1,IMAGE_LOAD_FAILED:2,THUMBNAIL_FAILED:3};i.prototype.apply_settings=function(){var t=this,i,r;if(this.multi=this.$element.attr("multiple")&&s,this.well_style=this.settings.style=="well",this.well_style?this.$element.parent().addClass("ace-file-multiple"):this.$element.parent().removeClass("ace-file-multiple"),this.$element.parent().find(":not(input[type=file])").remove(),this.$element.after('<span class="ace-file-container" data-title="'+this.settings.btn_choose+'"><span class="ace-file-name" data-title="'+this.settings.no_file+'">'+(this.settings.no_icon?'<i class="'+ace.vars.icon+this.settings.no_icon+'"><\/i>':"")+"<\/span><\/span>"),this.$label=this.$element.next(),this.$container=this.$element.closest(".ace-file-input"),i=!!this.settings.icon_remove,i){r=n('<a class="remove" href="#"><i class="'+ace.vars.icon+this.settings.icon_remove+'"><\/i><\/a>').appendTo(this.$element.parent());r.on(ace.click_event,function(n){var i,r;return(n.preventDefault(),!t.can_reset)?!1:(i=!0,t.settings.before_remove&&(i=t.settings.before_remove.call(t.element)),!i)?!1:(r=t.reset_input(),!1)})}this.settings.droppable&&u&&c.call(this)};i.prototype.show_file_list=function(t,i){var u=typeof t=="undefined"?this.$element.data("ace_input_files"):t,f,e,o,s,y,v,c,p,l;if(u&&u.length!=0){for(this.well_style&&(this.$label.find(".ace-file-name").remove(),this.settings.btn_change||this.$label.addClass("hide-placeholder")),this.$label.attr("data-title",this.settings.btn_change).addClass("selected"),f=0;f<u.length;f++){if(e="",o=!1,typeof u[f]=="string")e=u[f];else if(r&&u[f]instanceof File)e=n.trim(u[f].name);else if(u[f]instanceof Object&&u[f].hasOwnProperty("name"))e=u[f].name,u[f].hasOwnProperty("type")&&(o=u[f].type),u[f].hasOwnProperty("path")||(u[f].path=u[f].name);else continue;s=e.lastIndexOf("\\")+1;s==0&&(s=e.lastIndexOf("/")+1);e=e.substr(s);o==!1&&(o=/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i.test(e)?"image":/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i.test(e)?"video":/\.(mp3|ogg|wav|wma|amr|aac)$/i.test(e)?"audio":"file");y={file:"fa fa-file",image:"fa fa-picture-o file-image",video:"fa fa-film file-video",audio:"fa fa-music file-audio"};v=y[o];this.well_style?(this.$label.append('<span class="ace-file-name" data-title="'+e+'"><i class="'+ace.vars.icon+v+'"><\/i><\/span>'),c=i===!0&&r&&u[f]instanceof File?n.trim(u[f].type):"",p=h&&this.settings.thumbnail&&(c.length>0&&c.match("image")||c.length==0&&o=="image"),p&&(l=this,n.when(a.call(this,u[f])).fail(function(n){l.settings.preview_error&&l.settings.preview_error.call(l,e,n.code)}))):this.$label.find(".ace-file-name").attr({"data-title":e}).find(ace.vars[".icon"]).attr("class",ace.vars.icon+v)}return!0}};i.prototype.reset_input=function(){this.reset_input_ui();this.reset_input_field()};i.prototype.reset_input_ui=function(){this.$label.attr({"data-title":this.settings.btn_choose,"class":"ace-file-container"}).find(".ace-file-name:first").attr({"data-title":this.settings.no_file,"class":"ace-file-name"}).find(ace.vars[".icon"]).attr("class",ace.vars.icon+this.settings.no_icon).prev("img").remove();this.settings.no_icon||this.$label.find(ace.vars[".icon"]).remove();this.$label.find(".ace-file-name").not(":first").remove();this.reset_input_data()};i.prototype.reset_input_field=function(){this.$element.wrap("<form>").parent().get(0).reset();this.$element.unwrap()};i.prototype.reset_input_data=function(){this.$element.data("ace_input_files")&&(this.$element.removeData("ace_input_files"),this.$element.removeData("ace_input_method"))};i.prototype.enable_reset=function(n){this.can_reset=n};i.prototype.disable=function(){this.disabled=!0;this.$element.attr("disabled","disabled").addClass("disabled")};i.prototype.enable=function(){this.disabled=!1;this.$element.removeAttr("disabled").removeClass("disabled")};i.prototype.files=function(){return n(this).data("ace_input_files")||null};i.prototype.method=function(){return n(this).data("ace_input_method")||""};i.prototype.update_settings=function(t){this.settings=n.extend({},this.settings,t);this.apply_settings()};i.prototype.loading=function(t){if(t===!1)this.$container.find(".ace-file-overlay").remove(),this.element.removeAttribute("readonly");else{var r=typeof t=="string"?t:'<i class="overlay-content fa fa-spin fa-spinner orange2 fa-2x"><\/i>',i=this.$container.find(".ace-file-overlay");if(i.length==0){i=n('<div class="ace-file-overlay"><\/div>').appendTo(this.$container);i.on("click tap",function(n){return n.stopImmediatePropagation(),n.preventDefault(),!1});this.element.setAttribute("readonly","true")}i.empty().append(r)}};var c=function(){var n=this,t=this.$element.parent();t.off("dragenter").on("dragenter",function(n){n.preventDefault();n.stopPropagation()}).off("dragover").on("dragover",function(n){n.preventDefault();n.stopPropagation()}).off("drop").on("drop",function(t){var u,i,r;if(t.preventDefault(),t.stopPropagation(),!n.disabled)return(u=t.originalEvent.dataTransfer,i=u.files,!n.multi&&i.length>1&&(r=[],r.push(i[0]),i=r),i=f.call(n,i,!0),i===!1)?!1:(n.$element.data("ace_input_method","drop"),n.$element.data("ace_input_files",i),n.show_file_list(i,!0),n.$element.triggerHandler("change",[!0]),!0)})},l=function(){var n=this.element.files||[this.element.value];return(n=f.call(this,n,!1),n===!1)?!1:(this.$element.data("ace_input_method","select"),this.$element.data("ace_input_files",n),this.show_file_list(n,!0),!0)},a=function(t){var e=this,u=e.$label.find(".ace-file-name:last"),f=new n.Deferred,s=function(t){u.prepend("<img class='middle' style='display:none;' />");var i=u.find("img:last").get(0);n(i).one("load",function(){h.call(null,i)}).one("error",function(){c.call(null,i)});i.src=t},h=function(t){var o=50,r,s,h;if(e.settings.thumbnail=="large"?o=150:e.settings.thumbnail=="fit"&&(o=u.width()),u.addClass(o>50?"large":""),r=v(t,o),r==null){n(this).remove();f.reject({code:i.error.THUMBNAIL_FAILED});return}s=r.w;h=r.h;e.settings.thumbnail=="small"&&(s=h=o);n(t).css({"background-image":"url("+r.src+")",width:s,height:h}).data("thumb",r.src).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show();f.resolve()},c=function(){u.find("img").remove();f.reject({code:i.error.IMAGE_LOAD_FAILED})},o;return r&&t instanceof File?(o=new FileReader,o.onload=function(n){s(n.target.result)},o.onerror=function(){f.reject({code:i.error.FILE_LOAD_FAILED})},o.readAsDataURL(t)):t instanceof Object&&t.hasOwnProperty("path")&&s(t.path),f.promise()},v=function(t,i){var r=t.width,u=t.height,f,e,o;r=r>0?r:n(t).width();u=u>0?u:n(t).height();(r>i||u>i)&&(r>u?(u=parseInt(i/r*u),r=i):(r=parseInt(i/u*r),u=i));try{e=document.createElement("canvas");e.width=r;e.height=u;o=e.getContext("2d");o.drawImage(t,0,0,t.width,t.height,0,0,r,u);f=e.toDataURL()}catch(s){f=null}return f?(/^data\:image\/(png|jpe?g|gif);base64,[0-9A-Za-z\+\/\=]+$/.test(f)||(f=null),!f)?null:{src:f,w:r,h:u}:null},f=function(n,t){var i=y.call(this,n,t);return i===-1?(this.reset_input(),!1):!i||i.length==0?(this.$element.data("ace_input_files")||this.reset_input(),!1):((i instanceof Array||u&&i instanceof FileList)&&(n=i),i=!0,this.settings.before_change&&(i=this.settings.before_change.call(this.element,n,t)),i===-1)?(this.reset_input(),!1):!i||i.length==0?(this.$element.data("ace_input_files")||this.reset_input(),!1):((i instanceof Array||u&&i instanceof FileList)&&(n=i),n)},e=function(n){return n?(typeof n=="string"&&(n=[n]),n.length==0)?null:new RegExp(".(?:"+n.join("|")+")$","i"):null},o=function(n){return n?(typeof n=="string"&&(n=[n]),n.length==0)?null:new RegExp("^(?:"+n.join("|").replace(/\//g,"\\/")+")$","i"):null},y=function(t,i){var a=e(this.settings.allowExt),v=e(this.settings.denyExt),y=o(this.settings.allowMime),p=o(this.settings.denyMime),w=this.settings.maxSize||!1,h,u,l,s,f,b,c,k;if(!(a||v||y||p||w))return!0;for(h=[],u={},l=0;l<t.length;l++){if(s=t[l],f=r?s.name:s,a&&!a.test(f)){"ext"in u||(u.ext=[]);u.ext.push(f);continue}else if(v&&v.test(f)){"ext"in u||(u.ext=[]);u.ext.push(f);continue}if(r){if((b=n.trim(s.type)).length>0)if(y&&!y.test(b)){"mime"in u||(u.mime=[]);u.mime.push(f);continue}else if(p&&p.test(b)){"mime"in u||(u.mime=[]);u.mime.push(f);continue}}else{h.push(s);continue}if(w&&s.size>w){"size"in u||(u.size=[]);u.size.push(f);continue}h.push(s)}return h.length==t.length?t:(c={ext:0,mime:0,size:0},"ext"in u&&(c.ext=u.ext.length),"mime"in u&&(c.mime=u.mime.length),"size"in u&&(c.size=u.size.length),this.$element.trigger(k=new n.Event("file.error.ace"),{file_count:t.length,invalid_count:t.length-h.length,error_list:u,error_count:c,dropped:i}),k.isDefaultPrevented())?-1:h};n.fn.aceFileInput=n.fn.ace_file_input=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_file_input"),o=typeof r=="object"&&r;t||e.data("ace_file_input",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.ace_file_input.defaults={style:!1,no_file:"No File ...",no_icon:"fa fa-upload",btn_choose:"Choose",btn_change:"Change",icon_remove:"fa fa-times",droppable:!1,thumbnail:!1,allowExt:null,denyExt:null,allowMime:null,denyMime:null,maxSize:!1,before_change:null,before_remove:null,preview_error:null}}(window.jQuery);!function(n){"use strict";var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.bs_typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=n(this.options.menu);this.shown=!1;this.listen()},i;t.prototype={constructor:t,select:function(){var n=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(n)).change(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return(this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength)?this.shown?this.hide():this:(t=n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return(t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),!t.length)?this.shown?this.hide():this:this.render(t.slice(0,this.options.items)).show()},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};i=n.fn.bs_typeahead;n.fn.bs_typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("bs_typeahead"),f=typeof i=="object"&&i;r||u.data("bs_typeahead",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.bs_typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1};n.fn.bs_typeahead.Constructor=t;n.fn.bs_typeahead.noConflict=function(){return n.fn.bs_typeahead=i,this};n(document).on("focus.bs_typeahead.data-api",'[data-provide="bs_typeahead"]',function(){var t=n(this);t.data("bs_typeahead")||t.bs_typeahead(t.data())})}(window.jQuery),function(n){n.fn.ace_wysiwyg=function(t){var i=n.extend({speech_button:!0,wysiwyg:{}},t),f=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"],r={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"fa fa-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"fa fa-text-height",title:"Font Size"},bold:{icon:"fa fa-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"fa fa-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"fa fa-strikethrough",title:"Strikethrough"},underline:{icon:"fa fa-underline",title:"Underline"},insertunorderedlist:{icon:"fa fa-list-ul",title:"Bullet list"},insertorderedlist:{icon:"fa fa-list-ol",title:"Number list"},outdent:{icon:"fa fa-outdent",title:"Reduce indent (Shift+Tab)"},indent:{icon:"fa fa-indent",title:"Indent (Tab)"},justifyleft:{icon:"fa fa-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"fa fa-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"fa fa-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"fa fa-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"fa fa-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},unlink:{icon:"fa fa-chain-broken",title:"Remove Hyperlink"},insertImage:{icon:"fa fa-picture-o",title:"Insert picture",button_text:'<i class="'+ace.vars.icon+'fa fa-file"><\/i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:!0},foreColor:{values:f,title:"Change Color"},backColor:{values:f,title:"Change Background Color"},undo:{icon:"fa fa-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"fa fa-repeat",title:"Redo (Ctrl/Cmd+Y)"},viewSource:{icon:"fa fa-code",title:"View Source"}},u=i.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];return this.each(function(){var f=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ',c,t,o,s,h,a,e,l,v;for(c in u)if(u.hasOwnProperty(c)){if(t=u[c],t===null){f+=' <\/div> <div class="btn-group"> ';continue}if(typeof t=="string"&&t in r)t=r[t],t.name=u[c];else if(typeof t=="object"&&t.name in r)t=n.extend(r[t.name],t);else continue;o="className"in t?t.className:"btn-default";switch(t.name){case"font":f+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><i class="'+ace.vars.icon+'fa fa-angle-down icon-on-right"><\/i><\/a> ';f+=' <ul class="dropdown-menu dropdown-light dropdown-caret">';for(s in t.values)t.values.hasOwnProperty(s)&&(f+=' <li><a data-edit="fontName '+t.values[s]+'" style="font-family:\''+t.values[s]+"'\">"+t.values[s]+"<\/a><\/li> ");f+=" <\/ul>";break;case"fontSize":f+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i>&nbsp;<i class="'+ace.vars.icon+'fa fa-angle-down icon-on-right"><\/i><\/a> ';f+=' <ul class="dropdown-menu dropdown-light dropdown-caret"> ';for(h in t.values)t.values.hasOwnProperty(h)&&(f+=' <li><a data-edit="fontSize '+h+'"><font size="'+h+'">'+t.values[h]+"<\/font><\/a><\/li> ");f+=" <\/ul> ";break;case"createLink":f+=' <div class="btn-group"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';f+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">\t\t\t\t\t\t\t <div class="input-group">\t\t\t\t\t\t\t\t<input class="form-control" placeholder="'+t.placeholder+'" type="text" data-edit="'+t.name+'" />\t\t\t\t\t\t\t\t<span class="input-group-btn">\t\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_class+'" type="button">'+t.button_text+"<\/button>\t\t\t\t\t\t\t\t<\/span>\t\t\t\t\t\t\t <\/div>\t\t\t\t\t\t<\/div> <\/div>";break;case"insertImage":f+=' <div class="btn-group"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';f+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">\t\t\t\t\t\t\t <div class="input-group">\t\t\t\t\t\t\t\t<input class="form-control" placeholder="'+t.placeholder+'" type="text" data-edit="'+t.name+'" />\t\t\t\t\t\t\t\t<span class="input-group-btn">\t\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_insert_class+'" type="button">'+t.button_insert+"<\/button>\t\t\t\t\t\t\t\t<\/span>\t\t\t\t\t\t\t <\/div>";t.choose_file&&"FileReader"in window&&(f+='<div class="space-2"><\/div>\t\t\t\t\t\t\t <label class="center block no-margin-bottom">\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_class+' wysiwyg-choose-file" type="button">'+t.button_text+'<\/button>\t\t\t\t\t\t\t\t<input type="file" data-edit="'+t.name+'" />\t\t\t\t\t\t\t  <\/label>');f+=" <\/div> <\/div>";break;case"foreColor":case"backColor":f+=' <select class="hide wysiwyg_colorpicker" title="'+t.title+'"> ';n.each(t.values,function(n,t){f+=' <option value="'+t+'">'+t+"<\/option> "});f+=" <\/select> ";f+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+t.name+'" /> ';break;case"viewSource":f+=' <a class="btn btn-sm '+o+'" data-view="source" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';break;default:f+=' <a class="btn btn-sm '+o+'" data-edit="'+t.name+'" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> '}}f+=" <\/div> ";i.speech_button&&"onwebkitspeechchange"in(a=document.createElement("input"))&&(f+=' <input class="wysiwyg-speech-input" type="text" data-edit="inserttext" x-webkit-speech />');a=null;f+=" <\/div> ";f=i.toolbar_place?i.toolbar_place.call(this,f):n(this).before(f).prev();f.find("a[title]").tooltip({animation:!1,container:"body"});f.find(".dropdown-menu input[type=text]").on("click",function(){return!1}).on("change",function(){n(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(t){t.which==27?(this.value="",n(this).change()):t.which==13&&(t.preventDefault(),t.stopPropagation(),n(this).change())});f.find("input[type=file]").prev().on(ace.click_event,function(){n(this).next().click()});f.find(".wysiwyg_colorpicker").each(function(){n(this).ace_colorpicker({pull_right:!0}).change(function(){n(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:!1,container:"body"})});e=n(this);l=!1;f.find("a[data-view=source]").on("click",function(t){if(t.preventDefault(),l){var i=e.next();e.html(i.val()).show();i.remove();n(this).removeClass("active")}else n("<textarea />").css({width:e.outerWidth(),height:e.outerHeight()}).val(e.html()).insertAfter(e),e.hide(),n(this).addClass("active");l=!l});v=n.extend({},{activeToolbarClass:"active",toolbarSelector:f},i.wysiwyg||{});n(this).wysiwyg(v)}),this}}(window.jQuery),function(n,t){function i(t,i){var l=ace.helper.getAttrSettings(t,n.fn.ace_spinner.defaults),r=n.extend({},n.fn.ace_spinner.defaults,i,l),h=r.max,f,c;h=(""+h).length;var o=parseInt(Math.max(h*20+40,90)),u=n(t),e="btn-sm",s=2;u.hasClass("input-sm")?(e="btn-xs",s=1):u.hasClass("input-lg")&&(e="btn-lg",s=3);s==2?o+=25:s==3&&(o+=50);u.addClass("spinbox-input form-control text-center").wrap('<div class="ace-spinner middle">');f=u.closest(".ace-spinner").spinbox(r).wrapInner("<div class='input-group'><\/div>");c=f.data("fu.spinbox");r.on_sides?(u.before('<div class="spinbox-buttons input-group-btn">\t\t\t\t\t<button type="button" class="btn spinbox-down '+e+" "+r.btn_down_class+'">\t\t\t\t\t\t<i class="icon-only '+ace.vars.icon+r.icon_down+'"><\/i>\t\t\t\t\t<\/button>\t\t\t\t<\/div>').after('<div class="spinbox-buttons input-group-btn">\t\t\t\t\t<button type="button" class="btn spinbox-up '+e+" "+r.btn_up_class+'">\t\t\t\t\t\t<i class="icon-only '+ace.vars.icon+r.icon_up+'"><\/i>\t\t\t\t\t<\/button>\t\t\t\t<\/div>'),f.addClass("touch-spinner"),f.css("width",o+"px")):(u.after('<div class="spinbox-buttons input-group-btn">\t\t\t\t\t<button type="button" class="btn spinbox-up '+e+" "+r.btn_up_class+'">\t\t\t\t\t\t<i class="icon-only '+ace.vars.icon+r.icon_up+'"><\/i>\t\t\t\t\t<\/button>\t\t\t\t\t<button type="button" class="btn spinbox-down '+e+" "+r.btn_down_class+'">\t\t\t\t\t\t<i class="icon-only '+ace.vars.icon+r.icon_down+'"><\/i>\t\t\t\t\t<\/button>\t\t\t\t<\/div>'),ace.vars.touch||r.touch_spinner?(f.addClass("touch-spinner"),f.css("width",o+"px")):(u.next().addClass("btn-group-vertical"),f.css("width",o+"px")));f.on("changed",function(){u.trigger("change")});this._call=function(n,t){c[n](t)}}n.fn.ace_spinner=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_spinner"),o=typeof r=="object"&&r;t||(o=n.extend({},n.fn.ace_spinner.defaults,r),e.data("ace_spinner",t=new i(this,o)));typeof r=="string"&&(f=t._call(r,u))});return f===t?e:f};n.fn.ace_spinner.defaults={icon_up:"fa fa-chevron-up",icon_down:"fa fa-chevron-down",on_sides:!1,btn_up_class:"",btn_down_class:"",max:999,touch_spinner:!1}}(window.jQuery),function(n){n.fn.aceTree=n.fn.ace_tree=function(t){var i={"open-icon":ace.vars.icon+"fa fa-folder-open","close-icon":ace.vars.icon+"fa fa-folder",selectable:!0,"selected-icon":ace.vars.icon+"fa fa-check","unselected-icon":ace.vars.icon+"fa fa-times",loadingHTML:"Loading..."};return this.each(function(){var f=ace.helper.getAttrSettings(this,i),r=n.extend({},i,t,f),u=n(this);u.addClass("tree").attr("role","tree");u.html('<li class="tree-branch hide" data-template="treebranch" role="treeitem" aria-expanded="false">\t\t\t\t<div class="tree-branch-header">\t\t\t\t\t<span class="tree-branch-name">\t\t\t\t\t\t<i class="icon-folder '+r["close-icon"]+'"><\/i>\t\t\t\t\t\t<span class="tree-label"><\/span>\t\t\t\t\t<\/span>\t\t\t\t<\/div>\t\t\t\t<ul class="tree-branch-children" role="group"><\/ul>\t\t\t\t<div class="tree-loader" role="alert">'+r.loadingHTML+'<\/div>\t\t\t<\/div>\t\t\t<li class="tree-item hide" data-template="treeitem" role="treeitem">\t\t\t\t<span class="tree-item-name">\t\t\t\t  '+(r["unselected-icon"]==null?"":'<i class="icon-item '+r["unselected-icon"]+'"><\/i>')+'\t\t\t\t  <span class="tree-label"><\/span>\t\t\t\t<\/span>\t\t\t<\/li>');u.addClass(r.selectable==!0?"tree-selectable":"tree-unselectable");u.tree(r)}),this}}(window.jQuery),function(n){n.fn.aceWizard=n.fn.ace_wizard=function(t){return this.each(function(){var r=n(this),u,i,f;r.wizard();ace.vars.old_ie&&r.find("ul.steps > li").last().addClass("last-child");u=t&&t.buttons?n(t.buttons):r.siblings(".wizard-actions").eq(0);i=r.data("fu.wizard");i.$prevBtn.remove();i.$nextBtn.remove();i.$prevBtn=u.find(".btn-prev").eq(0).on(ace.click_event,function(){i.previous()}).attr("disabled","disabled");i.$nextBtn=u.find(".btn-next").eq(0).on(ace.click_event,function(){i.next()}).removeAttr("disabled");i.nextText=i.$nextBtn.text();f=t&&(t.selectedItem&&t.selectedItem.step||t.step);f&&(i.currentStep=f,i.setState())}),this}}(window.jQuery),function(n,t){function r(t,r){var s=this,u=n(t),f="right",o=!1,c=u.hasClass("fade"),a=ace.helper.getAttrSettings(t,n.fn.ace_aside.defaults),l;if(this.settings=n.extend({},n.fn.ace_aside.defaults,r,a),!this.settings.background||r.scroll_style||a.scroll_style||(this.settings.scroll_style="scroll-white no-track"),this.container=this.settings.container,this.container)try{n(this.container).get(0)==document.body&&(this.container=null)}catch(y){}this.container&&(this.settings.backdrop=!1,u.addClass("aside-contained"));var h=u.find(".modal-dialog"),e=u.find(".modal-content"),v=300;this.initiate=function(){if(t.className=t.className.replace(/(\s|^)aside\-(right|top|left|bottom)(\s|$)/ig,"$1$3"),f=this.settings.placement,f&&(f=n.trim(f.toLowerCase())),f&&/right|top|left|bottom/.test(f)||(f="right"),u.attr("data-placement",f),u.addClass("aside-"+f),/right|left/.test(f)?(o=!0,u.addClass("aside-vc")):u.addClass("aside-hz"),this.settings.fixed&&u.addClass("aside-fixed"),this.settings.background&&u.addClass("aside-dark"),this.settings.offset&&u.addClass("navbar-offset"),this.settings.transition||u.addClass("transition-off"),u.addClass("aside-hidden"),this.insideContainer(),h=u.find(".modal-dialog"),e=u.find(".modal-content"),!this.settings.body_scroll)u.on("mousewheel.aside DOMMouseScroll.aside touchmove.aside pointermove.aside",function(t){if(!n.contains(e[0],t.target))return t.preventDefault(),!1});this.settings.backdrop==!1&&u.addClass("no-backdrop")};this.show=function(){if(this.settings.backdrop==!1)try{u.data("bs.modal").$backdrop.remove()}catch(t){}this.container?n(this.container).addClass("overflow-hidden"):u.css("position","fixed");u.removeClass("aside-hidden")};this.hide=function(){this.container&&(this.container.addClass("overflow-hidden"),ace.vars.firefox&&t.offsetHeight);l();ace.vars.transition&&!c&&u.one("bsTransitionEnd",function(){u.addClass("aside-hidden");u.css("position","");s.container&&s.container.removeClass("overflow-hidden")}).emulateTransitionEnd(v)};this.shown=function(){if(l(),n("body").removeClass("modal-open").css("padding-right",""),this.settings.backdrop=="invisible")try{u.data("bs.modal").$backdrop.css("opacity",0)}catch(r){}var t=o?e.height():h.height();ace.vars.touch?e.addClass("overflow-scroll").css("max-height",t+"px"):e.hasClass("ace-scroll")||e.ace_scroll({size:t,reset:!0,mouseWheelLock:!0,lockAnyway:!this.settings.body_scroll,styleClass:this.settings.scroll_style,observeContent:!0,hideOnIdle:!ace.vars.old_ie,hideDelay:1500});i.off("resize.modal.aside").on("resize.modal.aside",function(){if(ace.vars.touch)e.css("max-height",(o?e.height():h.height())+"px");else{e.ace_scroll("disable");var n=o?e.height():h.height();e.ace_scroll("update",{size:n}).ace_scroll("enable").ace_scroll("reset")}}).triggerHandler("resize.modal.aside");s.container&&ace.vars.transition&&!c&&u.one("bsTransitionEnd",function(){s.container.removeClass("overflow-hidden")}).emulateTransitionEnd(v)};this.hidden=function(){i.off(".aside");(!ace.vars.transition||c)&&(u.addClass("aside-hidden"),u.css("position",""))};this.insideContainer=function(){var t=n(".main-container"),e=u.find(".modal-dialog"),r;e.css({right:"",left:""});t.hasClass("container")&&(r=!1,o==!0&&(e.css(f,parseInt((i.width()-t.width())/2)),r=!0),r&&ace.vars.firefox&&ace.helper.redraw(t[0]))};this.flip=function(){var n={right:"left",left:"right",top:"bottom",bottom:"top"};u.removeClass("aside-"+f).addClass("aside-"+n[f]);f=n[f]};l=function(){var t=u.find(".aside-trigger"),n;t.length!=0&&(t.toggleClass("open"),n=t.find(ace.vars[".icon"]),n.length!=0)&&n.toggleClass(n.attr("data-icon1")+" "+n.attr("data-icon2"))};this.initiate();this.container&&(this.container=n(this.container));u.appendTo(this.container||"body")}var i=n(window);n(document).on("show.bs.modal",".modal.aside",function(){n(".aside.in").modal("hide");n(this).ace_aside("show")}).on("hide.bs.modal",".modal.aside",function(){n(this).ace_aside("hide")}).on("shown.bs.modal",".modal.aside",function(){n(this).ace_aside("shown")}).on("hidden.bs.modal",".modal.aside",function(){n(this).ace_aside("hidden")});n(window).on("resize.aside_container",function(){n(".modal.aside").ace_aside("insideContainer")});n(document).on("settings.ace.aside",function(t,i){i=="main_container_fixed"&&n(".modal.aside").ace_aside("insideContainer")});n.fn.aceAside=n.fn.ace_aside=function(i,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_aside"),o=typeof i=="object"&&i;t||e.data("ace_aside",t=new r(this,o));typeof i=="string"&&typeof t[i]=="function"&&(f=u instanceof Array?t[i].apply(t,u):t[i](u))});return f===t?e:f};n.fn.ace_aside.defaults={fixed:!1,background:!1,offset:!1,body_scroll:!1,transition:!0,scroll_style:"scroll-dark no-track",container:null,backdrop:!1,placement:"right"}}(window.jQuery),function(){"ace"in window||(window.ace={});"helper"in window.ace||(window.ace.helper={});"vars"in window.ace||(window.ace.vars={});window.ace.vars.icon=" ace-icon ";window.ace.vars[".icon"]=".ace-icon";ace.vars.touch="ontouchstart"in window;var n=navigator.userAgent;ace.vars.webkit=!!n.match(/AppleWebKit/i);ace.vars.safari=!!n.match(/Safari/i)&&!n.match(/Chrome/i);ace.vars.android=ace.vars.safari&&!!n.match(/Android/i);ace.vars.ios_safari=!!n.match(/OS ([4-9])(_\d)+ like Mac OS X/i)&&!n.match(/CriOS/i);ace.vars.ie=window.navigator.msPointerEnabled||document.all&&document.querySelector;ace.vars.old_ie=document.all&&!document.addEventListener;ace.vars.very_old_ie=document.all&&!document.querySelector;ace.vars.firefox="MozAppearance"in document.documentElement.style;ace.vars.non_auto_fixed=ace.vars.android||ace.vars.ios_safari}(),function(n){ace.click_event=ace.vars.touch&&n.fn.tap?"tap":"click"}(jQuery);jQuery(function(n){function t(){ace.vars.non_auto_fixed&&n("body").addClass("mob-safari");ace.vars.transition=!!n.support.transition.end}function i(){var t=n(".sidebar");n.fn.ace_sidebar&&t.ace_sidebar();n.fn.ace_sidebar_scroll&&t.ace_sidebar_scroll({include_toggle:!1||ace.vars.safari||ace.vars.ios_safari});n.fn.ace_sidebar_hover&&t.ace_sidebar_hover({sub_hover_delay:750,sub_scroll_style:"no-track scroll-thin scroll-margin scroll-visible"})}function r(){if(n.fn.ace_ajax){window.Pace&&(window.paceOptions={ajax:!0,document:!0,eventLag:!1});var t={close_active:!0,default_url:"page/index",content_url:function(n){if(!n.match(/^page\//))return!1;var t=document.location.pathname;return t.match(/(\/ajax\/)(index\.html)?/)?t.replace(/(\/ajax\/)(index\.html)?/,"/ajax/content/"+n.replace(/^page\//,"")+".html"):t+"?"+n.replace(/\//,"=")}};window.Pace&&(t.loading_overlay="body");n("[data-ajax-content=true]").ace_ajax(t);n(window).on("error.ace_ajax",function(){n("[data-ajax-content=true]").each(function(){var t=n(this);t.ace_ajax("working")&&(window.Pace&&Pace.running&&Pace.stop(),t.ace_ajax("stopLoading",!0))})})}}function u(){var t=!!n.fn.ace_scroll;if(t&&n(".dropdown-content").ace_scroll({reset:!1,mouseWheelLock:!0}),t&&!ace.vars.old_ie){n(window).on("resize.reset_scroll",function(){n(".ace-scroll:not(.scroll-disabled)").not(":hidden").ace_scroll("reset")});if(t)n(document).on("settings.ace.reset_scroll",function(t,i){i=="sidebar_collapsed"&&n(".ace-scroll:not(.scroll-disabled)").not(":hidden").ace_scroll("reset")})}}function f(){n(document).on("click.dropdown.pos",'.dropdown-toggle[data-position="auto"]',function(){var i=n(this).offset(),t=n(this.parentNode);parseInt(i.top+n(this).height())+50>ace.helper.scrollTop()+ace.helper.winHeight()-t.find(".dropdown-menu").eq(0).height()?t.addClass("dropup"):t.removeClass("dropup")})}function e(){n('.ace-nav [class*="icon-animated-"]').closest("a").one("click",function(){var t=n(this).find('[class*="icon-animated-"]').eq(0),i=t.attr("class").match(/icon\-animated\-([\d\w]+)/);t.removeClass(i[0])});n(document).on("click",".dropdown-navbar .nav-tabs",function(t){t.stopPropagation();var i,r=t.target;(i=n(t.target).closest("[data-toggle=tab]"))&&i.length>0&&(i.tab("show"),t.preventDefault(),n(window).triggerHandler("resize.navbar.dropdown"))})}function o(){n(".sidebar .nav-list .badge[title],.sidebar .nav-list .badge[title]").each(function(){var t=n(this).attr("class").match(/tooltip\-(?:\w+)/);t=t?t[0]:"tooltip-error";n(this).tooltip({placement:function(t,i){var r=n(i).offset();return parseInt(r.left)<parseInt(document.body.scrollWidth/2)?"right":"left"},container:"body",template:'<div class="tooltip '+t+'"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>'})})}function s(){var i=n(".btn-scroll-up"),t;if(i.length>0){t=!1;n(window).on("scroll.scroll_btn",function(){var n=ace.helper.scrollTop(),r=ace.helper.winHeight(),u=document.body.scrollHeight;n>parseInt(r/4)||n>0&&u>=r&&r+n>=u-1?t||(i.addClass("display"),t=!0):t&&(i.removeClass("display"),t=!1)}).triggerHandler("scroll.scroll_btn");i.on(ace.click_event,function(){var t=Math.min(500,Math.max(100,parseInt(ace.helper.scrollTop()/3)));return n("html,body").animate({scrollTop:0},t),!1})}}function h(){if(ace.vars.webkit){var t=n(".ace-nav").get(0);if(t)n(window).on("resize.webkit_fix",function(){ace.helper.redraw(t)})}ace.vars.ios_safari&&n(document).on("ace.settings.ios_fix",function(t,i,r){if(i=="navbar_fixed"&&(n(document).off("focus.ios_fix blur.ios_fix","input,textarea,.wysiwyg-editor"),r==!0))n(document).on("focus.ios_fix","input,textarea,.wysiwyg-editor",function(){n(window).on("scroll.ios_fix",function(){var t=n("#navbar").get(0);t&&ace.helper.redraw(t)})}).on("blur.ios_fix","input,textarea,.wysiwyg-editor",function(){n(window).off("scroll.ios_fix")})}).triggerHandler("ace.settings.ios_fix",["navbar_fixed",n("#navbar").css("position")=="fixed"])}function c(){n(document).on("hide.bs.collapse show.bs.collapse",function(t){var r=t.target.getAttribute("id"),i=n('a[href*="#'+r+'"]');(i.length==0&&(i=n('a[data-target*="#'+r+'"]')),i.length!=0)&&i.find(ace.vars[".icon"]).each(function(){var i=n(this),f,r=null,u=null;return(r=i.attr("data-icon-show"))?u=i.attr("data-icon-hide"):(f=i.attr("class").match(/fa\-(.*)\-(up|down)/))&&(r="fa-"+f[1]+"-down",u="fa-"+f[1]+"-up"),r?(t.type=="show"?i.removeClass(r).addClass(u):i.removeClass(u).addClass(r),!1):void 0})})}function l(){function i(){var i=n(this).find("> .dropdown-menu"),s,l,a,v,e,g;if(i.css("position")=="fixed"){var h=parseInt(n(window).width()),y=h>320?60:h>240?40:30,p=parseInt(h)-y,w=parseInt(n(window).height())-30,o=parseInt(Math.min(p,320));i.css("width",o);var c=!1,u=0,r=i.find(".tab-pane.active .dropdown-content.ace-scroll");r.length==0?r=i.find(".dropdown-content.ace-scroll"):c=!0;s=r.closest(".dropdown-menu");l=i[0].scrollHeight;r.length==1&&(a=r.find(".scroll-content")[0],a&&(l=a.scrollHeight),u+=s.find(".dropdown-header").outerHeight(),u+=s.find(".dropdown-footer").outerHeight(),v=s.closest(".tab-content"),v.length!=0&&(u+=v.siblings(".nav-tabs").eq(0).height()));var f=parseInt(Math.min(w,480,l+u)),b=parseInt(Math.abs((p+y-o)/2)),k=parseInt(Math.abs((w+30-f)/2)),d=parseInt(i.css("z-index"))||0;i.css({height:f,left:b,right:"auto",top:k-(c?3:1)});r.length==1&&(ace.vars.touch?r.ace_scroll("disable").css("max-height",f-u).addClass("overflow-scroll"):r.ace_scroll("update",{size:f-u}).ace_scroll("enable").ace_scroll("reset"));i.css("height",f+(c?7:2));i.hasClass("user-menu")&&(i.css("height",""),e=n(this).find(".user-info"),e.length==1&&e.css("position")=="fixed"?e.css({left:b,right:"auto",top:k,width:o-2,"max-width":o-2,"z-index":d+1}):e.css({left:"",right:"",top:"",width:"","max-width":"","z-index":""}));n(this).closest(".navbar.navbar-fixed-top").css("z-index",d)}else i.length!=0&&t.call(this,i);g=this;n(window).off("resize.navbar.dropdown").one("resize.navbar.dropdown",function(){n(g).triggerHandler("shown.bs.dropdown.navbar")})}function t(t){if(t=t||n(this).find("> .dropdown-menu"),t.length>0&&(t.css({width:"",height:"",left:"",right:"",top:""}).find(".dropdown-content").each(function(){ace.vars.touch&&n(this).css("max-height","").removeClass("overflow-scroll");var t=parseInt(n(this).attr("data-size")||0)||n.fn.ace_scroll.defaults.size;n(this).ace_scroll("update",{size:t}).ace_scroll("enable").ace_scroll("reset")}),t.hasClass("user-menu")))var i=n(this).find(".user-info").css({left:"",right:"",top:"",width:"","max-width":"","z-index":""});n(this).closest(".navbar").css("z-index","")}if(!ace.vars.old_ie)n(".ace-nav > li").on("shown.bs.dropdown.navbar",function(){i.call(this)}).on("hidden.bs.dropdown.navbar",function(){n(window).off("resize.navbar.dropdown");t.call(this)})}t();i();r();u();f();e();o();s();h();c();l()}),function(n){n.unCamelCase=function(n){return n.replace(/([a-z])([A-Z])/g,function(n,t,i){return t+"-"+i.toLowerCase()})};n.strToVal=function(n){var t=n.match(/^(?:(true)|(false)|(null)|(\-?[\d]+(?:\.[\d]+)?)|(\[.*\]|\{.*\}))$/i),i=n;if(t)if(t[1])i=!0;else if(t[2])i=!1;else if(t[3])i=null;else if(t[4])i=parseFloat(n);else if(t[5])try{i=JSON.parse(n)}catch(r){}return i};n.getAttrSettings=function(t,i,r){var h=i instanceof Array?1:2,r=r?r.replace(/([^\-])$/,"$1-"):"",f,u,e,o,s;r="data-"+r;f={};for(u in i)if(i.hasOwnProperty(u)){if(e=h==1?i[u]:u,s=n.unCamelCase(e.replace(/[^A-Za-z0-9]{1,}/g,"-")).toLowerCase(),!(o=t.getAttribute(r+s)))continue;f[e]=n.strToVal(o)}return f};n.scrollTop=function(){return document.scrollTop||document.documentElement.scrollTop||document.body.scrollTop};n.winHeight=function(){return window.innerHeight||document.documentElement.clientHeight};n.redraw=function(n,t){var i=n.style.display;n.style.display="none";n.offsetHeight;t!==!0?n.style.display=i:setTimeout(function(){n.style.display=i},10)}}(ace.helper),function(n,t){function r(t,r){function a(t){var u="",i=n(".breadcrumb"),r;return i.length>0&&i.is(":visible")&&(i.find("> li:not(:first-child)").remove(),r=0,t.parents(".nav li").each(function(){var o=n(this).find("> a"),e=o.clone(),t,s,f;e.find("i,.fa,.glyphicon,.ace-icon,.menu-icon,.badge,.label").remove();t=e.text();e.remove();s=o.attr("href");r==0?(f=n('<li class="active"><\/li>').appendTo(i),f.text(t),u=t):(f=n("<li><a /><\/li>").insertAfter(i.find("> li:first-child")),f.find("a").attr("href",s).text(t));r++})),u}function v(t){var r=f.find(".ajax-append-title"),i;r.length>0?(document.title=r.text(),r.remove()):t.length>0&&(i=n.trim(String(document.title).replace(/^(.*)[\-]/,"")),i&&(i=" - "+i),t=n.trim(t)+i)}var f=n(t),u=this,c,o,e,h,s,l;f.attr("data-ajax-content","true");c=ace.helper.getAttrSettings(t,n.fn.ace_ajax.defaults);this.settings=n.extend({},n.fn.ace_ajax.defaults,r,c);o=!1;e=n();this.force_reload=!1;this.loadUrl=function(n,t){var i=!1;n=n.replace(/^(\#\!)?\#/,"");this.force_reload=t===!1;typeof this.settings.content_url=="function"&&(i=this.settings.content_url(n));typeof i=="string"&&this.getUrl(i,n,!1)};this.loadAddr=function(n,t,i){this.force_reload=i===!1;this.getUrl(n,t,!1)};this.getUrl=function(t,i,r){if(!o){var s;(f.trigger(s=n.Event("ajaxloadstart"),{url:t,hash:i}),s.isDefaultPrevented())||(u.startLoading(),n.ajax({url:t,cache:!this.force_reload}).error(function(){f.trigger("ajaxloaderror",{url:t,hash:i});u.stopLoading(!0)}).done(function(o){var s,h,c,l;f.trigger("ajaxloaddone",{url:t,hash:i});s=null;h="";typeof u.settings.update_active=="function"?s=u.settings.update_active.call(null,i,t):u.settings.update_active===!0&&i&&(s=n('a[data-url="'+i+'"]'),s.length>0&&(c=s.closest(".nav"),c.length>0&&(c.find(".active").each(function(){var t="active";(n(this).hasClass("hover")||u.settings.close_active)&&(t+=" open");n(this).removeClass(t);u.settings.close_active&&n(this).find(" > .submenu").css("display","")}),l=s.closest("li").addClass("active").parents(".nav li").addClass("active open"),c.closest(".sidebar[data-sidebar-scroll=true]").each(function(){var t=n(this);t.ace_sidebar_scroll("reset");r&&t.ace_sidebar_scroll("scroll_to_active")}))));typeof u.settings.update_breadcrumbs=="function"?h=u.settings.update_breadcrumbs.call(null,i,t,s):u.settings.update_breadcrumbs===!0&&s!=null&&s.length>0&&(h=a(s));o=String(o).replace(/<(title|link)([\s\>])/gi,'<div class="hidden ajax-append-$1"$2').replace(/<\/(title|link)\>/gi,"<\/div>");e.addClass("content-loaded").detach();f.empty().html(o);n(u.settings.loading_overlay||f).append(e);setTimeout(function(){var r,t,i;for(n("head").find("link.ace-ajax-stylesheet").remove(),r=["link.ace-main-stylesheet","link#main-ace-style",'link[href*="/ace.min.css"]','link[href*="/ace.css"]'],t=[],i=0;i<r.length;i++)if(t=n("head").find(r[i]).first(),t.length>0)break;f.find(".ajax-append-link").each(function(){var r=n(this),i;r.attr("href")&&(i=jQuery("<link />",{type:"text/css",rel:"stylesheet","class":"ace-ajax-stylesheet"}),t.length>0?i.insertBefore(t):i.appendTo("head"),i.attr("href",r.attr("href")));r.remove()})},10);typeof u.settings.update_title=="function"?u.settings.update_title.call(null,i,t,h):u.settings.update_title===!0&&v(h);r||n("html,body").animate({scrollTop:0},250);f.trigger("ajaxloadcomplete",{url:t,hash:i});u.stopLoading()}))}};h=!1;s=null;this.startLoading=function(){o||(o=!0,this.settings.loading_overlay||f.css("position")!="static"||(f.css("position","relative"),h=!0),e.remove(),e=n('<div class="ajax-loading-overlay"><i class="ajax-loading-icon '+(this.settings.loading_icon||"")+'"><\/i> '+this.settings.loading_text+"<\/div>"),this.settings.loading_overlay=="body"?n("body").append(e.addClass("ajax-overlay-body")):this.settings.loading_overlay?n(this.settings.loading_overlay).append(e):f.append(e),this.settings.max_load_wait!==!1&&(s=setTimeout(function(){if(s=null,o){var t;(f.trigger(t=n.Event("ajaxloadlong")),t.isDefaultPrevented())||u.stopLoading(!0)}},this.settings.max_load_wait*1e3)))};this.stopLoading=function(n){if(n===!0)o=!1,e.remove(),h&&(f.css("position",""),h=!1),s!=null&&(clearTimeout(s),s=null);else{e.addClass("almost-loaded");f.one("ajaxscriptsloaded.inner_call",function(){u.stopLoading(!0)})}};this.working=function(){return o};this.loadScripts=function(t,r){n.ajaxPrefilter("script",function(n){n.cache=!0});setTimeout(function(){function e(){typeof r=="function"&&r();n('.btn-group[data-toggle="buttons"] > .btn').button();f.trigger("ajaxscriptsloaded")}function h(n){n+=1;n<t.length?l(n):e()}function l(r){if(r=r||0,!t[r])return h(r);var u="js-"+t[r].replace(/[^\w\d\-]/g,"-").replace(/\-\-/g,"-");i[u]!==!0?n.getScript(t[r]).done(function(){i[u]=!0}).complete(function(){c++;c>=s&&o?e():h(r)}):h(r)}for(var s=0,c=0,u=0;u<t.length;u++)t[u]&&function(){var n="js-"+t[u].replace(/[^\w\d\-]/g,"-").replace(/\-\-/g,"-");i[n]!==!0&&s++}();s>0?l():e()},10)};n(window).off("hashchange.ace_ajax").on("hashchange.ace_ajax",function(){var t=n.trim(window.location.hash);t&&t.length!=0&&u.loadUrl(t)}).trigger("hashchange.ace_ajax",[!0]);l=n.trim(window.location.hash);!l&&this.settings.default_url&&(window.location.hash=this.settings.default_url)}var i={};n.fn.aceAjax=n.fn.ace_ajax=function(i,u,f,e){var o,s=this.each(function(){var h=n(this),s=h.data("ace_ajax"),c=typeof i=="object"&&i;s||h.data("ace_ajax",s=new r(this,c));typeof i=="string"&&typeof s[i]=="function"&&(o=e!=t?s[i](u,f,e):f!=t?s[i](u,f):s[i](u))});return o===t?s:o};n.fn.aceAjax.defaults=n.fn.ace_ajax.defaults={content_url:!1,default_url:!1,loading_icon:"fa fa-spin fa-spinner fa-2x orange",loading_text:"",loading_overlay:null,update_breadcrumbs:!0,update_title:!0,update_active:!0,close_active:!1,max_load_wait:!1}}(window.jQuery),function(n,t){if(ace.vars.touch){var r="touchstart MSPointerDown pointerdown",u="touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",i="touchmove MSPointerMove MSPointerHover pointermove";n.event.special.ace_drag={setup:function(){var e=0,f=n(this);f.on(r,function(r){function v(n){var t,i;o&&(t=n.originalEvent.touches?n.originalEvent.touches[0]:n,s={coords:[t.pageX,t.pageY]},o&&s&&(h=0,c=0,l=Math.abs(c=o.coords[1]-s.coords[1])>e&&Math.abs(h=o.coords[0]-s.coords[0])<=Math.abs(c)?c>0?"up":"down":Math.abs(h=o.coords[0]-s.coords[0])>e&&Math.abs(c)<=Math.abs(h)?h>0?"left":"right":!1,l!==!1&&(i={cancel:!1},o.origin.trigger({type:"ace_drag",direction:l,dx:h,dy:c,retval:i}),i.cancel==!1&&n.preventDefault())),o.coords[0]=s.coords[0],o.coords[1]=s.coords[1])}var a=r.originalEvent.touches?r.originalEvent.touches[0]:r,o={coords:[a.pageX,a.pageY],origin:n(r.target)},s,l=!1,h=0,c=0;f.on(i,v).one(u,function(){f.off(i,v);o=s=t})})}}}}(window.jQuery),function(n,t){function r(r,u){function y(){this.mobile_view=this.mobile_style<4&&this.is_mobile_view();this.collapsible=!this.mobile_view&&this.is_collapsible();this.minimized=!this.collapsible&&this.$sidebar.hasClass(l)||this.mobile_style==3&&this.mobile_view&&this.$sidebar.hasClass(c);this.horizontal=!(this.mobile_view||this.collapsible)&&this.$sidebar.hasClass(a)}var f=this,h,o,s,e;this.$sidebar=n(r);this.$sidebar.attr("data-sidebar","true");this.$sidebar.attr("id")||this.$sidebar.attr("id","id-sidebar-"+ ++i);h=ace.helper.getAttrSettings(r,n.fn.ace_sidebar.defaults,"sidebar-");this.settings=n.extend({},n.fn.ace_sidebar.defaults,u,h);this.minimized=!1;this.collapsible=!1;this.horizontal=!1;this.mobile_view=!1;this.vars=function(){return{minimized:this.minimized,collapsible:this.collapsible,horizontal:this.horizontal,mobile_view:this.mobile_view}};this.get=function(n){if(this.hasOwnProperty(n))return this[n]};this.set=function(n,t){this.hasOwnProperty(n)&&(this[n]=t)};this.ref=function(){return this};o=function(i){var r=n(this).find(ace.vars[".icon"]),u,f;r.length>0&&(u=r.attr("data-icon1"),f=r.attr("data-icon2"),i!==t?i?r.removeClass(u).addClass(f):r.removeClass(f).addClass(u):r.toggleClass(u).toggleClass(f))};s=function(){var t=f.$sidebar.find(".sidebar-collapse");return t.length==0&&(t=n('.sidebar-collapse[data-target="#'+(f.$sidebar.attr("id")||"")+'"]')),t.length!=0?t[0]:null};this.toggleMenu=function(n,t){if(!this.collapsible){this.minimized=!this.minimized;try{ace.settings.sidebar_collapsed(r,this.minimized,!(n===!1||t===!1))}catch(i){this.minimized?this.$sidebar.addClass("menu-min"):this.$sidebar.removeClass("menu-min")}n||(n=s());n&&o.call(n,this.minimized);ace.vars.old_ie&&ace.helper.redraw(r)}};this.collapse=function(n,t){this.collapsible||(this.minimized=!1,this.toggleMenu(n,t))};this.expand=function(n,t){this.collapsible||(this.minimized=!0,this.toggleMenu(n,t))};this.toggleResponsive=function(t){var r,i,u,f;this.mobile_view&&this.mobile_style==3&&(this.$sidebar.hasClass("menu-min")&&(this.$sidebar.removeClass("menu-min"),r=s(),r&&o.call(r)),this.minimized=!this.$sidebar.hasClass("responsive-min"),this.$sidebar.toggleClass("responsive-min responsive-max"),t||(t=this.$sidebar.find(".sidebar-expand"),t.length==0&&(t=n('.sidebar-expand[data-target="#'+(this.$sidebar.attr("id")||"")+'"]')),t=t.length!=0?t[0]:null),t&&(i=n(t).find(ace.vars[".icon"]),i.length>0&&(u=i.attr("data-icon1"),f=i.attr("data-icon2"),i.toggleClass(u).toggleClass(f))),n(document).triggerHandler("settings.ace",["sidebar_collapsed",this.minimized]))};this.is_collapsible=function(){var t;return this.$sidebar.hasClass("navbar-collapse")&&(t=n('.navbar-toggle[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))!=null&&t.scrollHeight>0};this.is_mobile_view=function(){var t;return(t=n('.menu-toggler[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))!=null&&t.scrollHeight>0};this.$sidebar.on(ace.click_event+".ace.submenu",".nav-list",function(t){var h=this,r=n(t.target).closest("a"),o,e,i,s;if(r&&r.length!=0){if(o=f.minimized&&!f.collapsible,!r.hasClass("dropdown-toggle"))return ace.click_event=="tap"&&o&&r.get(0).parentNode.parentNode==h&&(e=r.find(".menu-text").get(0),e!=null&&t.target!=e&&!n.contains(e,t.target))?(t.preventDefault(),!1):ace.vars.ios_safari&&r.attr("data-link")!=="false"?(document.location=r.attr("href"),t.preventDefault(),!1):void 0;if(t.preventDefault(),i=r.siblings(".submenu").get(0),!i)return!1;var c=n(i),u=0,l=i.parentNode.parentNode;return o&&l==h||c.parent().hasClass("hover")&&c.css("position")=="absolute"&&!f.collapsible?!1:(s=i.scrollHeight==0,s&&n(l).find("> .open > .submenu").each(function(){this==i||n(this.parentNode).hasClass("active")||(u-=this.scrollHeight,f.hide(this,f.settings.duration,!1))}),s?(f.show(i,f.settings.duration),u!=0&&(u+=i.scrollHeight)):(f.hide(i,f.settings.duration),u-=i.scrollHeight),u!=0&&(f.$sidebar.attr("data-sidebar-scroll")!="true"||f.minimized||f.$sidebar.ace_sidebar_scroll("prehide",u)),!1)}});e=!1;this.show=function(t,i,r){var u,o,f;if((r=r!==!1,r&&e)||(u=n(t),u.trigger(o=n.Event("show.ace.submenu")),o.isDefaultPrevented()))return!1;if(r&&(e=!0),i=i||this.settings.duration,u.css({height:0,overflow:"hidden",display:"block"}).removeClass("nav-hide").addClass("nav-show").parent().addClass("open"),t.scrollTop=0,i>0&&u.css({height:t.scrollHeight,"transition-property":"height","transition-duration":i/1e3+"s"}),f=function(t,i){t&&t.stopPropagation();u.css({"transition-property":"","transition-duration":"",overflow:"",height:""});i!==!1&&u.trigger(n.Event("shown.ace.submenu"));r&&(e=!1)},i>0&&!!n.support.transition.end)u.one(n.support.transition.end,f);else f();return ace.vars.android&&setTimeout(function(){f(null,!1);ace.helper.redraw(t)},i+20),!0};this.hide=function(t,i,r){var u,o,f;if((r=r!==!1,r&&e)||(u=n(t),u.trigger(o=n.Event("hide.ace.submenu")),o.isDefaultPrevented()))return!1;if(r&&(e=!0),i=i||this.settings.duration,u.css({height:t.scrollHeight,overflow:"hidden",display:"block"}).parent().removeClass("open"),t.offsetHeight,i>0&&u.css({height:0,"transition-property":"height","transition-duration":i/1e3+"s"}),f=function(t,i){t&&t.stopPropagation();u.css({display:"none",overflow:"",height:"","transition-property":"","transition-duration":""}).removeClass("nav-show").addClass("nav-hide");i!==!1&&u.trigger(n.Event("hidden.ace.submenu"));r&&(e=!1)},i>0&&!!n.support.transition.end)u.one(n.support.transition.end,f);else f();return ace.vars.android&&setTimeout(function(){f(null,!1);ace.helper.redraw(t)},i+20),!0};this.toggle=function(n,t){if(t=t||f.settings.duration,n.scrollHeight==0){if(this.show(n,t))return 1}else if(this.hide(n,t))return-1;return 0};var l="menu-min",c="responsive-min",a="h-sidebar",v=function(){this.mobile_style=1;this.$sidebar.hasClass("responsive")&&!n('.menu-toggler[data-target="#'+this.$sidebar.attr("id")+'"]').hasClass("navbar-toggle")?this.mobile_style=2:this.$sidebar.hasClass(c)?this.mobile_style=3:this.$sidebar.hasClass("navbar-collapse")&&(this.mobile_style=4)};v.call(f);n(window).on("resize.sidebar.vars",function(){y.call(f)}).triggerHandler("resize.sidebar.vars")}var i=0;n(document).on(ace.click_event+".ace.menu",".menu-toggler",function(t){var r=n(this),i=n(r.attr("data-target")),u,f;if(i.length!=0){if(t.preventDefault(),i.toggleClass("display"),r.toggleClass("display"),u=ace.click_event+".ace.autohide",f=i.attr("data-auto-hide")==="true",r.hasClass("display")){if(f)n(document).on(u,function(t){if(i.get(0)==t.target||n.contains(i.get(0),t.target)){t.stopPropagation();return}i.removeClass("display");r.removeClass("display");n(document).off(u)});i.attr("data-sidebar-scroll")=="true"&&i.ace_sidebar_scroll("reset")}else f&&n(document).off(u);return!1}}).on(ace.click_event+".ace.menu",".sidebar-collapse",function(t){var r=n(this).attr("data-target"),i=null;(r&&(i=n(r)),(i==null||i.length==0)&&(i=n(this).closest(".sidebar")),i.length!=0)&&(t.preventDefault(),i.ace_sidebar("toggleMenu",this))}).on(ace.click_event+".ace.menu",".sidebar-expand",function(t){var u=n(this).attr("data-target"),i=null,f,r;if((u&&(i=n(u)),(i==null||i.length==0)&&(i=n(this).closest(".sidebar")),i.length!=0)&&(f=this,t.preventDefault(),i.ace_sidebar("toggleResponsive",this),r=ace.click_event+".ace.autohide",i.attr("data-auto-hide")==="true"))if(i.hasClass("responsive-max"))n(document).on(r,function(t){if(i.get(0)==t.target||n.contains(i.get(0),t.target)){t.stopPropagation();return}i.ace_sidebar("toggleResponsive",f);n(document).off(r)});else n(document).off(r)});n.fn.ace_sidebar=function(i,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_sidebar"),o=typeof i=="object"&&i;t||e.data("ace_sidebar",t=new r(this,o));typeof i=="string"&&typeof t[i]=="function"&&(f=u instanceof Array?t[i].apply(t,u):t[i](u))});return f===t?e:f};n.fn.ace_sidebar.defaults={duration:300}}(window.jQuery),function(n,t){function u(t,u){var f=this,ut=n(window),c=n(t),e=c.find(".nav-list"),v=c.find(".sidebar-toggle").eq(0),k=c.find(".sidebar-shortcuts").eq(0),s=e.get(0),tt,d,y,w;if(s){tt=ace.helper.getAttrSettings(t,n.fn.ace_sidebar_scroll.defaults);this.settings=n.extend({},n.fn.ace_sidebar_scroll.defaults,u,tt);d=f.settings.scroll_to_active;y=c.ace_sidebar("ref");c.attr("data-sidebar-scroll","true");var h=null,l=null,g=null,p=null,a=null,o=null;this.is_scrolling=!1;w=!1;this.sidebar_fixed=i(t,"fixed");var b,it,nt=function(){var n=e.parent().offset();return f.sidebar_fixed&&(n.top-=ace.helper.scrollTop()),ut.innerHeight()-n.top-(f.settings.include_toggle?0:v.outerHeight())},ft=function(){return s.clientHeight},rt=function(t){var i,u,c,y,tt;if(!w&&f.sidebar_fixed){e.wrap('<div class="nav-wrap-up pos-rel" />');e.after("<div><div><\/div><\/div>");e.wrap('<div class="nav-wrap" />');f.settings.include_toggle||v.css({"z-index":1});f.settings.include_shortcuts||k.css({"z-index":99});h=e.parent().next().ace_scroll({size:nt(),mouseWheelLock:!0,hoverReset:!1,dragEvent:!0,styleClass:f.settings.scroll_style,touchDrag:!1}).closest(".ace-scroll").addClass("nav-scroll");o=h.data("ace_scroll");l=h.find(".scroll-content").eq(0);g=l.find(" > div").eq(0);a=n(o.get_track());p=a.find(".scroll-bar").eq(0);f.settings.include_shortcuts&&k.length!=0&&(e.parent().prepend(k).wrapInner("<div />"),e=e.parent());f.settings.include_toggle&&v.length!=0&&(e.append(v),e.closest(".nav-wrap").addClass("nav-wrap-t"));e.css({position:"relative"});f.settings.scroll_outside==!0&&h.addClass("scrollout");s=e.get(0);s.style.top=0;l.on("scroll.nav",function(){s.style.top=-1*this.scrollTop+"px"});e.on(!n.event.special.mousewheel?"mousewheel.ace_scroll DOMMouseScroll.ace_scroll":"mousewheel.ace_scroll",function(n){return!f.is_scrolling||!o.is_active()?!f.settings.lock_anyway:h.trigger(n)});e.on("mouseenter.ace_scroll",function(){a.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){a.removeClass("scroll-hover")});i=l.get(0);e.on("ace_drag.nav",function(t){if(!f.is_scrolling||!o.is_active()){t.retval.cancel=!0;return}if(n(t.target).closest(".can-scroll").length!=0){t.retval.cancel=!0;return}if(t.direction=="up"||t.direction=="down"){o.move_bar(!0);var r=t.dy;r=parseInt(Math.min(b,r));Math.abs(r)>2&&(r=r*2);r!=0&&(i.scrollTop=i.scrollTop+r,s.style.top=-1*i.scrollTop+"px")}});if(f.settings.smooth_scroll)e.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(){e.css("transition-property","none");p.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(){e.css("transition-property","top");p.css("transition-property","top")});if(r&&!f.settings.include_toggle&&(u=v.get(0),u))l.on("scroll.safari",function(){ace.helper.redraw(u)});if(w=!0,t==!0&&(f.reset(),d&&f.scroll_to_active(),d=!1),typeof f.settings.smooth_scroll=="number"&&f.settings.smooth_scroll>0){e.css({"transition-property":"top","transition-duration":(f.settings.smooth_scroll/1e3).toFixed(2)+"s"});p.css({"transition-property":"top","transition-duration":(f.settings.smooth_scroll/1500).toFixed(2)+"s"});h.on("drag.start",function(n){n.stopPropagation();e.css("transition-property","none")}).on("drag.end",function(n){n.stopPropagation();e.css("transition-property","top")})}if(ace.vars.android){c=ace.helper.scrollTop();c<2&&(window.scrollTo(c,0),setTimeout(function(){f.reset()},20));y=ace.helper.winHeight();n(window).on("scroll.ace_scroll",function(){f.is_scrolling&&o.is_active()&&(tt=ace.helper.winHeight(),tt!=y&&(y=tt,f.reset()))})}}};this.scroll_to_active=function(){var n,u,t,f,i,r;if(o&&o.is_active())try{for(u=y.vars(),t=c.find(".nav-list"),u.minimized&&!u.collapsible?n=t.find("> .active"):(n=e.find("> .active.hover"),n.length==0&&(n=e.find(".active:not(.open)"))),f=n.outerHeight(),t=t.get(0),i=n.get(0);i!=t;)f+=i.offsetTop,i=i.parentNode;r=f-h.height();r>0&&(s.style.top=-r+"px",l.scrollTop(r))}catch(a){}};this.reset=function(n){if(n===!0&&(this.sidebar_fixed=i(t,"fixed")),!this.sidebar_fixed){this.disable();return}w||rt();var r=y.vars(),u=!r.collapsible&&!r.horizontal&&(b=nt())<(it=s.clientHeight);this.is_scrolling=!0;u&&(g.css({height:it,width:8}),h.prev().css({"max-height":b}),o.update({size:b}),o.enable(),o.reset());u&&o.is_active()?c.addClass("sidebar-scroll"):this.is_scrolling&&this.disable()};this.disable=function(){if(this.is_scrolling=!1,h&&(h.css({height:"","max-height":""}),g.css({height:"",width:""}),h.prev().css({"max-height":""}),o.disable()),parseInt(s.style.top)<0&&f.settings.smooth_scroll&&n.support.transition.end)e.one(n.support.transition.end,function(){c.removeClass("sidebar-scroll");e.off(".trans")});else c.removeClass("sidebar-scroll");s.style.top=0};this.prehide=function(n){if(this.is_scrolling&&!y.get("minimized"))if(ft()+n<nt())this.disable();else if(n<0){var t=l.scrollTop()+n;if(t<0)return;s.style.top=-1*t+"px"}};this._reset=function(n){n===!0&&(this.sidebar_fixed=i(t,"fixed"));ace.vars.webkit?setTimeout(function(){f.reset()},0):this.reset()};this.set_hover=function(){a&&a.addClass("scroll-hover")};this.get=function(n){if(this.hasOwnProperty(n))return this[n]};this.set=function(n,t){this.hasOwnProperty(n)&&(this[n]=t)};this.ref=function(){return this};this.updateStyle=function(n){o!=null&&o.update({styleClass:n})};c.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(n){n.stopPropagation();y.get("minimized")||(f._reset(),n.type=="shown"&&f.set_hover())});rt(!0)}}var r=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),i="getComputedStyle"in window?function(n,t){return n.offsetHeight,window.getComputedStyle(n).position==t}:function(t,i){return t.offsetHeight,n(t).css("position")==i};n(document).on("settings.ace.sidebar_scroll",function(t,r){n(".sidebar[data-sidebar-scroll=true]").each(function(){var f=n(this),t=f.ace_sidebar_scroll("ref"),e,u;r=="sidebar_collapsed"&&i(this,"fixed")?(f.attr("data-sidebar-hover")=="true"&&f.ace_sidebar_hover("reset"),t._reset()):(r==="sidebar_fixed"||r==="navbar_fixed")&&(e=t.get("is_scrolling"),u=i(this,"fixed"),t.set("sidebar_fixed",u),u&&!e?t._reset():u||t.disable())})});n(window).on("resize.ace.sidebar_scroll",function(){n(".sidebar[data-sidebar-scroll=true]").each(function(){var r=n(this),t,u;r.attr("data-sidebar-hover")=="true"&&r.ace_sidebar_hover("reset");t=n(this).ace_sidebar_scroll("ref");u=i(this,"fixed");t.set("sidebar_fixed",u);t._reset()})});n.fn.ace_sidebar_scroll||(n.fn.ace_sidebar_scroll=function(i,r){var f,e=this.each(function(){var e=n(this),t=e.data("ace_sidebar_scroll"),o=typeof i=="object"&&i;t||e.data("ace_sidebar_scroll",t=new u(this,o));typeof i=="string"&&typeof t[i]=="function"&&(f=t[i](r))});return f===t?e:f},n.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,smooth_scroll:150,scroll_outside:!1,scroll_style:"",lock_anyway:!1})}(window.jQuery),function(n,t){function e(t,e){function ut(t){var e=t,r=n(e),i=null,u=!1;this.show=function(){i!=null&&clearTimeout(i);i=null;r.addClass("hover-show hover-shown");u=!0;for(var n=0;n<f.length;n++)f[n].find(".hover-show").not(".hover-shown").each(function(){v(this).hide()})};this.hide=function(){u=!1;r.removeClass("hover-show hover-shown hover-flip");i!=null&&clearTimeout(i);i=null;var n=r.find("> .submenu").get(0);n&&a(n,"hide")};this.hideDelay=function(n){i!=null&&clearTimeout(i);r.removeClass("hover-shown");i=setTimeout(function(){u=!1;r.removeClass("hover-show hover-flip");i=null;var t=r.find("> .submenu").get(0);t&&a(t,"hide");typeof n=="function"&&n.call(this)},nt.settings.sub_hover_delay)};this.is_visible=function(){return u}}function v(t){var i=n(t).data("subHide");return i||n(t).data("subHide",i=new ut(t)),i}function a(t,i){var r=n(t).data("ace_scroll");return r?typeof i=="string"?(r[i](),!0):r:!1}function g(i){var o=n(this),b=n(i),nt,d,ft,g,at,vt,v,it,e,y,f,rt;i.style.top="";i.style.bottom="";nt=null;h.minimized&&(nt=o.find(".menu-text").get(0))&&(nt.style.marginTop="");var ut=ace.helper.scrollTop(),st=0,ht=ut;k&&(st=t.offsetTop,ht+=st+1);f=o.offset();f.top=parseInt(f.top);d=0;i.style.maxHeight="";ft=i.scrollHeight;g=o.height();nt&&(d=g,f.top+=d);var et=parseInt(f.top+ft),u=0,ct=w.height(),tt=parseInt(f.top-ht-d),yt=ct,lt=h.horizontal,ot=!1;if(lt&&this.parentNode==l&&(u=0,f.top+=o.height(),ot=!0),!ot&&(u=et-(ct+ut))>=0&&(u=u<tt?u:tt,u==0&&(u=20),tt-u>10&&(u+=parseInt(Math.min(25,tt-u))),f.top+(g-d)>et-u&&(u-=f.top+(g-d)-(et-u)),u>0&&(i.style.top=-u+"px",nt&&(nt.style.marginTop=-u+"px"))),u<0&&(u=0),at=u>0&&u>g-20,at?o.addClass("pull_up"):o.removeClass("pull_up"),lt)if(o.parent().parent().hasClass("hover-flip"))o.addClass("hover-flip");else{var pt=b.offset(),wt=b.width(),bt=w.width();pt.left+wt>bt&&o.addClass("hover-flip")}(vt=o.hasClass("hover")&&!h.mobile_view,vt&&b.find("> li > .submenu").length>0)||(v=yt-(f.top-ut)+u,it=u-v,it>0&&it<g&&(v+=parseInt(Math.max(g,g-it))),v-=5,v<90)||(e=!1,r?b.addClass("sub-scroll").css("max-height",v+"px"):(e=a(i),e==!1&&(b.ace_scroll({observeContent:!0,detached:!0,updatePos:!1,reset:!0,mouseWheelLock:!0,styleClass:s.settings.sub_scroll_style}),e=a(i),y=e.get_track(),y&&b.after(y)),e.update({size:v})),c=v,!r&&e&&(v>14&&ft-v>4?(e.enable(),e.reset()):e.disable(),y=e.get_track(),y&&(y.style.top=-(u-d-1)+"px",f=b.position(),rt=f.left,rt+=p?2:b.outerWidth()-e.track_size(),y.style.left=parseInt(rt)+"px",ot&&(y.style.left=parseInt(rt-2)+"px",y.style.top=parseInt(f.top)+(nt?d-2:0)+"px"))),ace.vars.safari&&ace.helper.redraw(i))}var s=this,nt=this,tt=ace.helper.getAttrSettings(t,n.fn.ace_sidebar_hover.defaults),o,l,c;this.settings=n.extend({},n.fn.ace_sidebar_hover.defaults,e,tt);o=n(t);l=o.find(".nav-list").get(0);o.attr("data-sidebar-hover","true");f.push(o);var h={},y=ace.vars.old_ie,p=!1;i&&(s.settings.sub_hover_delay=parseInt(Math.max(s.settings.sub_hover_delay,2500)));var w=n(window),b=n(".navbar").eq(0),k=b.css("position")=="fixed";if(this.update_vars=function(){k=b.css("position")=="fixed"},s.dirty=!1,this.reset=function(){s.dirty!=!1&&(s.dirty=!1,o.find(".submenu").each(function(){var t=n(this),i=t.parent();t.css({top:"",bottom:"","max-height":""});t.hasClass("ace-scroll")?t.ace_scroll("disable"):t.removeClass("sub-scroll");u(this,"absolute")?t.addClass("can-scroll"):t.removeClass("can-scroll");i.removeClass("pull_up").find(".menu-text:first").css("margin-top","")}),o.find(".hover-show").removeClass("hover-show hover-shown hover-flip"))},this.updateStyle=function(n){sub_scroll_style=n;o.find(".submenu.ace-scroll").ace_scroll("update",{styleClass:n})},this.changeDir=function(n){p=n==="right"},c=-1,!r)o.on("hide.ace.submenu.sidebar_hover",".submenu",function(t){if(!(c<1)){t.stopPropagation();var i=n(this).closest(".ace-scroll.can-scroll");i.length!=0&&u(i[0],"absolute")&&i[0].scrollHeight-this.scrollHeight<c&&i.ace_scroll("disable")}});if(!r)o.on("shown.ace.submenu.sidebar_hover hidden.ace.submenu.sidebar_hover",".submenu",function(){var t,i;c<1||(t=n(this).closest(".ace-scroll.can-scroll"),t.length!=0&&u(t[0],"absolute"))&&(i=t[0].scrollHeight,c>14&&i-c>4?t.ace_scroll("enable").ace_scroll("reset"):t.ace_scroll("disable"))});var d=-1,it=i?"touchstart.sub_hover":"mouseenter.sub_hover",rt=i?"touchend.sub_hover touchcancel.sub_hover":"mouseleave.sub_hover";o.on(it,".nav-list li, .sidebar-shortcuts",function(){var r,e,c,a,b;if(h=o.ace_sidebar("vars"),!h.collapsible){var f=n(this),p=!1,w=f.hasClass("hover"),t=f.find("> .submenu").get(0);if(!(t||this.parentNode==l||w||(p=f.hasClass("sidebar-shortcuts")))){t&&n(t).removeClass("can-scroll");return}if(r=t,e=!1,r||this.parentNode!=l||(r=f.find("> a > .menu-text").get(0)),!r&&p&&(r=f.find(".sidebar-shortcuts-large").get(0)),(!r||!(e=u(r,"absolute")))&&!w){t&&n(t).removeClass("can-scroll");return}c=v(this);t&&(e?(s.dirty=!0,a=ace.helper.scrollTop(),c.is_visible()&&(i||a==d)&&!y||(n(t).addClass("can-scroll"),y||i?(b=this,setTimeout(function(){g.call(b,t)},0)):g.call(this,t)),d=a):n(t).removeClass("can-scroll"));c.show()}}).on(rt,".nav-list li, .sidebar-shortcuts",function(){(h=o.ace_sidebar("vars"),h.collapsible)||n(this).hasClass("hover-show")&&v(this).hideDelay()})}var f;if(!ace.vars.very_old_ie){var i=ace.vars.touch,r=ace.vars.old_ie||i,u="getComputedStyle"in window?function(n,t){return n.offsetHeight,window.getComputedStyle(n).position==t}:function(t,i){return t.offsetHeight,n(t).css("position")==i};n(window).on("resize.sidebar.ace_hover",function(){n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("update_vars").ace_sidebar_hover("reset")});n(document).on("settings.ace.ace_hover",function(t,i){i=="sidebar_collapsed"?n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("reset"):i=="navbar_fixed"&&n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("update_vars")});f=[];n.fn.ace_sidebar_hover=function(i,r){var u,f=this.each(function(){var f=n(this),t=f.data("ace_sidebar_hover"),o=typeof i=="object"&&i;t||f.data("ace_sidebar_hover",t=new e(this,o));typeof i=="string"&&typeof t[i]=="function"&&(u=t[i](r))});return u===t?f:u};n.fn.ace_sidebar_hover.defaults={sub_sub_hover_delay:750,sub_scroll_style:"no-track scroll-thin"}}}(window.jQuery),function(n,t){function r(t,i){var r=t.find(".widget-main").eq(0),o,u,f,e;if(n(window).off("resize.widget.scroll"),o=ace.vars.old_ie||ace.vars.touch,i){u=r.data("ace_scroll");u&&r.data("save_scroll",{size:u.size,lock:u.lock,lock_anyway:u.lock_anyway});f=t.height()-t.find(".widget-header").height()-10;f=parseInt(f);r.css("min-height",f);o?(u&&r.ace_scroll("disable"),r.css("max-height",f).addClass("overflow-scroll")):(u?r.ace_scroll("update",{size:f,mouseWheelLock:!0,lockAnyway:!0}):r.ace_scroll({size:f,mouseWheelLock:!0,lockAnyway:!0}),r.ace_scroll("enable").ace_scroll("reset"));n(window).on("resize.widget.scroll",function(){var n=t.height()-t.find(".widget-header").height()-10;n=parseInt(n);r.css("min-height",n);o?r.css("max-height",n).addClass("overflow-scroll"):r.ace_scroll("update",{size:n}).ace_scroll("reset")})}else r.css("min-height",""),e=r.data("save_scroll"),e&&r.ace_scroll("update",{size:e.size,mouseWheelLock:e.lock,lockAnyway:e.lock_anyway}).ace_scroll("enable").ace_scroll("reset"),o?r.css("max-height","").removeClass("overflow-scroll"):e||r.ace_scroll("disable")}var i=function(t){this.$box=n(t);var i=this;this.reload=function(){var n=this.$box,t=!1;n.css("position")=="static"&&(t=!0,n.addClass("position-relative"));n.append('<div class="widget-box-overlay"><i class="'+ace.vars.icon+'loading-icon fa fa-spinner fa-spin fa-2x white"><\/i><\/div>');n.one("reloaded.ace.widget",function(){n.find(".widget-box-overlay").remove();t&&n.removeClass("position-relative")})};this.close=function(){var n=this.$box;n.fadeOut(300,function(){n.trigger("closed.ace.widget");n.remove()})};this.toggle=function(n,t){var r=this.$box,e=r.find(".widget-body").eq(0),i=null,s=typeof n!="undefined"?n:r.hasClass("collapsed")?"show":"hide",h=s=="show"?"shown":"hidden",o,u,f,c,l;typeof t=="undefined"&&(t=r.find("> .widget-header a[data-action=collapse]").eq(0),t.length==0&&(t=null));t&&(i=t.find(ace.vars[".icon"]).eq(0),u=null,f=null,(u=i.attr("data-icon-show"))?f=i.attr("data-icon-hide"):(o=i.attr("class").match(/fa\-(.*)\-(up|down)/))&&(u="fa-"+o[1]+"-down",f="fa-"+o[1]+"-up"));c=250;l=200;s=="show"?(i&&i.removeClass(u).addClass(f),e.hide(),r.removeClass("collapsed"),e.slideDown(c,function(){r.trigger(h+".ace.widget")})):(i&&i.removeClass(f).addClass(u),e.slideUp(l,function(){r.addClass("collapsed");r.trigger(h+".ace.widget")}))};this.hide=function(){this.toggle("hide")};this.show=function(){this.toggle("show")};this.fullscreen=function(){var n=this.$box.find("> .widget-header a[data-action=fullscreen]").find(ace.vars[".icon"]).eq(0),t=null,i=null;(t=n.attr("data-icon1"))?i=n.attr("data-icon2"):(t="fa-expand",i="fa-compress");this.$box.hasClass("fullscreen")?(n.addClass(t).removeClass(i),this.$box.removeClass("fullscreen"),r(this.$box,!1)):(n.removeClass(t).addClass(i),this.$box.addClass("fullscreen"),r(this.$box,!0));this.$box.trigger("fullscreened.ace.widget")}};n.fn.widget_box=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("widget_box"),o=typeof r=="object"&&r;t||e.data("widget_box",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n(document).on("click.ace.widget",".widget-header a[data-action]",function(t){var o,r,f,e,s,u;if(t.preventDefault(),o=n(this),r=o.closest(".widget-box"),r.length!=0&&!r.hasClass("ui-sortable-helper"))if(f=r.data("widget_box"),f||r.data("widget_box",f=new i(r.get(0))),e=o.data("action"),e=="collapse"){if(s=r.hasClass("collapsed")?"show":"hide",r.trigger(u=n.Event(s+".ace.widget")),u.isDefaultPrevented())return;f.toggle(s,o)}else if(e=="close"){if(r.trigger(u=n.Event("close.ace.widget")),u.isDefaultPrevented())return;f.close()}else if(e=="reload"){if(o.blur(),r.trigger(u=n.Event("reload.ace.widget")),u.isDefaultPrevented())return;f.reload()}else if(e=="fullscreen"){if(r.trigger(u=n.Event("fullscreen.ace.widget")),u.isDefaultPrevented())return;f.fullscreen()}else e=="settings"&&r.trigger("setting.ace.widget")})}(window.jQuery),function(n){n("#ace-settings-btn").on(ace.click_event,function(t){t.preventDefault();n(this).toggleClass("open");n("#ace-settings-box").toggleClass("open")});n("#ace-settings-navbar").on("click",function(){ace.settings.navbar_fixed(null,this.checked)}).each(function(){this.checked=ace.settings.is("navbar","fixed")});n("#ace-settings-sidebar").on("click",function(){ace.settings.sidebar_fixed(null,this.checked)}).each(function(){this.checked=ace.settings.is("sidebar","fixed")});n("#ace-settings-breadcrumbs").on("click",function(){ace.settings.breadcrumbs_fixed(null,this.checked)}).each(function(){this.checked=ace.settings.is("breadcrumbs","fixed")});n("#ace-settings-add-container").on("click",function(){ace.settings.main_container_fixed(null,this.checked)}).each(function(){this.checked=ace.settings.is("main-container","fixed")});n("#ace-settings-compact").on("click",function(){if(this.checked){n("#sidebar").addClass("compact");var t=n("#ace-settings-hover");t.length>0&&t.removeAttr("checked").trigger("click")}else n("#sidebar").removeClass("compact"),n("#sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("reset");ace.vars.old_ie&&ace.helper.redraw(n("#sidebar")[0],!0)});n("#ace-settings-highlight").on("click",function(){this.checked?n("#sidebar .nav-list > li").addClass("highlight"):n("#sidebar .nav-list > li").removeClass("highlight");ace.vars.old_ie&&ace.helper.redraw(n("#sidebar")[0])});n("#ace-settings-hover").on("click",function(){if(!n("#sidebar").hasClass("h-sidebar")){if(this.checked)n("#sidebar li").addClass("hover").filter(".open").removeClass("open").find("> .submenu").css("display","none");else{n("#sidebar li.hover").removeClass("hover");var t=n("#ace-settings-compact");t.length>0&&t.get(0).checked&&t.trigger("click")}n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("reset");n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("reset");ace.vars.old_ie&&ace.helper.redraw(n("#sidebar")[0])}})}(jQuery),function(n){n("#ace-settings-rtl").removeAttr("checked").on("click",function(){t()});var t=function(){function u(t){function r(n,t){i.find("."+n).removeClass(n).addClass("tmp-rtl-"+n).end().find("."+t).removeClass(t).addClass(n).end().find(".tmp-rtl-"+n).removeClass("tmp-rtl-"+n).addClass(t)}var f=n(document.body),i,e,u,o;t||f.toggleClass("rtl");t=t||document.body;i=n(t);i.find(".dropdown-menu:not(.datepicker-dropdown,.colorpicker)").toggleClass("dropdown-menu-right").end().find(".pull-right:not(.dropdown-menu,blockquote,.profile-skills .pull-right)").removeClass("pull-right").addClass("tmp-rtl-pull-right").end().find(".pull-left:not(.dropdown-submenu,.profile-skills .pull-left)").removeClass("pull-left").addClass("pull-right").end().find(".tmp-rtl-pull-right").removeClass("tmp-rtl-pull-right").addClass("pull-left").end().find(".chosen-select").toggleClass("chosen-rtl").next().toggleClass("chosen-rtl");r("align-left","align-right");r("no-padding-left","no-padding-right");r("arrowed","arrowed-right");r("arrowed-in","arrowed-in-right");r("tabs-left","tabs-right");r("messagebar-item-left","messagebar-item-right");n(".modal.aside-vc").ace_aside("flip").ace_aside("insideContainer");i.find(".fa").each(function(){var r,t,i;if(!this.className.match(/ui-icon/)&&!(n(this).closest(".fc-button").length>0))for(r=this.attributes.length,t=0;t<r;t++)i=this.attributes[t].value,i.match(/fa\-(?:[\w\-]+)\-left/)?this.attributes[t].value=i.replace(/fa\-([\w\-]+)\-(left)/i,"fa-$1-right"):i.match(/fa\-(?:[\w\-]+)\-right/)&&(this.attributes[t].value=i.replace(/fa\-([\w\-]+)\-(right)/i,"fa-$1-left"))});e=f.hasClass("rtl");e?(i.find(".scroll-hz").addClass("make-ltr").find(".scroll-content").wrapInner('<div class="make-rtl" />'),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("changeDir","right")):(i.find(".scroll-hz").removeClass("make-ltr").find(".make-rtl").children().unwrap(),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("changeDir","left"));n.fn.ace_scroll&&i.find(".scroll-hz").ace_scroll("reset");try{u=n("#piechart-placeholder");u.length>0&&(o=f.hasClass("rtl")?"nw":"ne",u.data("draw").call(u.get(0),u,u.data("chart"),o))}catch(s){}ace.helper.redraw(t,!0)}var t,i,r;n("#ace-rtl-stylesheet").length==0?(t=n("head").find("link.ace-main-stylesheet"),t.length==0&&(t=n("head").find('link[href*="/ace.min.css"],link[href*="/ace-part2.min.css"]'),t.length==0&&(t=n("head").find('link[href*="/ace.css"],link[href*="/ace-part2.css"]'))),i=n("head").find("link#ace-skins-stylesheet"),r=t.first().attr("href").replace(/(\.min)?\.css$/i,"-rtl$1.css"),n.ajax({url:r}).done(function(){var n=jQuery("<link />",{type:"text/css",rel:"stylesheet",id:"ace-rtl-stylesheet"});i.length>0?n.insertAfter(i):t.length>0?n.insertAfter(t.last()):n.appendTo("head");n.attr("href",r);u();window.Pace&&Pace.running&&Pace.stop()})):u();n(".page-content-area[data-ajax-content=true]").on("ajaxscriptsloaded.rtl",function(){n("body").hasClass("rtl")&&u(this)})}}(jQuery),function(n){try{n("#skin-colorpicker").ace_colorpicker({auto_pos:!1})}catch(t){}n("#skin-colorpicker").on("change",function(){function u(t){var r=n(document.body),u,f,i;r.removeClass("no-skin skin-1 skin-2 skin-3");r.addClass(t);ace.data.set("skin",t);u=["red","blue","green",""];n(".ace-nav > li.grey").removeClass("dark");n(".ace-nav > li").removeClass("no-border margin-1");n(".ace-nav > li:not(:last-child)").removeClass("light-pink").find("> a > "+ace.vars[".icon"]).removeClass("pink").end().eq(0).find(".badge").removeClass("badge-warning");n(".sidebar-shortcuts .btn").removeClass("btn-pink btn-white").find(ace.vars[".icon"]).removeClass("white");n(".ace-nav > li.grey").removeClass("red").find(".badge").removeClass("badge-yellow");n(".sidebar-shortcuts .btn").removeClass("btn-primary btn-white");i=0;n(".sidebar-shortcuts .btn").each(function(){n(this).find(ace.vars[".icon"]).removeClass(u[i++])});f=["btn-success","btn-info","btn-warning","btn-danger"];t=="no-skin"?(i=0,n(".sidebar-shortcuts .btn").each(function(){n(this).attr("class","btn "+f[i++%4])}),n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("updateStyle",""),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("updateStyle","no-track scroll-thin")):t=="skin-1"?(n(".ace-nav > li.grey").addClass("dark"),i=0,n(".sidebar-shortcuts").find(".btn").each(function(){n(this).attr("class","btn "+f[i++%4])}),n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("updateStyle","scroll-white no-track"),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("updateStyle","no-track scroll-thin scroll-white")):t=="skin-2"?(n(".ace-nav > li").addClass("no-border margin-1"),n(".ace-nav > li:not(:last-child)").addClass("light-pink").find("> a > "+ace.vars[".icon"]).addClass("pink").end().eq(0).find(".badge").addClass("badge-warning"),n(".sidebar-shortcuts .btn").attr("class","btn btn-white btn-pink").find(ace.vars[".icon"]).addClass("white"),n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("updateStyle","scroll-white no-track"),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("updateStyle","no-track scroll-thin scroll-white")):t=="skin-3"&&(r.addClass("no-skin"),n(".ace-nav > li.grey").addClass("red").find(".badge").addClass("badge-yellow"),i=0,n(".sidebar-shortcuts .btn").each(function(){n(this).attr("class","btn btn-primary btn-white");n(this).find(ace.vars[".icon"]).addClass(u[i++])}),n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("updateStyle","scroll-dark no-track"),n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("updateStyle","no-track scroll-thin"));n(".sidebar[data-sidebar-scroll=true]").ace_sidebar_scroll("reset");ace.vars.old_ie&&ace.helper.redraw(document.body,!0)}var r=n(this).find("option:selected").data("skin"),t,i;n("#ace-skins-stylesheet").length==0?(t=n("head").find("link.ace-main-stylesheet"),t.length==0&&(t=n("head").find('link[href*="/ace.min.css"],link[href*="/ace-part2.min.css"]'),t.length==0&&(t=n("head").find('link[href*="/ace.css"],link[href*="/ace-part2.css"]'))),i=t.first().attr("href").replace(/(\.min)?\.css$/i,"-skins$1.css"),n.ajax({url:i}).done(function(){var n=jQuery("<link />",{type:"text/css",rel:"stylesheet",id:"ace-skins-stylesheet"});t.length>0?n.insertAfter(t.last()):n.appendTo("head");n.attr("href",i);u(r);window.Pace&&Pace.running&&Pace.stop()})):u(r)})}(jQuery),function(n){n(document).on("reload.ace.widget",".widget-box",function(){var t=n(this);setTimeout(function(){t.trigger("reloaded.ace.widget")},parseInt(Math.random()*1e3+1e3))})}(window.jQuery),function(n){ace.vars.US_STATES=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];try{n("#nav-search-input").bs_typeahead({source:ace.vars.US_STATES,updater:function(t){return n("#nav-search-input").focus(),t}})}catch(t){}}(window.jQuery);
//# sourceMappingURL=AceBundle.min.js.map
