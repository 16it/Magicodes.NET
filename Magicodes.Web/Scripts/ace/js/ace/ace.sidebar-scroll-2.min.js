(function(n,t){function u(t,u){var f=this,tt=n(window),o=n(t),s=o.find(".nav-list"),l=o.find(".sidebar-toggle").eq(0),b=o.find(".sidebar-shortcuts").eq(0),y=s.get(0),k,p,h,v;if(y){k=ace.helper.getAttrSettings(t,n.fn.ace_sidebar_scroll.defaults);this.settings=n.extend({},n.fn.ace_sidebar_scroll.defaults,u,k);p=f.settings.scroll_to_active;this.only_if_fixed=f.settings.only_if_fixed;h=o.ace_sidebar("ref");o.attr("data-sidebar-scroll","true");var d=function(){return o.first("li.hover > .submenu").css("position")=="absolute"},a=null,c=null,e=null;this.is_scrolling=!1;v=!1;this.sidebar_fixed=i(t,"fixed");var g,it,w=function(){var n=s.parent().offset();return f.sidebar_fixed&&(n.top-=ace.helper.scrollTop()),tt.innerHeight()-n.top-(f.settings.include_toggle?0:l.outerHeight())},rt=function(){return y.scrollHeight},nt=function(n){if(!v&&(!f.only_if_fixed||f.sidebar_fixed)&&!d()){if(s.wrap('<div class="nav-wrap-up" />'),f.settings.include_shortcuts&&b.length!=0&&s.parent().prepend(b),f.settings.include_toggle&&l.length!=0&&s.parent().append(l),a=s.parent().ace_scroll({size:w(),reset:!0,mouseWheelLock:!0,lockAnyway:f.settings.lock_anyway,styleClass:f.settins.scroll_style,hoverReset:!1}).closest(".ace-scroll").addClass("nav-scroll"),e=a.data("ace_scroll"),c=a.find(".scroll-content").eq(0),r&&!f.settings.include_toggle){var t=l.get(0);if(t)c.on("scroll.safari",function(){ace.helper.redraw(t)})}v=!0;n==!0&&(f.reset(),p&&f.scroll_to_active(),p=!1)}};this.scroll_to_active=function(){var n,r,t,u,i,f;if(e&&e.is_active())try{for(r=h.vars(),t=o.find(".nav-list"),r.minimized&&!r.collapsible?n=t.find("> .active"):(n=s.find("> .active.hover"),n.length==0&&(n=s.find(".active:not(.open)"))),u=n.outerHeight(),t=t.get(0),i=n.get(0);i!=t;)u+=i.offsetTop,i=i.parentNode;f=u-a.height();f>0&&c.scrollTop(f)}catch(l){}};this.reset=function(n){if(n===!0&&(this.sidebar_fixed=i(t,"fixed")),this.only_if_fixed&&!this.sidebar_fixed||d()){this.disable();return}v||nt();o.addClass("sidebar-scroll");var r=h.vars(),u=!r.minimized&&!r.collapsible&&!r.horizontal&&(g=w())<(it=y.parentNode.scrollHeight);this.is_scrolling=!0;u&&e&&(e.update({size:g}),e.enable(),e.reset());u&&e.is_active()||this.is_scrolling&&this.disable()};this.disable=function(){this.is_scrolling=!1;e&&e.disable();o.removeClass("sidebar-scroll")};this.prehide=function(n){if(this.is_scrolling&&!h.get("minimized"))if(rt()+n<w())this.disable();else if(n<0){var t=c.scrollTop()+n;if(t<0)return;c.scrollTop(t)}};this._reset=function(n){n===!0&&(this.sidebar_fixed=i(t,"fixed"));ace.vars.webkit?setTimeout(function(){f.reset()},0):this.reset()};this.get=function(n){if(this.hasOwnProperty(n))return this[n]};this.set=function(n,t){this.hasOwnProperty(n)&&(this[n]=t)};this.ref=function(){return this};this.updateStyle=function(n){e!=null&&e.update({styleClass:n})};o.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(n){n.stopPropagation();h.get("minimized")||f._reset()});nt(!0)}}var r=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),i="getComputedStyle"in window?function(n,t){return n.offsetHeight,window.getComputedStyle(n).position==t}:function(t,i){return t.offsetHeight,n(t).css("position")==i};n(document).on("settings.ace.sidebar_scroll",function(t,r,u){n(".sidebar[data-sidebar-scroll=true]").each(function(){var e=n(this),t=e.ace_sidebar_scroll("ref"),o,f;r=="sidebar_collapsed"?(e.attr("data-sidebar-hover")=="true"&&e.ace_sidebar_hover("reset"),u==!0?t.disable():t.reset()):(r==="sidebar_fixed"||r==="navbar_fixed")&&(o=t.get("is_scrolling"),f=i(this,"fixed"),t.set("sidebar_fixed",f),f&&!o?t.reset():!f&&t.get("only_if_fixed")&&t.disable())})});n(window).on("resize.ace.sidebar_scroll",function(){n(".sidebar[data-sidebar-scroll=true]").each(function(){var t=n(this).ace_sidebar_scroll("ref"),r=i(this,"fixed");t.set("sidebar_fixed",r);t.reset()})});n.fn.ace_sidebar_scroll||(n.fn.ace_sidebar_scroll=function(i,r){var f,e=this.each(function(){var e=n(this),t=e.data("ace_sidebar_scroll"),o=typeof i=="object"&&i;t||e.data("ace_sidebar_scroll",t=new u(this,o));typeof i=="string"&&typeof t[i]=="function"&&(f=t[i](r))});return f===t?e:f},n.fn.ace_sidebar_scroll.defaults={scroll_to_active:!0,include_shortcuts:!0,include_toggle:!1,scroll_style:"",lock_anyway:!1,only_if_fixed:!0})})(window.jQuery);
//# sourceMappingURL=ace.sidebar-scroll-2.min.js.map
