(function(n,t){var i=function(i,r){function vi(n){n.preventDefault();n.stopPropagation();var r=u.offset(),t=r[nt],i=f?n.pageY:n.pageX;i>t+e?(e=i-t-ut+bt,e>g&&(e=g)):(e=i-t-bt,e<0&&(e=0));c.update_scroll()}function yi(t){t.preventDefault();t.stopPropagation();v=f?w=t.pageY:w=t.pageX;st=!0;n("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",pi);n(kt).off("mouseup.ace_scroll").on("mouseup.ace_scroll",wi);u.addClass("active");dt&&c.$element.trigger("drag.start")}function pi(n){n.preventDefault();n.stopPropagation();v=f?n.pageY:n.pageX;v-w+e>g?v=w+g-e:v-w+e<0&&(v=w-e);e=e+(v-w);w=v;e<0?e=0:e>g&&(e=g);c.update_scroll()}function wi(t){t.preventDefault();t.stopPropagation();st=!1;n("html").off(".ace_scroll");n(kt).off(".ace_scroll");u.removeClass("active");dt&&c.$element.trigger("drag.end");y&&gt&&!yt&&ri()}function pt(n){var i=+new Date,t;ni&&i-ii>1e3&&(t=h[tt],ti!=t&&(ti=t,rt=!0,c.reset(!0)),ii=i);y&&gt&&(a!=null&&(clearTimeout(a),a=null),u.addClass("not-idle"),yt||n!=!0||ri())}function ri(){a!=null&&(clearTimeout(a),a=null);a=setTimeout(function(){a=null;u.removeClass("not-idle")},ai)}function ui(){u.css("visibility","hidden").addClass("scroll-hover");k=f?parseInt(u.outerWidth())||0:parseInt(u.outerHeight())||0;u.css("visibility","").removeClass("scroll-hover")}function hi(){if(vt!==!1){var i=s.offset(),n=i.left,t=i.top;f?lt||(n+=s.outerWidth()-k):lt||(t+=s.outerHeight()-k);vt===!0?u.css({top:parseInt(t),left:parseInt(n)}):vt==="left"?u.css("left",parseInt(n)):vt==="top"&&u.css("top",parseInt(t))}}var c=this,ci=ace.helper.getAttrSettings(i,n.fn.ace_scroll.defaults),o=n.extend({},n.fn.ace_scroll.defaults,r,ci),w,v,a,ii;this.size=0;this.lock=!1;this.lock_anyway=!1;this.$element=n(i);this.element=i;var f=!0,b=!1,y=!1,ht=!1,s=null,h=null,u=null,wt=null,fi=null,ei=null,d=null,ut=0,e=0,g=0,bt=0,ct=!0,oi=!1,p="",lt=!1,k=0,nt,ft,et,si,l,tt,ot=1,at=!1,st=!1,kt="onmouseup"in window?window:"html",dt=o.dragEvent||!1,li=r.scrollEvent||!1,it=o.detached||!1,vt=o.updatePos||!1,gt=o.hideOnIdle||!1,ai=o.hideDelay||1500,yt=!1,ni=o.observeContent||!1,ti=0,rt=!0;return this.create=function(t){var a,r,i,v;if(!ht){t&&(o=n.extend({},n.fn.ace_scroll.defaults,t));this.size=parseInt(this.$element.attr("data-size"))||o.size||200;f=!o.horizontal;nt=f?"top":"left";ft=f?"height":"width";et=f?"maxHeight":"maxWidth";si=f?"clientHeight":"clientWidth";l=f?"scrollTop":"scrollLeft";tt=f?"scrollHeight":"scrollWidth";this.$element.addClass("ace-scroll");this.$element.css("position")=="static"?(at=this.element.style.position,this.element.style.position="relative"):at=!1;a=null;it?a=n('<div class="scroll-track scroll-detached"><div class="scroll-bar"><\/div><\/div>').appendTo("body"):(this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"><\/div><\/div>'));s=this.$element;it||(s=this.$element.find(".scroll-content").eq(0));f||s.wrapInner("<div />");h=s.get(0);it?(u=a,hi()):u=this.$element.find(".scroll-track").eq(0);wt=u.find(".scroll-bar").eq(0);fi=u.get(0);ei=wt.get(0);d=ei.style;f||u.addClass("scroll-hz");o.styleClass&&(p=o.styleClass,u.addClass(p),lt=!!p.match(/scroll\-left|scroll\-top/));k==0&&(u.show(),ui());u.hide();u.on("mousedown",vi);wt.on("mousedown",yi);s.on("scroll",function(){ct&&(e=parseInt(Math.round(this[l]*ot)),d[nt]=e+"px");ct=!1;li&&this.$element.trigger("scroll",[h])});if(o.mouseWheel){this.lock=o.mouseWheelLock;this.lock_anyway=o.lockAnyway;this.$element.on(!n.event.special.mousewheel?"mousewheel.ace_scroll DOMMouseScroll.ace_scroll":"mousewheel.ace_scroll",function(t){var i;if(!b){if(pt(!0),!y)return!c.lock_anyway;st&&(st=!1,n("html").off(".ace_scroll"),n(kt).off(".ace_scroll"),dt&&c.$element.trigger("drag.end"));t.deltaY=t.deltaY||0;var u=t.deltaY>0||t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1,f=!1,e=h[si],r=h[l];return c.lock||(f=u==-1?h[tt]<=r+e:r==0),c.move_bar(!0),i=parseInt(e/8),i<80&&(i=80),i>c.size&&(i=c.size),i+=1,h[l]=r-u*i,f&&!c.lock_anyway}})}if(r=ace.vars.touch&&"ace_drag"in n.event.special&&o.touchDrag,r){i="";v=r?"ace_drag":"swipe";this.$element.on(v+".ace_scroll",function(n){if(b){n.retval.cancel=!0;return}if(pt(!0),!y){n.retval.cancel=this.lock_anyway;return}if(i=n.direction,f&&(i=="up"||i=="down")||!f&&(i=="left"||i=="right")){var t=f?n.dy:n.dx;t!=0&&(Math.abs(t)>20&&r&&(t=t*2),c.move_bar(!0),h[l]=h[l]+t)}})}if(gt&&u.addClass("idle-hide"),ni)u.on("mouseenter.ace_scroll",function(){yt=!0;pt(!1)}).on("mouseleave.ace_scroll",function(){yt=!1;st==!1&&ri()});this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(){rt=!0;ni?pt(!0):o.hoverReset&&c.reset(!0);u.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){u.removeClass("scroll-hover")});f||s.children(0).css(ft,this.size);s.css(et,this.size);b=!1;ht=!0}},this.is_active=function(){return y},this.is_enabled=function(){return!b},this.move_bar=function(n){ct=n},this.get_track=function(){return fi},this.reset=function(n){var i,c,r,t;if(!b&&(ht||this.create(),i=this.size,!n||rt)){if(rt=!1,it&&(c=parseInt(Math.round((parseInt(s.css("border-top-width"))+parseInt(s.css("border-bottom-width")))/2.5)),i-=c),r=f?h[tt]:i,f&&r==0||!f&&this.element.scrollWidth==0){u.removeClass("scroll-active");return}t=f?i:h.clientWidth;f||s.children(0).css(ft,i);s.css(et,this.size);r>t?(y=!0,u.css(ft,t).show(),ot=parseFloat((t/r).toFixed(5)),ut=parseInt(Math.round(t*ot)),bt=parseInt(Math.round(ut/2)),g=t-ut,e=parseInt(Math.round(h[l]*ot)),d[ft]=ut+"px",d[nt]=e+"px",u.addClass("scroll-active"),k==0&&ui(),oi||(o.reset&&(h[l]=0,d[nt]=0),oi=!0),it&&hi()):(y=!1,u.hide(),u.removeClass("scroll-active"),s.css(et,""));return}},this.disable=function(){h[l]=0;d[nt]=0;b=!0;y=!1;u.hide();this.$element.addClass("scroll-disabled");u.removeClass("scroll-active");s.css(et,"")},this.enable=function(){b=!1;this.$element.removeClass("scroll-disabled")},this.destroy=function(){y=!1;b=!1;ht=!1;this.$element.removeClass("ace-scroll scroll-disabled scroll-active");this.$element.off(".ace_scroll");it||(f||s.find("> div").children().unwrap(),s.children().unwrap(),s.remove());u.remove();at!==!1&&(this.element.style.position=at);a!=null&&(clearTimeout(a),a=null)},this.modify=function(t){t&&(o=n.extend({},o,t));this.destroy();this.create();rt=!0;this.reset(!0)},this.update=function(i){i&&(o=n.extend({},o,i));this.size=i.size||this.size;this.lock=i.mouseWheelLock||this.lock;this.lock_anyway=i.lockAnyway||this.lock_anyway;i.styleClass!=t&&(p&&u.removeClass(p),p=i.styleClass,p&&u.addClass(p),lt=!!p.match(/scroll\-left|scroll\-top/))},this.start=function(){h[l]=0},this.end=function(){h[l]=h[tt]},this.hide=function(){u.hide()},this.show=function(){u.show()},this.update_scroll=function(){ct=!1;d[nt]=e+"px";h[l]=parseInt(Math.round(e/ot))},w=-1,v=-1,a=null,ii=0,this.track_size=function(){return k==0&&ui(),k},this.create(),rt=!0,this.reset(!0),ti=h[tt],this};n.fn.ace_scroll=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_scroll"),o=typeof r=="object"&&r;t||e.data("ace_scroll",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,observeContent:!1,hideOnIdle:!1,hideDelay:1500,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1,detached:!1,updatePos:!0}})(window.jQuery);
//# sourceMappingURL=elements.scroller.min.js.map
